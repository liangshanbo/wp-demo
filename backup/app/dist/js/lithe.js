!function(t,n){var e=!(typeof window===n||!t.navigator||!t.document);if(e){var r=t.document,i=Array.prototype,a=Object,u=a.prototype.toString,c=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,o=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,s={},f=i.forEach?function(t,n){t.forEach(n)}:function(t,n){for(var e=0;e<t.length;e++)n(t[e],e,t)},p=i.filter?function(t,n){return t.filter(n)}:function(t,n){var e=[];return f(t,function(t,r,i){n(t,r,i)&&e.push(t)}),e},l=i.map?function(t,n){return t.map(n)}:function(t,n){var e=[];return f(t,function(t,r,i){e.push(n(t,r,i))}),e},h=a.keys?a.keys:function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n},d=function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&(x(t[e])?f(t[e],function(t){n.push(t)}):n.push(t[e]));return n};s.values=d;var g=(i.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){for(var e=0;e<t.length;e++)if(t[e]===n)return e;return-1},function(t,n){return n=n||r,n?n.getElementsByTagName(t):n}),v=function(){},m=function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t},b=function(t){return"[object String]"===u.call(t)},y=function(t){return"[object Function]"===u.call(t)},x=function(t){return"[object Array]"===u.call(t)},O=function(t){var n={};return f(t,function(t){n[t]=1}),h(n)},w=function(t,n){return t.getAttribute(n)},j=function(t){var n=[];return t.replace(c,"").replace(o,function(t,e){n.push(e)}),O(n)},E=function(t,e){var r=t(e.require,e.exports,e);r!==n&&(e.exports=r)},S=function(){this.map={}};m(S.prototype,{trigger:function(t,n){var e,r,i=this.map[t];if(i)for(var e=0;r=i[e];e++)r.handler.apply(r.scope,n||[])},on:function(t,n,e){this.map[t]=this.map[t]||[],this.map[t].push({handler:n,scope:e||this})}});var $=new S,P=function(t){for(var n=t.slice(t.lastIndexOf("?")+1).split("&"),e=0;e<n.length;e++){var r=n[e].split("="),i=r[0],a=r[1];if("timestamp"===i)return a}return null},A=function(t){return t.indexOf("://")>0||0===t.indexOf("//")},D=function(t){return!k(t)},I=function(t){var n=t.match(/[^?]*(?=\/.*$)/);return(n?n[0]:".")+"/"},k=function(t){return t.slice(t.lastIndexOf("/")+1).replace(/\?.*$/,"")},q=function(t){var n=/([^:\/])\/\/+/g;if(n.lastIndex=0,n.test(t)&&(t=t.replace(n,"$1/")),t.indexOf(".")===-1)return t;for(var e,r=t.split("/"),i=[],a=0;a<r.length;a++)if(e=r[a],".."===e){if(0===i.length)throw new Error("The path is invalid: "+t);i.pop()}else"."!==e&&i.push(e);return i.join("/")},_=function(t,n){t=q(t);var e=t.charAt(t.length-1);return"/"===e?t:("#"===e?t=t.slice(0,-1):t.indexOf("?")!==-1||/\.(?:js|css)$/.test(t)||(t+=".js"),t.indexOf(":80/")>0&&(t=t.replace(":80/","/")),n&&(t=t.replace(/\?.+$/,"")),t)},C=function(t){var n,e,r,i,a,u={};for(n=0;n<ft.length&&!u[t];n++){i=ft[n];for(a in i)if(e=i[a],r=new RegExp("^"+a+"/"),r.test(t)&&!u[t]){t=t.replace(r,e),u[t]=!0;break}}return t},N=function(t){var n=ct.alias;if(n){var e=n[t];return e?e:C(t)}return t},T=function(t,n){if(n=St.publicpath&&lt(t).isPublicDeps?St.publicpath:I(n||St.basepath),A(t))return t;nt&&(t=N(t));var e="";return 0===t.indexOf("./")||0===t.indexOf("../")?(0===t.indexOf("./")&&(t=t.substring(2)),e=n+t):e="/"===t.charAt(0)&&"/"!==t.charAt(1)?n+t.substring(1):n+"/"+t,_(e)},B=r.head||g("head")[0]||r.documentElement,F=g("script"),M=F[F.length-1],R=M.src||w(M,"src"),z=w(M,"data-path")||R,G=w(M,"data-config"),H=w(M,"charset")||"utf8",J="true"===w(M,"data-debug"),K="true"===w(M,"data-config-dynamic"),L=P(M.src),Q=null,U=w(M,"data-main"),V={},W={},X={},Y=[],Z=".js";z=z===R?I(R):T(z,I(R));var tt=function(t,n){$.trigger("fetch",[t,n])};$.on("fetch",function(t,n){if(!/\.css$/.test(t)){if(X[t])return void n();if(V[t])return void W[t].push(n);V[t]=!0,W[t]=[n],rt(t,function(){X[t]=!0,delete V[t];var n=W[t];n&&(delete W[t],f(n,function(t){t()}))},H)}});var nt,et={},rt=function(t,e,r){function i(){x(t)&&t.length?rt(t,e,r):y(e)&&e()}var a=x(t)?t.shift():t;if(et[a])return void i();if(!a)throw new Error("getscript url is "+a);var u=it("script",r);u.onload=u.onerror=u.onreadystatechange=function(){/loaded|complete|undefined/.test(u.readyState)&&(u.onload=u.onerror=u.onreadystatechange=null,u.parentNode&&!J&&u.parentNode.removeChild(u),u=n,et[a]=!0,i())},u.async="async";var c;c=K?Q?Q:(new Date).valueOf():Q?Q:L,a=c?a+"?timestamp="+c:a,u.src=a,at(u)},it=function(t,n){var e=r.createElement(t);return e.charset=n?n:H,e.setAttribute("crossorigin","anonymous"),e},at=function(t){var n=g("base",B)[0];n?B.insertBefore(t,n):B.appendChild(t)},ut=[],ct={},ot={created:0,save:1,ready:2,compiling:3,compiled:4},st=[],ft=[],pt=function(t,n,e){return t.indexOf(n+e)!==-1?{isPublicDeps:!0,dep:n}:{isPublicDeps:!1,dep:null}},lt=function(t){if(St.config.publicdeps){var n,e=Object.keys(St.config.publicdeps);t=St.config.alias&&St.config.alias[t]?St.config.alias[t]:t;var r=l(e,function(t){return t.lastIndexOf(Z)<0?t+Z:t});return/\.(?:js)$/.test(t)&&(n=pt(r,t,"")),/\.(?:js)$/.test(t)||(n=pt(r,t,Z)),n}return{isPublicDeps:!1,dep:null}},ht=function(t){var n=t.id,e=p(t.dependencies,function(t){if(St.config.publicdeps){var e=lt(t);if(e.isPublicDeps)return void dt(e.dep)}st.push(n);var r=gt(St.cache[T(t)]);return r&&st.push(n),st.pop(),!r}),r=mt(e);return r},dt=function(t){Y.push(t),Y=O(Y)},gt=function(t){if(!t||t.status!==ot.save)return!1;st.push(t.id);var n=t.dependencies;if(n.length){if(vt(n,st))return!0;for(var e=0;e<n.length;e++)if(gt(St.cache[T(n[e])]))return!0}return st.pop(),!1},vt=function(t,n){var e=t.concat(n);return e.length>O(e).length},mt=function(t){return b(t)&&(t=[t]),l(t,function(t){return T(t)})},bt=function(t,n){t=mt(t),$.trigger("start",[t]);var e=p(t,function(t){return t&&(!St.cache[t]||St.cache[t].status<ot.ready)}),r=e.length;if(0===r)return void n();var i=r,a=function(t){(t||{}).status<ot.ready&&(t.status=ot.ready),--i,0===i&&n()};f(e,function(t){function n(t){if($.trigger("fetchsuccess",[e,t]),e.status>=ot.save){var n=ht(e);n.length?bt(n,function(){a(e)}):a(e)}else t?a(e):a()}var e=St.get(t);e.status<ot.save?tt(t,n):n()})},yt=function(){f(ut,function(t){var n=St.get(t.id);n._save(t)}),ut=[]},xt=function(t,n){bt(t,function(){t=mt(t),Ot(function(){var e=l(t,function(t){return t?St.get(t)._compile():null});y(n)&&n.apply(null,e),$.trigger("end")})})},Ot=function(t){if(St.publicpath&&Y.length){var n=[],e=[];f(Y,function(t){d(St.config.publicdeps[t]).forEach(function(t){h(St.config.publicdeps).indexOf(t)!==-1&&Y.push(t)})}),f(O(Y),function(t){t.lastIndexOf(Z)<0?(n.push(t),n.push(t+Z)):n.push(t)}),f(n,function(t){St.config.publicdeps[t]&&e.push(h(St.config.publicdeps[t])[0])});var r=O(e).join(","),i=St.publicpath+"??"+r;f(Y,function(t){St.get(mt(t)[0])}),$.trigger("fetch",[i,t])}else t()},wt=function(t){ct=t,ft=[];var n,e,r,i=ct.alias;if(i)for(n in i)e=i[n],D(e)&&(r={},r[n]=e,ft.push(r));nt=!0,ct.basepath&&(St.basepath=ct.basepath),ct.publicpath&&(St.publicpath=ct.publicpath),St.config=ct,Q=ct.timestamp},jt=function(){return St.config},Et=function(t){this.id=t,this.status=0,this.dependencies=[],this.exports=null,this.parent=[],this.factory=v};m(Et.prototype,{_compile:function(){function require(n){n=_(T(n),!0);var e=St.cache[n];return e?e.status===ot.compiling?e.exports:(e.parent=t,e._compile()):null}var t=this;if(t.status===ot.compiled)return t.exports;if(t.status<ot.save)return null;t.status=ot.compiling,require.cache=St.cache,t.require=require,t.exports={};var n=t.factory;return y(n)&&E(n,t),t.status=ot.compiled,St.events.trigger("compiled",[t]),t.exports},_save:function(t){this.status<ot.save&&(this.id=t.id,this.name=t.name,this.dependencies=t.deps,this.factory=t.factory,this.status=ot.save)}});var St=m({basepath:z,events:$,cache:{},get:function(t){return t=_(t,!0),St.cache[t]?St.cache[t]:(St.cache[t]=new Et(t),St.cache[t])},define:function(t,n){var e=j(n.toString()),r={id:T(t),name:t,deps:e,factory:n};ut.push(r),yt()},use:function(t,n){!G||nt?xt(t,n):xt(G,function(e){if(wt(e),St.config.preload&&St.config.preload.length)xt(St.config.preload,function(){St.config.preload=[],xt(t,n)});else{if(window.localStorage)for(var r=localStorage.length-1;r>=0;r--){var i=localStorage.key(r);/^gomeplus~.+/g.test(i)&&localStorage.removeItem(i)}xt(t,n)}})},setConfig:wt,getConfig:jt,fetchMods:bt});G&&(G=mt(G)),t.lithe=St,t.define=St.define,U&&setTimeout(function(){t.lithe.use(U)})}else exports.tool=require("./lib/lithe-tool.js"),exports.hfs=require("./lib/lithe-hfs.js")}(this);