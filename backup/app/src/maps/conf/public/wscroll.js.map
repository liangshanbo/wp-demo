{"version":3,"sources":["conf/public/wscroll.js"],"names":["define","require","exports","module","WScroll","isListened","isScrolling","startEvent","endEvent","scrollTop","document","body","_init","init","_scrollListener","self","window","addEventListener","start","_checkEnd","interval","setInterval","end","clearInterval","console","log"],"mappings":";;;;;;AAAA;;;;;;;AAOAA,OAAO,qBAAP,EAA8B,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AAAA,KAE1DC,OAF0D;AAG/D,qBAAc;AAAA;;AACb,QAAKC,UAAL,GAAkB,KAAlB;AACA,QAAKC,WAAL,GAAmB,KAAnB;AACA,QAAKC,UAAL,GAAkB,KAAlB;AACA,QAAKC,QAAL,GAAgB,KAAhB;AACA,QAAKC,SAAL,GAAiBC,SAASC,IAAT,CAAcF,SAA/B;AACA,QAAKG,KAAL;AACA,QAAKC,IAAL;AACA;;AAX8D;AAAA;AAAA,2BAYvD;AACP,QAAI,KAAKR,UAAT,EAAqB;AACpB,YAAO,KAAP;AACA;AACD,SAAKS,eAAL;AACA;AAjB8D;AAAA;AAAA,qCAkB7C;AACjB,QAAIC,OAAO,IAAX;AACAC,WAAOC,gBAAP,CAAwB,QAAxB,EAAkC,YAAW;AAC5C,SAAI,CAACF,KAAKT,WAAV,EAAuB;AACtBS,WAAKT,WAAL,GAAmB,IAAnB;AACAS,WAAKG,KAAL;AACAH,WAAKI,SAAL;AACA;AACDJ,UAAKN,SAAL,GAAkBC,SAASC,IAAT,CAAcF,SAAhC;AACA,KAPD,EAOG,KAPH;AAQA,SAAKJ,UAAL,GAAkB,IAAlB;AACA;AA7B8D;AAAA;AAAA,+BA8BnD;AACX,QAAIU,OAAO,IAAX;AAAA,QACCK,WAAWC,YAAY,YAAW;AACjC,SAAIN,KAAKN,SAAL,KAAmBC,SAASC,IAAT,CAAcF,SAArC,EAAgD;AAC/CM,WAAKO,GAAL;AACAC,oBAAcH,QAAd;AACAL,WAAKT,WAAL,GAAmB,KAAnB;AACA;AACD,KANU,EAMR,GANQ,CADZ;AAQA;AAvC8D;AAAA;AAAA,wBAwC1DY,KAxC0D,EAwCnDI,GAxCmD,EAwC9C;AAChBJ,YAAQ,iBAAW;AAClBM,aAAQC,GAAR,CAAY,OAAZ;AACA,KAFD;AAGAH,UAAM,eAAW;AAChBE,aAAQC,GAAR,CAAY,KAAZ;AACA,KAFD;AAGA,SAAKlB,UAAL,GAAkBW,KAAlB;AACA,SAAKV,QAAL,GAAgBc,GAAhB;AACA;AAjD8D;AAAA;AAAA,2BAkDvD;AACP,SAAKf,UAAL,IAAmB,KAAKA,UAAL,EAAnB;AACA;AApD8D;AAAA;AAAA,yBAqDzD;AACL,SAAKC,QAAL,IAAiB,KAAKA,QAAL,EAAjB;AACA;AAvD8D;;AAAA;AAAA;;AA0DhEL,QAAOD,OAAP,GAAiB,IAAIE,OAAJ,EAAjB;AACA,CA3DD","file":"../../../js_es6/conf/public/wscroll.js","sourcesContent":["/**\n * 监听页面滚动开始和结束\n * @author wanglonghai\n * @date 20161129\n * 全站通用\n </script>\n */\ndefine('conf/public/wscroll', function(require, exports, module) {\n\n\tclass WScroll {\n\t\tconstructor() {\n\t\t\tthis.isListened = false;\n\t\t\tthis.isScrolling = false;\n\t\t\tthis.startEvent = false;\n\t\t\tthis.endEvent = false;\n\t\t\tthis.scrollTop = document.body.scrollTop;\n\t\t\tthis._init();\n\t\t\tthis.init();\n\t\t}\n\t\t_init() {\n\t\t\tif (this.isListened) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._scrollListener();\n\t\t}\n\t\t_scrollListener() {\n\t\t\tlet self = this;\n\t\t\twindow.addEventListener('scroll', function() {\n\t\t\t\tif (!self.isScrolling) {\n\t\t\t\t\tself.isScrolling = true;\n\t\t\t\t\tself.start();\n\t\t\t\t\tself._checkEnd();\n\t\t\t\t}\n\t\t\t\tself.scrollTop =  document.body.scrollTop;\n\t\t\t}, false);\n\t\t\tthis.isListened = true;\n\t\t}\n\t\t_checkEnd() {\n\t\t\tlet self = this,\n\t\t\t\tinterval = setInterval(function() {\n\t\t\t\t\tif (self.scrollTop === document.body.scrollTop) {\n\t\t\t\t\t\tself.end();\n\t\t\t\t\t\tclearInterval(interval);\n\t\t\t\t\t\tself.isScrolling = false;\n\t\t\t\t\t} \n\t\t\t\t}, 300);\n\t\t}\n\t\tinit(start, end) {\n\t\t\tstart = function() {\n\t\t\t\tconsole.log('start');\n\t\t\t}\n\t\t\tend = function() {\n\t\t\t\tconsole.log('end');\n\t\t\t}\n\t\t\tthis.startEvent = start;\n\t\t\tthis.endEvent = end;\n\t\t}\n\t\tstart() {\n\t\t\tthis.startEvent && this.startEvent();\n\t\t}\n\t\tend() {\n\t\t\tthis.endEvent && this.endEvent();\n\t\t}\n\t}\n\n\tmodule.exports = new WScroll();\n});"]}