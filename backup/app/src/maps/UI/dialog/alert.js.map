{"version":3,"sources":["UI/dialog/alert.js"],"names":["define","require","exports","module","pcom","login","alerter","text","btn","callback","undefined","alertBox","location","reload","box","one","html","addElement","innerHTML","onclick","hideBox","remliste","addliste","showBox","prompt","title","confirmBtn","cancelBtn","flog","cancelCallback","_alertNewBox","confirmId","cancelId","confirmbtn","cancelbtn","layer","all","id","alertSecond","time","timer","fn","setTimeout","window","addEventListener","move","onmousewheel","removeEventListener","e","preventDefault","returnValue","stopPropagation"],"mappings":"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","file":"../../../js_es6/UI/dialog/alert.js","sourcesContent":["/*\n name:alert.js\n description:新版普通弹窗引用 有回调\n anthor:huangyihai\n */\n\ndefine(\"UI/dialog/alert.js\", function (require, exports, module) {\n    let pcom = require('UI/dialog/dialog_com.js');\n    let login = require('mods/login.js');\n\n    function alerter(text,btn = \"确定\",callback = undefined) {\n        if (text == '用户未登录') {\n            alertBox('账号已在其他设备登录', '提示', function() {\n                login.login(true);\n            }, '去登录', '知道了', true, function() {\n                location.reload();\n            });\n            return false;\n        }\n        if (text == '该圈子已被创建人解散!') {\n            alertBox('该圈子已被创建人解散!', '确定',function() {\n                location.reload();\n            });\n            return false;\n        }\n        let box = pcom.one('#alert_er');\n        if (!box) {\n            let html = `<div class=\"m-dialog\"><div class=\"dialog-tit\">${text}</div><div class=\"dialog-btn\" id=\"confirm\"><div id=\"sub_btn\">${btn}</div></div></div>`;\n            box = pcom.addElement(html, \"m-mask-private\", \"alert_er\");\n        } else {\n            pcom.one('#alert_er .dialog-tit').innerHTML = text;\n            pcom.one('#alert_er #sub_btn').innerHTML = btn;\n        }\n        pcom.one('#alert_er #confirm').onclick = ()=> {\n            pcom.hideBox(box);\n            remliste();\n            callback && callback();\n        };\n        addliste();\n        pcom.showBox(box);\n    }\n    function prompt(text,btn = \"确定\",callback = undefined){\n        alerter(\"提示:\"+text,btn,callback);\n    }\n    function alertBox(text,title,callback, confirmBtn, cancelBtn, flog, cancelCallback){\n        if(title!==\"\"){\n            _alertNewBox(text,title,callback, confirmBtn, cancelBtn,flog, cancelCallback)\n            return ;\n        }\n        let confirmId = flog ? \"cancel\" : \"confirm\",\n            cancelId = flog ? \"confirm\" : \"cancel\",\n            confirmbtn =confirmBtn?confirmBtn:\"确定\",\n            cancelbtn =cancelBtn?cancelBtn:\"取消\",\n            layer = pcom.one('#alert_confirm');\n        if (!layer) {\n            let html = `<div class=\"m-dialog\"><div class=\"dialog-tit\">${text}</div><div class=\"dialog-btn\"><div id=\"${cancelId}\">${cancelbtn}</div><div id=\"${confirmId}\">${confirmbtn}</div></div></div>`;\n            layer = pcom.addElement(html, \"m-mask-private\", \"alert_confirm\");\n        } else {\n            pcom.all('#alert_confirm .dialog-btn div')[0].id = cancelId;\n            pcom.all('#alert_confirm .dialog-btn div')[1].id = confirmId;\n            pcom.one('#alert_confirm .dialog-tit').innerHTML = text;\n            pcom.one('#alert_confirm #' + confirmId + '').innerHTML = confirmbtn;\n            pcom.one('#alert_confirm #' + cancelId + '').innerHTML = cancelbtn;\n        }\n        addliste();\n        pcom.one('#alert_confirm #confirm').onclick = () => {\n            pcom.hideBox(layer);\n            remliste();\n            callback && callback();\n        };\n        pcom.one('#alert_confirm #cancel').onclick = () => {\n            pcom.hideBox(layer);\n            remliste();\n            cancelCallback && cancelCallback();\n        };\n        pcom.showBox(layer);\n    }\n    function _alertNewBox(text,title,callback, confirmBtn, cancelBtn, flog, cancelCallback) {//有title\n        let confirmId = flog ? \"cancel\" : \"confirm\",\n            cancelId = flog ? \"confirm\" : \"cancel\",\n            confirmbtn =confirmBtn?confirmBtn:\"确定\",\n            cancelbtn =cancelBtn?cancelBtn:\"取消\",\n            layer = pcom.one('#alert_newconfirm');\n\n        if (!layer) {\n            let html = `<div class=\"m-dialog m-dialog-auto\"><div class=\"dialog-tit\">${title}</div><div class=\"dialog-txt\">${text}</div><div class=\"dialog-btn\"><div id=\"${cancelId}\">${cancelbtn}</div><div id=\"${confirmId}\">${confirmbtn}</div></div></div>`;\n            layer = pcom.addElement(html, \"m-mask-private\", \"alert_newconfirm\");\n        } else {\n            pcom.all('#alert_newconfirm .dialog-btn div')[0].id = cancelId;\n            pcom.all('#alert_newconfirm .dialog-btn div')[1].id = confirmId;\n            pcom.one('#alert_newconfirm .dialog-tit').innerHTML = title;\n            pcom.one('#alert_newconfirm .dialog-txt').innerHTML = text;\n            pcom.one('#alert_newconfirm #' + confirmId + '').innerHTML = confirmbtn;\n            pcom.one('#alert_newconfirm #' + cancelId + '').innerHTML = cancelbtn;\n        }\n        pcom.one('#alert_newconfirm #confirm').onclick = () => {\n            pcom.hideBox(layer);\n            remliste();\n            callback && callback();\n        };\n        pcom.one('#alert_newconfirm #cancel').onclick = () => {\n            pcom.hideBox(layer);\n            remliste();\n            cancelCallback && cancelCallback();\n        };\n        addliste();\n        pcom.showBox(layer);\n    }\n    function alertSecond(text, time = 1500){\n        let box = pcom.one('#alert_second');\n        if (!box) {\n            let html = `<div class=\"toast-txt\">${text}</div>`;\n            box = pcom.addElement(html, \"m-toast m-toast-auto\", \"alert_second\");\n        } else {\n            pcom.one('#alert_second .toast-txt').innerHTML = text;\n        }\n        pcom.showBox(box);\n        timer(function () {\n            pcom.hideBox(box);\n        }, time);\n    }\n\n    function timer(fn, time) {\n        setTimeout(fn, time)\n    }\n    //禁止滚动\n    function addliste(){\n        window.addEventListener('touchmove', move);\n        window.onmousewheel = function() {\n            return false\n        }; //禁止鼠标滚轴滚动\n    }\n    //取消禁止滚动\n    function remliste(){\n        window.removeEventListener('touchmove', move);\n        window.onmousewheel = function() {\n            return true\n        }; //开启鼠标滚轴滚动\n    }\n    function move(e) {\n        e.preventDefault && e.preventDefault();\n        e.returnValue = false;\n        e.stopPropagation && e.stopPropagation();\n        return false;\n    }\n    module.exports = {alerter, alertSecond,addliste,remliste,alertBox,prompt};\n});"]}