{"version":3,"sources":["mods/storage/storage.js"],"names":["define","require","exports","module","UI_alert","bSet","localStorage","setItem","removeItem","e","alertSecond","name","val","value","Object","JSON","stringify","window","getItem","item","indexOf","parse","clear"],"mappings":";;AAAA;;;;;;;AAOAA,OAAO,yBAAP,EAAkC,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AACpE,KAAIC,WAAWH,QAAQ,uBAAR,CAAf;;AAEA,KAAII,OAAO,SAAPA,IAAO,GAAM;AAChB,MAAI;AACHC,gBAAaC,OAAb,CAAqB,QAArB,EAA+B,GAA/B;AACAD,gBAAaE,UAAb,CAAwB,QAAxB;AACA,GAHD,CAGE,OAAOC,CAAP,EAAU;AACXL,YAASM,WAAT,CAAqB,uBAArB;AACA,UAAO,KAAP;AACA;AACD,SAAO,IAAP;AACA,EATD;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAIH,UAAU,SAAVA,OAAU,CAACI,IAAD,EAAOC,GAAP,EAAe;AAC5B,MAAI,CAACP,IAAL,EAAW;AACV;AACA;AACD,MAAIQ,QAAQD,GAAZ;AACA,MAAGA,OAAOA,eAAeE,MAAzB,EAAgC;AAC/BD,WAAQE,KAAKC,SAAL,CAAeJ,GAAf,CAAR;AACA;AACDK,SAAOX,YAAP,CAAoBC,OAApB,CAA4BI,IAA5B,EAAiCE,KAAjC;AACA,EATD;;AAWA,KAAIK,UAAU,SAAVA,OAAU,OAAQ;AACrB,MAAG,CAACb,IAAJ,EAAS;AACR;AACA;AACD,MAAIc,OAAOb,aAAaY,OAAb,CAAqBP,IAArB,CAAX;AACG,MAAG;AACL,OAAGQ,KAAKC,OAAL,CAAa,GAAb,MAAsB,CAAtB,IAA2BD,KAAKC,OAAL,CAAa,GAAb,MAAsB,CAApD,EAAsD;AACrD,WAAOL,KAAKM,KAAL,CAAWF,IAAX,CAAP;AACA,IAFD,MAEK;AACJ,WAAOA,IAAP;AACA;AACD,GANE,CAMF,OAAMV,CAAN,EAAQ;AACR,UAAOU,IAAP;AACA;AACD,EAdD;;AAgBA,KAAIX,aAAa,SAAbA,UAAa,OAAQ;AACxB,MAAIW,OAAOD,QAAQP,IAAR,CAAX;AACAQ,SAAOF,OAAOX,YAAP,CAAoBE,UAApB,CAA+BG,IAA/B,CAAP,GAA8C,EAA9C;AACA,EAHD;;AAKA,KAAIW,QAAQ,SAARA,KAAQ,GAAM;AACjBL,SAAOX,YAAP,CAAoBgB,KAApB;AACA,EAFD;;AAIGnB,QAAOD,OAAP,GAAiB,EAACK,gBAAD,EAASW,gBAAT,EAAiBV,sBAAjB,EAA4Bc,YAA5B,EAAjB;AACH,CA7DD","file":"../../../../mods/storage/storage.js","sourcesContent":["/*\r\n    name:storage_model.js\r\n    description:本地存储localstorage\r\n    anthor:luoxiaowei\r\n    data:2016-11-04\r\n */\r\n\r\ndefine(\"mods/storage/storage.js\", function(require, exports, module) {\r\n\tlet UI_alert = require('UI/prompt/alertSecond');\r\n\r\n\tlet bSet = () => {\r\n\t\ttry {\r\n\t\t\tlocalStorage.setItem(\"h5test\", 'a');\r\n\t\t\tlocalStorage.removeItem(\"h5test\");\r\n\t\t} catch (e) {\r\n\t\t\tUI_alert.alertSecond(\"当前浏览器不支持本地存储,请换用别的浏览器\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// let bGet = () => {\r\n\t// \ttry {\r\n\t// \t\tlocalStorage.getItem(\"h5test\");\r\n\t// \t} catch (e) {\r\n\t// \t\tUI_alert.alertSecond(\"当前浏览器不支持本地存储,请换用别的浏览器\");\r\n\t// \t\treturn false;\r\n\t// \t}\r\n\t// \treturn true;\r\n\t// };\r\n\r\n\tlet setItem = (name, val) => {\r\n\t\tif (!bSet) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar value = val;\r\n\t\tif(val && val instanceof Object){\r\n\t\t\tvalue = JSON.stringify(val);\r\n\t\t}\r\n\t\twindow.localStorage.setItem(name,value);\r\n\t};\r\n\r\n\tlet getItem = name => {\r\n\t\tif(!bSet){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet item = localStorage.getItem(name);\r\n    \ttry{\r\n\t\t\tif(item.indexOf('{') === 0 || item.indexOf('[') === 0){\r\n\t\t\t\treturn JSON.parse(item);\r\n\t\t\t}else{\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\treturn item;\r\n\t\t}\r\n\t};\r\n\r\n\tlet removeItem = name => {\r\n\t\tlet item = getItem(name);\r\n\t\titem ? window.localStorage.removeItem(name) : '';\r\n\t};\r\n\r\n\tlet clear = () => {\r\n\t\twindow.localStorage.clear();\r\n\t};\r\n\r\n    module.exports = {setItem,getItem,removeItem,clear};\r\n});"]}