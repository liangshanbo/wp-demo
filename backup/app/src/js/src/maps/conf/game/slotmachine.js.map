{"version":3,"sources":["conf/game/slotmachine.js"],"names":["define","require","exports","module","Ajax","Swiper","Mobile","Storage","internal","WIN","LOSE","$price","$","Slot","playing","isToggleing","u","total_bonus_amount","data","bFirstRule","bFirstReward","num","result","_init","bindEvent","self","on","get_login","_ajax_playing","_go_btn_reset","login","hasClass","_sign","e","$self","type","addClass","toggleClass","attr","share","callGift","_popup","$popup","find","hide","_get_bonus","setTimeout","_pricebeat","time","_get_time","getItem","_set_sign_dis","removeClass","post","url","success","setItem","code","toast","_get_task_data","_set_bonus_num","message","query","pageNum","pageSize","amount","totalAmount","_set_bonus_amount","_set_reward","bonuses","symbol","countBalance","_set_task","$reward","$ul","str","style","html","length","eq","i","l","bonus","append","timestamp","date","Date","year","getFullYear","month","getMonth","day","getDate","h","getHours","m","getMinutes","obj","$task","key","split","$dds","k","isAdd","$nums","parseInt","$lis","css","_go","error","status","bonusStatus","arr","bonusLevel","random","Math","floor","each","index","animate","backgroundPositionY","duration","easing","complete","bonusAmount","valueOf","isAutoHide","show","siblings","pagination","isIOS","slidesPerView","direction"],"mappings":";;;;;;AAAA;;;;;;AAMAA,OAAO,uBAAP,EAAgC,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AAC/DF,YAAQ,GAAR;AACAA,YAAQ,gBAAR;AACA,QAAIG,OAAOH,QAAQ,kBAAR,CAAX;AAAA,QACII,SAASJ,QAAQ,aAAR,CADb;AAAA,QAEIK,SAASL,QAAQ,mBAAR,CAFb;AAAA,QAGIM,UAAUN,QAAQ,sBAAR,CAHd;;AAKA,QAAIO,WAAW;AACXC,aAAK,CACD,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADC,EAED,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAFC,EAGD,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAHC,EAID,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAJC,EAKD,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CALC,CADM;AAQXC,cAAM,CACF,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADE,EAEF,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAFE,EAGF,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAHE;AARK,KAAf;AAcA,QAAIC,SAASC,EAAE,oBAAF,CAAb;;AAtB+D,QAuBzDC,IAvByD;AAwB3D,wBAAc;AAAA;;AACV,iBAAKC,OAAL,GAAe,KAAf;AACA,iBAAKC,WAAL,GAAmB,KAAnB;AACA,iBAAKC,CAAL,GAAS,MAAM,CAAf,CAHU,CAGQ;AAClB,iBAAKC,kBAAL,GAA0B,CAA1B,CAJU,CAImB;AAC7B,iBAAKC,IAAL,GAAY;AACRC,4BAAY,IADJ,EACU;AAClBC,8BAAc,IAFN;AAGRC,qBAAK,CAHG,EAGA;AACRC,wBAAQ,EAJA,CAIG;AAJH,aAAZ;AAMA,iBAAKC,KAAL;AACA,iBAAKC,SAAL;AACH;;AArC0D;AAAA;AAAA,wCAsC/C;AACR,oBAAIC,OAAO,IAAX;AACAb,kBAAE,KAAF,EAASc,EAAT,CAAY,OAAZ,EAAqB,YAAW;AAAE;AAC9B,wBAAID,KAAKX,OAAT,EAAkB;AACd;AACH;AACDW,yBAAKX,OAAL,GAAe,IAAf;AACAW,yBAAKE,SAAL,CAAe,YAAW;AAAE;AACxBF,6BAAKG,aAAL;AACH,qBAFD,EAEG,YAAW;AACVH,6BAAKI,aAAL;AACAJ,6BAAKK,KAAL,CAAW,YAAW,CAAE,CAAxB;AACH,qBALD;AAMH,iBAXD;AAYAlB,kBAAE,OAAF,EAAWc,EAAX,CAAc,OAAd,EAAuB,YAAW;AAAE;AAChC,wBAAId,EAAE,IAAF,EAAQmB,QAAR,CAAiB,SAAjB,CAAJ,EAAiC;AAC7B;AACH;AACDN,yBAAKO,KAAL;AACH,iBALD;AAMApB,kBAAE,MAAF,EAAUc,EAAV,CAAa,qBAAb,EAAoC,UAASO,CAAT,EAAY;AAC5C,wBAAIR,OAAO,IAAX;AAAA,wBACIS,QAAQtB,EAAE,IAAF,CADZ;AAEA,wBAAIsB,MAAMH,QAAN,CAAe,IAAf,CAAJ,EAA0B;AACtB,4BAAIE,EAAEE,IAAF,IAAU,YAAV,IAA2B,CAACV,KAAKX,OAArC,EAA+C;AAC3CoB,kCAAME,QAAN,CAAe,QAAf;AACH;AACJ,qBAJD,MAIO;AACHF,8BAAMG,WAAN,CAAkB,QAAlB;AACH;AACJ,iBAVD;AAWAzB,kBAAE,UAAF,EAAcc,EAAd,CAAiB,OAAjB,EAA0B,YAAW;AACjC,wBAAIS,OAAOvB,EAAE,IAAF,EAAQ0B,IAAR,CAAa,MAAb,CAAX;AACA,4BAAQH,IAAR;AACI,6BAAK,OAAL;AACIV,iCAAKE,SAAL,CAAe,YAAW;AACtBF,qCAAKc,KAAL;AACH,6BAFD,EAEG,YAAW;AACVd,qCAAKK,KAAL,CAAW,YAAW;AAClBL,yCAAKc,KAAL;AACH,iCAFD;AAGH,6BAND;AAOA;AACJ,6BAAK,MAAL;AACI,gCAAI,OAAOd,KAAKe,QAAZ,IAAwB,UAA5B,EAAwC;AACpCf,qCAAKE,SAAL,CAAe,YAAW;AACtBF,yCAAKe,QAAL;AACH,iCAFD,EAEG,YAAW;AACVf,yCAAKK,KAAL,CAAW,YAAW;AAClBL,6CAAKe,QAAL;AACH,qCAFD;AAGH,iCAND;AAOH;AACD;AACJ;AACIf,iCAAKgB,MAAL,CAAYN,IAAZ;AAtBR;AAwBH,iBA1BD;AA2BAvB,kBAAE,QAAF,EAAYc,EAAZ,CAAe,OAAf,EAAwB,YAAW;AAAE;AACjCD,yBAAKE,SAAL,CAAe,YAAW;AACtBF,6BAAKgB,MAAL,CAAY,QAAZ;AACH,qBAFD,EAEG,YAAW;AACVhB,6BAAKK,KAAL;AACH,qBAJD;AAKH,iBAND;AAOA,oBAAIY,SAAS9B,EAAE,QAAF,CAAb;AACA8B,uBAAOC,IAAP,CAAY,QAAZ,EAAsBjB,EAAtB,CAAyB,OAAzB,EAAkC,YAAW;AACzCgB,2BAAOE,IAAP;AACH,iBAFD;AAGAF,uBAAOC,IAAP,CAAY,YAAZ,EAA0BjB,EAA1B,CAA6B,OAA7B,EAAsC,YAAW;AAC7CD,yBAAKc,KAAL;AACH,iBAFD;AAGH;AA9G0D;AAAA;AAAA,oCA+GnD;AACJ,oBAAId,OAAO,IAAX;AACA,qBAAKE,SAAL,CAAe,UAAST,IAAT,EAAe;AAC1BO,yBAAKoB,UAAL;AACH,iBAFD,EAEG,YAAW,CAAE,CAFhB;AAGAC,2BAAW,YAAW;AAClBrB,yBAAKsB,UAAL;AACH,iBAFD,EAEG,IAFH;;AAIA,oBAAIC,OAAOvB,KAAKwB,SAAL,EAAX;AACA,oBAAI1C,QAAQ2C,OAAR,CAAgB,UAAUF,IAA1B,CAAJ,EAAqC;AACjCvB,yBAAK0B,aAAL;AACH;AACJ;AA5H0D;AAAA;AAAA,4CA6H3C;AAAE;AACd,qBAAKrC,OAAL,GAAe,KAAf;AACAF,kBAAE,KAAF,EAASwC,WAAT,CAAqB,QAArB;AACH;AAhI0D;AAAA;AAAA,yCAiI9C;AACT,oBAAI3B,OAAO,IAAX;AACAd,uBAAO0B,WAAP,CAAmB,QAAnB;AACAS,2BAAW,YAAW;AAClBrB,yBAAKsB,UAAL;AACH,iBAFD,EAEG,IAFH;AAGH;AAvI0D;AAAA;AAAA,oCAwInD;AAAE;AACN,oBAAItB,OAAO,IAAX;AACA,qBAAKE,SAAL,CAAe,UAAST,IAAT,EAAe;AAC1Bd,yBAAKiD,IAAL,CAAU;AACNC,6BAAK,uBADC;AAENC,iCAAS,iBAASrC,IAAT,EAAe;AACpB,gCAAI8B,OAAOvB,KAAKwB,SAAL,EAAX;AACA1C,oCAAQiD,OAAR,CAAgB,UAAUR,IAA1B,EAAgC,CAAhC;AACAvB,iCAAK0B,aAAL;AACA,gCAAIjC,KAAKuC,IAAL,IAAa,GAAjB,EAAsB;AAClBhC,qCAAKiC,KAAL,CAAW,cAAX;AACAjC,qCAAKkC,cAAL,GAFkB,CAEK;AACvBlC,qCAAKmC,cAAL,CAAoB,CAApB,EAAuB,IAAvB;AACH,6BAJD,MAIO;AACHnC,qCAAKiC,KAAL,CAAWxC,KAAK2C,OAAhB;AACH;AACJ;AAbK,qBAAV;AAeH,iBAhBD,EAgBG,YAAW;AACVpC,yBAAKK,KAAL;AACH,iBAlBD;AAmBH;AA7J0D;AAAA;AAAA,4CA8J3C;AACZlB,kBAAE,mBAAF,EAAuBwB,QAAvB,CAAgC,SAAhC;AACH;AAhK0D;AAAA;AAAA,yCAiK9C;AAAE;AACX,oBAAIX,OAAO,IAAX;AACAA,qBAAKkC,cAAL;AACAvD,qBAAK0D,KAAL,CAAW;AACPR,yBAAK,6BADE;AAEPpC,0BAAM;AACF6C,iCAAS,CADP;AAEFC,kCAAU;AAFR,qBAFC;AAMPT,6BAAS,iBAASrC,IAAT,EAAe;AACpB,4BAAIA,KAAKuC,IAAL,IAAa,GAAjB,EAAsB;AAClB,gCAAIQ,SAAS/C,KAAKA,IAAL,CAAUgD,WAAV,CAAsBD,MAAnC;AACAxC,iCAAK0C,iBAAL,CAAuBF,MAAvB;AACAxC,iCAAK2C,WAAL,CAAiBlD,KAAKA,IAAL,CAAUmD,OAA3B,EAAoCnD,KAAKA,IAAL,CAAUgD,WAAV,CAAsBI,MAA1D;AACH;AACJ;AAZM,iBAAX;AAcH;AAlL0D;AAAA;AAAA,6CAmL1C;AAAE;AACf,oBAAI7C,OAAO,IAAX;AACArB,qBAAK0D,KAAL,CAAW;AACPR,yBAAK,2BADE;AAEPC,6BAAS,iBAASrC,IAAT,EAAe;AACpB,4BAAIA,KAAKuC,IAAL,IAAa,GAAjB,EAAsB;AAClBhC,iCAAKmC,cAAL,CAAoB1C,KAAKA,IAAL,CAAUqD,YAA9B;AACA9C,iCAAK+C,SAAL,CAAetD,KAAKA,IAApB;AACH,yBAHD,MAGO;AACHO,iCAAKiC,KAAL,CAAWxC,KAAK2C,OAAhB;AACH;AACJ;AATM,iBAAX;AAWH;AAhM0D;AAAA;AAAA,wCAiM/CQ,OAjM+C,EAiMtCC,MAjMsC,EAiM9B;AAAE;AAC3B,oBAAIG,UAAU7D,EAAE,gBAAF,CAAd;AAAA,oBACI8D,MAAMD,QAAQ9B,IAAR,CAAa,IAAb,CADV;AAAA,oBAEIgC,MAAM,EAFV;AAAA,oBAGIlD,OAAO,IAHX;AAAA,oBAIImD,QAAQ,EAJZ;AAKA,oBAAIN,MAAJ,EAAY;AACRG,4BAAQ9B,IAAR,CAAa,oBAAb,EAAmCkC,IAAnC,CAAwCP,MAAxC;AACH;AACD,oBAAII,IAAI/B,IAAJ,CAAS,IAAT,EAAemC,MAAf,GAAwB,CAA5B,EAA+B;AAC3BF,4BAAQF,IAAI/B,IAAJ,CAAS,IAAT,EAAeoC,EAAf,CAAkB,CAAlB,EAAqBzC,IAArB,CAA0B,OAA1B,CAAR;AACH;AACD,qBAAK,IAAI0C,IAAI,CAAR,EAAWC,IAAIZ,QAAQS,MAA5B,EAAoCE,IAAIC,CAAxC,EAA2CD,GAA3C,EAAgD;AAC5C,wBAAIE,QAAQb,QAAQW,CAAR,CAAZ;AACAL,2BAAO,qCAAqCC,KAArC,GAA6C,IAApD;AACAD,2BAAOlD,KAAKwB,SAAL,CAAeiC,MAAM,WAAN,CAAf,IAAqC,OAArC,GAAgDA,MAAM,QAAN,EAAgB,QAAhB,IAA4B,GAA5E,GAAmF,IAA1F;AACAP,2BAAO,OAAP;AACH;AACDD,oBAAIS,MAAJ,CAAWR,GAAX;AACH;AApN0D;AAAA;AAAA,sCAqNjDS,SArNiD,EAqNtC;AACjB,oBAAIC,OAAOD,YAAY,IAAIE,IAAJ,CAASF,SAAT,CAAZ,GAAkC,IAAIE,IAAJ,EAA7C;AAAA,oBACIC,OAAOF,KAAKG,WAAL,EADX;AAAA,oBAEIC,QAAQJ,KAAKK,QAAL,KAAkB,CAF9B;AAAA,oBAGIC,MAAMN,KAAKO,OAAL,EAHV;AAIAH,wBAAQA,QAAQ,CAAR,GAAYA,KAAZ,GAAoB,MAAMA,KAAlC;AACAE,sBAAMA,MAAM,CAAN,GAAUA,GAAV,GAAgB,MAAMA,GAA5B;AACA,oBAAIP,SAAJ,EAAe;AACX,wBAAIS,IAAIR,KAAKS,QAAL,EAAR;AAAA,wBACIC,IAAIV,KAAKW,UAAL,EADR;AAEAH,wBAAIA,IAAI,CAAJ,GAAQA,CAAR,GAAY,MAAMA,CAAtB;AACAE,wBAAIA,IAAI,CAAJ,GAAQA,CAAR,GAAY,MAAMA,CAAtB;AACA,2BAAOR,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAA3B,GAAiC,GAAjC,GAAuCE,CAAvC,GAA2C,GAA3C,GAAiDE,CAAxD;AACH,iBAND,MAMO;AACH,2BAAOR,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAAlC;AACH;AACJ;AArO0D;AAAA;AAAA,sCAsOjDM,GAtOiD,EAsO5C;AAAE;AACb,oBAAIC,QAAQtF,EAAE,cAAF,CAAZ;AACA,qBAAK,IAAIuF,GAAT,IAAgBF,GAAhB,EAAqB;AACjB,wBAAIA,IAAIE,GAAJ,MAAa,WAAjB,EAA8B;AAC1BD,8BAAMvD,IAAN,CAAW,QAAQwD,GAAnB,EAAwB/D,QAAxB,CAAiC,QAAjC;AACH;AACJ;AACJ;AA7O0D;AAAA;AAAA,8CA8OzC6B,MA9OyC,EA8OjC;AAAE;AACxB,oBAAIA,UAAU,CAAd,EAAiB;AACb;AACH;AACDA,yBAASA,SAAS,GAAlB;AACA,qBAAKhD,kBAAL,IAA2BgD,MAA3B,CALsB,CAKa;AACnCA,yBAAS,KAAKhD,kBAAd;AACAL,kBAAE,wBAAF,EAA4BiE,IAA5B,CAAiCZ,MAAjC,EAPsB,CAOoB;AAC1CA,yBAAS,CAACA,SAAS,EAAV,EAAcmC,KAAd,CAAoB,EAApB,CAAT;AACA,oBAAIC,OAAOzF,EAAE,iBAAF,CAAX;AAAA,oBACI0F,IAAIrC,OAAOa,MADf;AAAA,oBAEIG,IAAIoB,KAAKvB,MAFb;AAGA,qBAAK,IAAIE,IAAIf,OAAOa,MAApB,EAA4BE,IAAI,CAAhC,EAAmCA,GAAnC,EAAwC;AACpCqB,yBAAKtB,EAAL,CAAQE,IAAI,CAAJ,GAAQqB,CAAR,GAAYtB,CAApB,EAAuBH,IAAvB,CAA4BZ,OAAOe,IAAI,CAAX,CAA5B;AACH;AACJ;AA7P0D;AAAA;AAAA,2CA8P5C3D,GA9P4C,EA8PvCkF,KA9PuC,EA8PhC;AAAE;AACzB,oBAAIC,QAAQ5F,EAAE,aAAF,CAAZ;AACA,oBAAI2F,KAAJ,EAAW;AACPlF,2BAAOoF,SAASD,MAAM3B,IAAN,EAAT,CAAP;AACH;AACD2B,sBAAM3B,IAAN,CAAWxD,GAAX;AACH;AApQ0D;AAAA;AAAA,4CAqQ3C;AAAE;AACd,oBAAII,OAAO,IAAX;AACArB,qBAAKiD,IAAL,CAAU;AACNC,yBAAK,iCADC;AAENC,6BAAS,iBAASrC,IAAT,EAAe;AACpB,4BAAIA,KAAKuC,IAAL,IAAa,GAAjB,EAAsB;AAClBhC,iCAAKiC,KAAL,CAAW,2EAAX;AACAjC,iCAAKI,aAAL;AACA;AACH;AACDJ,6BAAKP,IAAL,CAAUI,MAAV,GAAmBJ,IAAnB;AACA,4BAAIwF,OAAO9F,EAAE,aAAF,CAAX;AACA8F,6BAAKC,GAAL,CAAS,qBAAT,EAAgC,CAAhC;AACAlF,6BAAKP,IAAL,CAAUG,GAAV,GAAgB,CAAhB;AACAI,6BAAKmF,GAAL;AACH,qBAbK;AAcNC,2BAAO,iBAAW;AACdpF,6BAAKI,aAAL;AACAJ,6BAAKP,IAAL,CAAUI,MAAV,GAAmB,EAAnB;AACH;AAjBK,iBAAV;AAmBH;AA1R0D;AAAA;AAAA,kCA2RrD;AAAE;AACJ,oBAAIG,OAAO,IAAX;AAAA,oBACIiF,OAAO9F,EAAE,aAAF,CADX;AAAA,oBAEIS,MAAMI,KAAKP,IAAL,CAAUG,GAAV,EAFV;AAAA,oBAGIC,SAASG,KAAKP,IAAL,CAAUI,MAHvB;AAAA,oBAIIwF,SAASxF,OAAOJ,IAAP,CAAY6F,WAJzB;AAAA,oBAIsC;AAClCC,sBAAM,EALV;AAMA,oBAAIF,UAAU,KAAd,EAAqB;AACjBE,0BAAMxG,SAAS,KAAT,EAAgBc,OAAOJ,IAAP,CAAY+F,UAAZ,GAAyB,CAAzC,CAAN,CADiB,CACkC;AACtD,iBAFD,MAEO;AACH,wBAAIC,SAASC,KAAKC,KAAL,CAAWD,KAAKD,MAAL,KAAgB,CAA3B,CAAb;AACAF,0BAAMxG,SAAS,MAAT,EAAiB0G,MAAjB,CAAN;AACH;AACD;AACAR,qBAAKW,IAAL,CAAU,UAASrC,CAAT,EAAY;AAClB,qBAAC,UAASsC,KAAT,EAAgB;AACbZ,6BAAK3B,EAAL,CAAQuC,KAAR,EAAeC,OAAf,CAAuB;AACnB;AACAC,iDAAqB,CAACnG,MAAM,EAAN,GAAW2F,IAAIM,KAAJ,CAAZ,IAA2B,CAAC,GAA5B,GAAmC;AAFrC,yBAAvB,EAGG;AACCG,sCAAU,OAAO,OAAOH,KADzB;AAECI,oCAAQ,eAFT;AAGCC,sCAAU,oBAAW;AACjB,oCAAIL,SAAS,CAAb,EAAgB;AACZ,wCAAIR,WAAW,KAAf,EAAsB;AAClB,4CAAIpE,SAAS9B,EAAE,QAAF,CAAb;AAAA,4CACIM,OAAOI,OAAOJ,IADlB;AAAA,4CAEI+C,SAAS/C,KAAK0G,WAAL,CAAiB3D,MAF9B;AAAA,4CAGIgC,MAAM,EAHV;AAIAvD,+CAAOC,IAAP,CAAY,MAAZ,EAAoBA,IAApB,CAAyB,QAAzB,EAAmCkC,IAAnC,CAAwCZ,SAAS,GAAjD;AACAxC,6CAAKgB,MAAL,CAAY,KAAZ,EAAmB,IAAnB;AACAhB,6CAAK0C,iBAAL,CAAuBF,MAAvB;AACAgC,4CAAI,WAAJ,IAAmB,IAAIX,IAAJ,GAAWuC,OAAX,EAAnB;AACA5B,4CAAI,QAAJ,IAAgB/E,KAAK0G,WAArB;AACAnG,6CAAK2C,WAAL,CAAiB,CAAC6B,GAAD,CAAjB;AACH;AACDxE,yCAAKmC,cAAL,CAAoBtC,OAAOJ,IAAP,CAAYqD,YAAhC,EAbY,CAamC;AAC/C9C,yCAAKI,aAAL;AACH;AACJ;AApBF,yBAHH;AAyBH,qBA1BD,EA0BGmD,CA1BH;AA2BH,iBA5BD;AA6BH;;AAED;;;;;;AAxU2D;AAAA;AAAA,mCA6UpD7C,IA7UoD,EA6U9C2F,UA7U8C,EA6UlC;AACrB,oBAAIpF,SAAS9B,EAAE,QAAF,CAAb;AAAA,oBACIa,OAAO,IADX;AAEA,oBAAIU,QAAQ,KAAZ,EAAmB;AACfO,2BAAOC,IAAP,CAAY,MAAZ,EAAoBoF,IAApB,GAA2BC,QAA3B,GAAsCpF,IAAtC;AACH,iBAFD,MAEO,IAAIF,OAAOC,IAAP,CAAY,MAAMR,IAAlB,EAAwB2C,MAA5B,EAAoC;AACvCpC,2BAAOC,IAAP,CAAY,WAAZ,EAAyBoF,IAAzB;AACArF,2BAAOC,IAAP,CAAY,WAAZ,EAAyBoF,IAAzB;AACArF,2BAAOC,IAAP,CAAY,aAAZ,EAA2BoF,IAA3B;AACA,4BAAQ5F,IAAR;AACI,6BAAK,OAAL;AACIO,mCAAOC,IAAP,CAAY,WAAZ,EAAyBC,IAAzB;AACAF,mCAAOC,IAAP,CAAY,WAAZ,EAAyBC,IAAzB;AACA,gCAAInB,KAAKP,IAAL,CAAUC,UAAd,EAA0B;AACtBM,qCAAKP,IAAL,CAAUC,UAAV,GAAuB,KAAvB;AACA2B,2CAAW,YAAW;AAClB,wCAAIzC,MAAJ,CAAW,0BAAX,EAAuC;AACnC4H,oDAAY;AADuB,qCAAvC;AAGH,iCAJD,EAIG,CAJH;AAKH;AACD;AACJ,6BAAK,UAAL;AACIvF,mCAAOC,IAAP,CAAY,WAAZ,EAAyBC,IAAzB;AACAF,mCAAOC,IAAP,CAAY,WAAZ,EAAyBC,IAAzB;AACA,gCAAItC,OAAO4H,KAAX,EAAkB;AACdxF,uCAAOC,IAAP,CAAY,UAAZ,EAAwBC,IAAxB;AACH,6BAFD,MAEO;AACHF,uCAAOC,IAAP,CAAY,MAAZ,EAAoBC,IAApB;AACH;AACDF,mCAAOC,IAAP,CAAY,aAAZ,EAA2BC,IAA3B;AACA;AACJ,6BAAK,QAAL;AACI,gCAAInB,KAAKP,IAAL,CAAUE,YAAV,IAA0BsB,OAAOC,IAAP,CAAY,YAAZ,EAA0BmC,MAA1B,GAAmC,CAAjE,EAAoE;AAChErD,qCAAKP,IAAL,CAAUE,YAAV,GAAyB,KAAzB;AACA0B,2CAAW,YAAW;AAClB,wCAAIzC,MAAJ,CAAW,2BAAX,EAAwC;AACpC8H,uDAAe,CADqB;AAEpCC,mDAAW;AAFyB,qCAAxC;AAIH,iCALD,EAKG,CALH;AAMH;AACD;AAjCR;AAmCA1F,2BAAOC,IAAP,CAAY,MAAZ,EAAoBoF,IAApB,GAA2BC,QAA3B,GAAsCpF,IAAtC;AACAF,2BAAOC,IAAP,CAAY,gBAAgBR,IAA5B,EAAkC4F,IAAlC,GAAyCC,QAAzC,GAAoDpF,IAApD;AACAF,2BAAOC,IAAP,CAAY,mBAAmBR,IAA/B,EAAqC4F,IAArC,GAA4CC,QAA5C,GAAuDpF,IAAvD;AACH;AACDF,uBAAOqF,IAAP;AACA,oBAAID,UAAJ,EAAgB;AACZhF,+BAAW,YAAW;AAClBJ,+BAAOE,IAAP;AACH,qBAFD,EAEG,IAFH;AAGH;AACJ;AAnY0D;;AAAA;AAAA;;AAsY/DzC,WAAOD,OAAP,GAAiBW,IAAjB;AACH,CAvYD","file":"../../../../conf/game/slotmachine.js","sourcesContent":["/**\r\n * @title: 老虎机\r\n * @time:  2017-03-08\r\n * @author: wangchunpeng\r\n * 子类需实现方法 [login,get_login,toast]\r\n */\r\ndefine(\"conf/game/slotmachine\", function(require, exports, module) {\r\n    require(\"$\");\r\n    require(\"lib/zeptojs/fx\");\r\n    let Ajax = require(\"utils/async/ajax\"),\r\n        Swiper = require('mods/swiper'),\r\n        Mobile = require(\"mods/check/mobile\"),\r\n        Storage = require(\"mods/storage/storage\");\r\n\r\n    let internal = {\r\n        WIN: [\r\n            [1, 0, 1],\r\n            [0, 0, 1],\r\n            [0, 1, 1],\r\n            [0, 1, 0],\r\n            [1, 0, 0]\r\n        ],\r\n        LOSE: [\r\n            [0, 0, 0],\r\n            [1, 1, 1],\r\n            [1, 1, 0]\r\n        ]\r\n    }\r\n    let $price = $(\"#main .head .price\");\r\n    class Slot {\r\n        constructor() {\r\n            this.playing = false;\r\n            this.isToggleing = false;\r\n            this.u = 800 / 5; // 每个奖项占的大小\r\n            this.total_bonus_amount = 0; // 该用户的所有的中奖金额\r\n            this.data = {\r\n                bFirstRule: true, //规则弹框 只第一次的时候初始化\r\n                bFirstReward: true,\r\n                num: 1, // 转动的倍数\r\n                result: {} //中间结果\r\n            };\r\n            this._init();\r\n            this.bindEvent();\r\n        }\r\n        bindEvent() {\r\n            let self = this;\r\n            $(\".go\").on(\"click\", function() { // GOGO\r\n                if (self.playing) {\r\n                    return;\r\n                }\r\n                self.playing = true;\r\n                self.get_login(function() { //每次玩都去请求是否是登录状态\r\n                    self._ajax_playing();\r\n                }, function() {\r\n                    self._go_btn_reset();\r\n                    self.login(function() {});\r\n                });\r\n            });\r\n            $(\".sign\").on(\"click\", function() { // 签到\r\n                if ($(this).hasClass(\"disable\")) {\r\n                    return;\r\n                }\r\n                self._sign();\r\n            });\r\n            $(\".btn\").on(\"touchstart touchend\", function(e) {\r\n                let self = this,\r\n                    $self = $(this);\r\n                if ($self.hasClass(\"go\")) {\r\n                    if (e.type == \"touchstart\" && (!self.playing)) {\r\n                        $self.addClass(\"active\");\r\n                    }\r\n                } else {\r\n                    $self.toggleClass(\"active\");\r\n                }\r\n            });\r\n            $(\".btns li\").on(\"click\", function() {\r\n                let type = $(this).attr(\"type\");\r\n                switch (type) {\r\n                    case \"share\":\r\n                        self.get_login(function() {\r\n                            self.share();\r\n                        }, function() {\r\n                            self.login(function() {\r\n                                self.share();\r\n                            });\r\n                        });\r\n                        break;\r\n                    case \"gift\":\r\n                        if (typeof self.callGift == \"function\") {\r\n                            self.get_login(function() {\r\n                                self.callGift();\r\n                            }, function() {\r\n                                self.login(function() {\r\n                                    self.callGift();\r\n                                });\r\n                            });\r\n                        }\r\n                        break;\r\n                    default:\r\n                        self._popup(type);\r\n                }\r\n            });\r\n            $(\".price\").on(\"click\", function() { // 点击获奖数额--弹框\r\n                self.get_login(function() {\r\n                    self._popup(\"reward\");\r\n                }, function() {\r\n                    self.login();\r\n                });\r\n            });\r\n            let $popup = $(\"#popup\");\r\n            $popup.find(\".close\").on(\"click\", function() {\r\n                $popup.hide();\r\n            });\r\n            $popup.find(\".share img\").on(\"click\", function() {\r\n                self.share();\r\n            })\r\n        }\r\n        _init() {\r\n            let self = this;\r\n            this.get_login(function(data) {\r\n                self._get_bonus();\r\n            }, function() {});\r\n            setTimeout(function() {\r\n                self._pricebeat();\r\n            }, 1000);\r\n\r\n            let time = self._get_time();\r\n            if (Storage.getItem(\"slot_\" + time)) {\r\n                self._set_sign_dis();\r\n            }\r\n        }\r\n        _go_btn_reset() { // Go按钮去除active\r\n            this.playing = false;\r\n            $(\".go\").removeClass(\"active\");\r\n        }\r\n        _pricebeat() {\r\n            let self = this;\r\n            $price.toggleClass(\"active\");\r\n            setTimeout(function() {\r\n                self._pricebeat();\r\n            }, 1000);\r\n        }\r\n        _sign() { //签到\r\n            let self = this;\r\n            this.get_login(function(data) {\r\n                Ajax.post({\r\n                    url: \"/api/activity/signing\",\r\n                    success: function(data) {\r\n                        let time = self._get_time();\r\n                        Storage.setItem(\"slot_\" + time, 1);\r\n                        self._set_sign_dis();\r\n                        if (data.code == 200) {\r\n                            self.toast(\"sign success\");\r\n                            self._get_task_data(); //重新获取\r\n                            self._set_bonus_num(5, true);\r\n                        } else {\r\n                            self.toast(data.message);\r\n                        }\r\n                    }\r\n                });\r\n            }, function() {\r\n                self.login();\r\n            });\r\n        }\r\n        _set_sign_dis() {\r\n            $(\"#main .foot .sign\").addClass(\"disable\");\r\n        }\r\n        _get_bonus() { // 获取该用户的抽奖次数、金额\r\n            let self = this;\r\n            self._get_task_data();\r\n            Ajax.query({\r\n                url: \"/api/activity/slots/bonuses\",\r\n                data: {\r\n                    pageNum: 1,\r\n                    pageSize: 6\r\n                },\r\n                success: function(data) {\r\n                    if (data.code == 200) {\r\n                        let amount = data.data.totalAmount.amount;\r\n                        self._set_bonus_amount(amount);\r\n                        self._set_reward(data.data.bonuses, data.data.totalAmount.symbol);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        _get_task_data() { // 获取该用户任务状态\r\n            let self = this;\r\n            Ajax.query({\r\n                url: \"/api/activity/slots/asset\",\r\n                success: function(data) {\r\n                    if (data.code == 200) {\r\n                        self._set_bonus_num(data.data.countBalance);\r\n                        self._set_task(data.data);\r\n                    } else {\r\n                        self.toast(data.message);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        _set_reward(bonuses, symbol) { // 该用户中奖信息\r\n            let $reward = $(\"#popup .reward\"),\r\n                $ul = $reward.find(\"ul\"),\r\n                str = \"\",\r\n                self = this,\r\n                style = \"\";\r\n            if (symbol) {\r\n                $reward.find(\".title span.symbol\").html(symbol);\r\n            }\r\n            if ($ul.find(\"li\").length > 0) {\r\n                style = $ul.find(\"li\").eq(0).attr(\"style\");\r\n            }\r\n            for (let i = 0, l = bonuses.length; i < l; i++) {\r\n                let bonus = bonuses[i];\r\n                str += \"<li class='swiper-slide' style='\" + style + \"'>\";\r\n                str += self._get_time(bonus[\"bonusTime\"]) + \" get \" + (bonus[\"amount\"][\"amount\"] / 100) + \" ₹\";\r\n                str += \"</li>\";\r\n            }\r\n            $ul.append(str);\r\n        }\r\n        _get_time(timestamp) {\r\n            let date = timestamp ? new Date(timestamp) : new Date(),\r\n                year = date.getFullYear(),\r\n                month = date.getMonth() + 1,\r\n                day = date.getDate();\r\n            month = month > 9 ? month : \"0\" + month;\r\n            day = day > 9 ? day : \"0\" + day;\r\n            if (timestamp) {\r\n                let h = date.getHours(),\r\n                    m = date.getMinutes();\r\n                h = h > 9 ? h : \"0\" + h;\r\n                m = m > 9 ? m : \"0\" + m;\r\n                return year + \" \" + month + \".\" + day + \" \" + h + \":\" + m;\r\n            } else {\r\n                return year + \"_\" + month + \"_\" + day;\r\n            }\r\n        }\r\n        _set_task(obj) { //该用户任务完成情况\r\n            let $task = $(\"#popup .task\");\r\n            for (let key in obj) {\r\n                if (obj[key] === \"COMPLETED\") {\r\n                    $task.find(\"li.\" + key).addClass(\"active\");\r\n                }\r\n            }\r\n        }\r\n        _set_bonus_amount(amount) { // 设置中奖金额\r\n            if (amount <= 0) {\r\n                return;\r\n            }\r\n            amount = amount / 100;\r\n            this.total_bonus_amount += amount; //加上之前加载出来的\r\n            amount = this.total_bonus_amount;\r\n            $(\"#popup .reward .amount\").html(amount); //设置弹框的总中奖金额\r\n            amount = (amount + \"\").split(\"\");\r\n            let $dds = $(\".head .price dd\"),\r\n                k = amount.length,\r\n                l = $dds.length;\r\n            for (let i = amount.length; i > 0; i--) {\r\n                $dds.eq(l - 1 - k + i).html(amount[i - 1]);\r\n            }\r\n        }\r\n        _set_bonus_num(num, isAdd) { //设置剩余抽奖次数\r\n            let $nums = $(\".ctls .nums\");\r\n            if (isAdd) {\r\n                num += parseInt($nums.html());\r\n            }\r\n            $nums.html(num);\r\n        }\r\n        _ajax_playing() { // 请求接口是否中奖\r\n            let self = this;\r\n            Ajax.post({\r\n                url: \"/api/activity/slots/gamePlaying\",\r\n                success: function(data) {\r\n                    if (data.code != 200) {\r\n                        self.toast(\"Your chance is 0, you can get through the task to get more chance to win!\");\r\n                        self._go_btn_reset();\r\n                        return;\r\n                    }\r\n                    self.data.result = data;\r\n                    let $lis = $(\".content li\");\r\n                    $lis.css(\"backgroundPositionY\", 0);\r\n                    self.data.num = 1;\r\n                    self._go();\r\n                },\r\n                error: function() {\r\n                    self._go_btn_reset();\r\n                    self.data.result = {};\r\n                }\r\n            });\r\n        }\r\n        _go() { //转起来吧\r\n            let self = this,\r\n                $lis = $(\".content li\"),\r\n                num = self.data.num++,\r\n                result = self.data.result,\r\n                status = result.data.bonusStatus, //[WIN,LOSE]\r\n                arr = [];\r\n            if (status == \"WIN\") {\r\n                arr = internal[\"WIN\"][result.data.bonusLevel - 1]; //根据几等奖显示结果\r\n            } else {\r\n                let random = Math.floor(Math.random() * 3);\r\n                arr = internal[\"LOSE\"][random];\r\n            }\r\n            // console.log(arr);\r\n            $lis.each(function(i) {\r\n                (function(index) {\r\n                    $lis.eq(index).animate({\r\n                        // backgroundPositionY: (self.u * (num * 50 + arr[index]) / 100 + 0.1) + \"rem\"\r\n                        backgroundPositionY: (num * 10 + arr[index]) * (-100) + \"%\"\r\n                    }, {\r\n                        duration: 3000 + 3000 * index,\r\n                        easing: \"easeInOutCirc\",\r\n                        complete: function() {\r\n                            if (index == 2) {\r\n                                if (status === \"WIN\") {\r\n                                    let $popup = $(\"#popup\"),\r\n                                        data = result.data,\r\n                                        amount = data.bonusAmount.amount,\r\n                                        obj = {};\r\n                                    $popup.find(\".win\").find(\".bonus\").html(amount / 100);\r\n                                    self._popup(\"win\", true);\r\n                                    self._set_bonus_amount(amount);\r\n                                    obj[\"bonusTime\"] = new Date().valueOf();\r\n                                    obj[\"amount\"] = data.bonusAmount;\r\n                                    self._set_reward([obj]);\r\n                                }\r\n                                self._set_bonus_num(result.data.countBalance); //剩余抽奖次数\r\n                                self._go_btn_reset();\r\n                            }\r\n                        }\r\n                    });\r\n                })(i);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * @title: 弹框\r\n         * @param  {[type]}   type       [description] 弹框类型\r\n         * @param  {Boolean}  isAutoHide [description] 是否是自动隐藏(3秒隐藏)\r\n         */\r\n        _popup(type, isAutoHide) {\r\n            let $popup = $(\"#popup\"),\r\n                self = this;\r\n            if (type == \"win\") {\r\n                $popup.find(\".win\").show().siblings().hide();\r\n            } else if ($popup.find(\".\" + type).length) {\r\n                $popup.find(\".box_head\").show();\r\n                $popup.find(\".box_deco\").show();\r\n                $popup.find(\".box .close\").show();\r\n                switch (type) {\r\n                    case \"rules\":\r\n                        $popup.find(\".box_deco\").hide();\r\n                        $popup.find(\".box_head\").hide();\r\n                        if (self.data.bFirstRule) {\r\n                            self.data.bFirstRule = false;\r\n                            setTimeout(function() {\r\n                                new Swiper('.rules .swiper-container', {\r\n                                    pagination: '.swiper-pagination'\r\n                                });\r\n                            }, 0);\r\n                        }\r\n                        break;\r\n                    case \"download\":\r\n                        $popup.find(\".box_deco\").hide();\r\n                        $popup.find(\".box_head\").hide();\r\n                        if (Mobile.isIOS) {\r\n                            $popup.find(\".android\").hide();\r\n                        } else {\r\n                            $popup.find(\".ios\").hide();\r\n                        }\r\n                        $popup.find(\".box .close\").hide();\r\n                        break;\r\n                    case \"reward\":\r\n                        if (self.data.bFirstReward && $popup.find(\".reward li\").length > 1) {\r\n                            self.data.bFirstReward = false;\r\n                            setTimeout(function() {\r\n                                new Swiper('.reward .swiper-container', {\r\n                                    slidesPerView: 1,\r\n                                    direction: 'vertical'\r\n                                });\r\n                            }, 0);\r\n                        }\r\n                        break;\r\n                }\r\n                $popup.find(\".box\").show().siblings().hide();\r\n                $popup.find(\".box_head>.\" + type).show().siblings().hide();\r\n                $popup.find(\".box_content>.\" + type).show().siblings().hide();\r\n            }\r\n            $popup.show();\r\n            if (isAutoHide) {\r\n                setTimeout(function() {\r\n                    $popup.hide();\r\n                }, 3000);\r\n            }\r\n        }\r\n    }\r\n\r\n    module.exports = Slot;\r\n});\r\n"]}