{"version":3,"sources":["vendors/dropload.js"],"names":["define","require","exports","module","$","$win","window","$doc","document","fn","dropload","options","MyDropLoad","element","me","$element","insertDOM","loading","isLock","init","prototype","opts","extend","scrollArea","domUp","domClass","domRefresh","domUpdate","domLoad","domDown","distance","loadUpFn","loadDownFn","$scrollArea","on","e","fnTouches","fnTouchstart","fnTouchmove","fnTouchend","touches","originalEvent","_startY","pageY","_meHeight","height","_childrenHeight","overflow","parent","css","_scrollTop","scrollTop","_curY","_moveY","direction","_absMoveY","Math","abs","preventDefault","prepend","$domUp","fnTransition","_offsetY","html","append","$domDown","$domResult","children","fnCallback","remove","lock","unlock","resetload","dom","num"],"mappings":"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","file":"../../../vendors/dropload.js","sourcesContent":["define('vendors/dropload',function(require,exports,module){ \r\n    var $ = require('vendors/zepto');\r\n    (function($){\r\n        'use strict';\r\n        var $win = $(window);\r\n        var $doc = $(document);\r\n        $.fn.dropload = function(options){\r\n            return new MyDropLoad(this, options);\r\n        };\r\n        var MyDropLoad = function(element, options){\r\n            var me = this;\r\n            me.$element = $(element);\r\n            me.insertDOM = false;\r\n            me.loading = false;\r\n            me.isLock = false;\r\n            me.init(options);\r\n        };\r\n\r\n        // 初始化\r\n        MyDropLoad.prototype.init = function(options){\r\n            var me = this;\r\n            me.opts = $.extend({}, {\r\n                scrollArea : me.$element,                                            // 滑动区域\r\n                domUp : {                                                            // 上方DOM\r\n                    domClass   : 'dropload-up',\r\n                    domRefresh : '<div class=\"dropload-refresh\"><span class=\"loading\"></span>↓下拉刷新</div>',\r\n                    domUpdate  : '<div class=\"dropload-update\"><span class=\"loading\"></span>↑释放更新</div>',\r\n                    domLoad    : '<div class=\"dropload-load\"><span class=\"loading\"></span>加载中...</div>'\r\n                },\r\n                domDown : {                                                          // 下方DOM\r\n                    domClass   : 'dropload-down',\r\n                    domRefresh : '<div class=\"dropload-refresh\">↑上拉加载更多</div>',\r\n                    domUpdate  : '<div class=\"dropload-update\">↓释放加载</div>',\r\n                    domLoad    : '<div class=\"dropload-load\"><span class=\"loading\"></span>加载中...</div>'\r\n                },\r\n                distance : 50,                                                       // 拉动距离\r\n                loadUpFn : '',                                                       // 上方function\r\n                loadDownFn : ''                                                      // 下方function\r\n            }, options);\r\n\r\n            // 判断滚动区域\r\n            if(me.opts.scrollArea == window){\r\n                me.$scrollArea = $win;\r\n            }else{\r\n                me.$scrollArea = me.opts.scrollArea;\r\n            }\r\n\r\n            // 绑定触摸\r\n            me.$element.on('touchstart',function(e){\r\n                if(!me.loading && !me.isLock){\r\n                    fnTouches(e);\r\n                    fnTouchstart(e, me);\r\n                }\r\n            });\r\n            me.$element.on('touchmove',function(e){\r\n                if(!me.loading && !me.isLock){\r\n                    fnTouches(e, me);\r\n                    fnTouchmove(e, me);\r\n                }\r\n            });\r\n            me.$element.on('touchend',function(){\r\n                if(!me.loading && !me.isLock){\r\n                    fnTouchend(me);\r\n                }\r\n            });\r\n        };\r\n\r\n        // touches\r\n        function fnTouches(e){\r\n            if(!e.touches){\r\n                e.touches = e.originalEvent.touches;\r\n            }\r\n        }\r\n\r\n        // touchstart\r\n        function fnTouchstart(e, me){\r\n            me._startY = e.touches[0].pageY;\r\n            // 判断滚动区域\r\n            if(me.opts.scrollArea == window){\r\n                me._meHeight = $win.height();\r\n                me._childrenHeight = $doc.height();\r\n            }else{\r\n                /*me._meHeight = me.$element.height();\r\n                me._childrenHeight = me.$element.children().height();*/\r\n                me._meHeight = $(window).height();\r\n                me._childrenHeight = me.$element.height();\r\n            }\r\n            var overflow = me.$scrollArea.parent().css('overflow');\r\n            if(overflow && (overflow == 'scroll' || overflow == 'auto'))\r\n                me._scrollTop = me.$scrollArea.scrollTop();\r\n            else\r\n                me._scrollTop = $(window).scrollTop();\r\n        }\r\n\r\n        // touchmove\r\n        function fnTouchmove(e, me){\r\n            me._curY = e.touches[0].pageY;\r\n            me._moveY = me._curY - me._startY;\r\n\r\n            if(me._moveY > 0){\r\n                me.direction = 'down';\r\n            }else if(me._moveY < 0){\r\n                me.direction = 'up';\r\n            }\r\n\r\n            var _absMoveY = Math.abs(me._moveY);\r\n\r\n            // 加载上方\r\n            if(me.opts.loadUpFn != '' && me._scrollTop <= 0 && me.direction == 'down'){\r\n                e.preventDefault();\r\n                if(!me.insertDOM){\r\n                    me.$element.prepend('<div class=\"'+me.opts.domUp.domClass+'\"></div>');\r\n                    me.insertDOM = true;\r\n                }\r\n\r\n                me.$domUp = $('.'+me.opts.domUp.domClass);\r\n                fnTransition(me.$domUp,0);\r\n\r\n                // 下拉\r\n                if(_absMoveY <= me.opts.distance){\r\n                    me._offsetY = _absMoveY;\r\n                    // 待解决：move时会不断清空、增加dom，有可能影响性能，下同\r\n                    me.$domUp.html('').append(me.opts.domUp.domRefresh);\r\n                // 指定距离 < 下拉距离 < 指定距离*2\r\n                }else if(_absMoveY > me.opts.distance && _absMoveY <= me.opts.distance*2){\r\n                    me._offsetY = me.opts.distance+(_absMoveY-me.opts.distance)*0.5;\r\n                    me.$domUp.html('').append(me.opts.domUp.domUpdate);\r\n                // 下拉距离 > 指定距离*2\r\n                }else{\r\n                    me._offsetY = me.opts.distance+me.opts.distance*0.5+(_absMoveY-me.opts.distance*2)*0.2;\r\n                }\r\n\r\n                me.$domUp.css({'height': me._offsetY});\r\n            }\r\n\r\n            // 加载下方\r\n            if(me.opts.loadDownFn != '' && me._childrenHeight <= (me._meHeight+me._scrollTop) && me.direction == 'up'){\r\n                e.preventDefault();\r\n                if(!me.insertDOM){\r\n                    me.$element.append('<div class=\"'+me.opts.domDown.domClass+'\"></div>');\r\n                    me.insertDOM = true;\r\n                }\r\n\r\n                me.$domDown = $('.'+me.opts.domDown.domClass);\r\n                fnTransition(me.$domDown,0);\r\n\r\n                // 上拉\r\n                if(_absMoveY <= me.opts.distance){\r\n                    me._offsetY = _absMoveY;\r\n                    me.$domDown.html('').append(me.opts.domDown.domRefresh);\r\n                // 指定距离 < 上拉距离 < 指定距离*2\r\n                }else if(_absMoveY > me.opts.distance && _absMoveY <= me.opts.distance*2){\r\n                    me._offsetY = me.opts.distance+(_absMoveY-me.opts.distance)*0.5;\r\n                    me.$domDown.html('').append(me.opts.domDown.domUpdate);\r\n                // 上拉距离 > 指定距离*2\r\n                }else{\r\n                    me._offsetY = me.opts.distance+me.opts.distance*0.5+(_absMoveY-me.opts.distance*2)*0.2;\r\n                }\r\n\r\n                me.$domDown.css({'height': me._offsetY});\r\n                me.$scrollArea.scrollTop(me._offsetY+me._scrollTop);\r\n            }\r\n        }\r\n\r\n        // touchend\r\n        function fnTouchend(me){\r\n            var _absMoveY = Math.abs(me._moveY);\r\n            if(me.insertDOM){\r\n                if(me.direction == 'down'){\r\n                    me.$domResult = me.$domUp;\r\n                    me.domLoad = me.opts.domUp.domLoad;\r\n                }else if(me.direction == 'up'){\r\n                    me.$domResult = me.$domDown;\r\n                    me.domLoad = me.opts.domDown.domLoad;\r\n                }\r\n\r\n                fnTransition(me.$domResult,300);\r\n\r\n                if(_absMoveY > me.opts.distance){\r\n                    me.$domResult.css({'height':me.$domResult.children().height()});\r\n                    me.$domResult.html('').append(me.domLoad);\r\n                    fnCallback(me);\r\n                }else{\r\n                    me.$domResult.css({'height':'0'}).on('webkitTransitionEnd',function(){\r\n                        me.insertDOM = false;\r\n                        $(this).remove();\r\n                    });\r\n                }\r\n                me._moveY = 0;\r\n            }\r\n        }\r\n\r\n        // 回调\r\n        function fnCallback(me){\r\n            me.loading = true;\r\n            if(me.opts.loadUpFn != '' && me.direction == 'down'){\r\n                me.opts.loadUpFn(me);\r\n            }else if(me.opts.loadDownFn != '' && me.direction == 'up'){\r\n                me.opts.loadDownFn(me);\r\n            }\r\n        }\r\n\r\n        // 锁定\r\n        MyDropLoad.prototype.lock = function(){\r\n            var me = this;\r\n            me.isLock = true;\r\n        };\r\n\r\n        // 解锁\r\n        MyDropLoad.prototype.unlock = function(){\r\n            var me = this;\r\n            me.isLock = false;\r\n        };\r\n\r\n        // 重置\r\n        MyDropLoad.prototype.resetload = function(){\r\n            var me = this;\r\n            if(!!me.$domResult){\r\n                me.$domResult.css({'height':'0'}).on('webkitTransitionEnd',function(){\r\n                    me.loading = false;\r\n                    me.insertDOM = false;\r\n                    $(this).remove();\r\n                });\r\n            }\r\n        };\r\n\r\n        // css过渡\r\n        function fnTransition(dom,num){\r\n            dom.css({\r\n                '-webkit-transition':'all '+num+'ms',\r\n                'transition':'all '+num+'ms'\r\n            });\r\n        }\r\n    })($);\r\n    module.exports = $;\r\n});"]}