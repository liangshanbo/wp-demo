{"version":3,"sources":["mods/filters/com.js"],"names":["define","require","exports","module","Vue","cookie","filter","url","size","test","res","match","Array","isArray","price","isNaN","Math","round","toFixed","time","separator","date","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","dateStr","outerUrl","name","search","third","getCookie","userId","encodeURIComponent"],"mappings":"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","file":"../../../js_es6/mods/filters/com.js","sourcesContent":["/*\r\n * @date 20170410\r\n * 页面引用\r\n * 公共过滤器\r\n </script>\r\n */\r\n\r\ndefine('mods/filters/com.js', function (require, exports, module) {\r\n    const Vue = require('vue');\r\n    const cookie = require('mods/storage/cookie.js');\r\n\r\n    Vue.filter('imgbed', function (url, size) {\r\n        if (typeof url === 'string' && (/\\.(jpg|png|gif)$/i).test(url)) {\r\n            var res = url.match(/(.*)(\\.(jpg|png|gif))/);\r\n            return res && Array.isArray(res) ? (res[0] + (size ? ('.' + size) : '') + res[2]) : url;\r\n        } else {\r\n            return url;\r\n        }\r\n    });\r\n\r\n    Vue.filter('money', function (price, size) {\r\n        if (isNaN(price)) {\r\n            return price;\r\n        }\r\n        return size ? Math.round(price / 100).toFixed(size) : Math.round(price / 100);\r\n    });\r\n\r\n    Vue.filter('price', function (price) {\r\n        return price + '. ';\r\n        // return '&#8377; ';\r\n    });\r\n\r\n    Vue.filter('time', function (time, separator) {\r\n        var date = time ? new Date(time) : new Date();\r\n        var year = date.getFullYear();\r\n        var month = (date.getMonth() + 1) > 9 ? (date.getMonth() + 1) : '0' + (date.getMonth() + 1);\r\n        var day = date.getDate() > 9 ? date.getDate() : '0' + date.getDate();\r\n        var hour = date.getHours() > 9 ? date.getHours() : '0' + date.getHours();\r\n        var minute = date.getMinutes() > 9 ? date.getMinutes() : '0' + date.getMinutes();\r\n        var second = date.getSeconds() > 9 ? date.getSeconds() : '0' + date.getSeconds();\r\n        var dateStr = '';\r\n        if (separator) {\r\n            dateStr += day + separator + month + separator + year;\r\n        } else {\r\n            dateStr += day + '/' + month + '/' + year;\r\n        }\r\n        return dateStr;\r\n    });\r\n    Vue.filter(\"buy\", function (outerUrl,name) {\r\n        var search = /\\?/.test(outerUrl),\r\n            third = cookie.getCookie('third_layer');//arr[0] userId  arr[1] cookie\r\n        if (userId !== \"0\") {\r\n            if (third === \"\") {\r\n                return \"/pro/third?name=\" + name + \"&loc=\" + encodeURIComponent(outerUrl + (search ? \"&\" : \"?\") + \"affExtParam1=\" + userId);\r\n            } else {\r\n                return outerUrl + (search ? \"&\" : \"?\") + \"affExtParam1=\" + userId;\r\n            }\r\n        }\r\n        return \"/login?redirect=\" + encodeURIComponent(\"/pro/third?name=\" + name + \"&loc=\" + outerUrl + (search ? \"&\" : \"?\")) + \"&type=buy\";\r\n    })\r\n});"]}