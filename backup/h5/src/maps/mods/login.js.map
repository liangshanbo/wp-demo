{"version":3,"sources":["mods/login.js"],"names":["define","require","exports","module","ajax","Login","login","pathname","type","url","location","search","assign","encodeURIComponent","isLogin","success","query","data"],"mappings":";;AAAA;;;;;;AAMAA,OAAO,YAAP,EAAqB,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;;AAEvD,KAAMC,OAAOH,QAAQ,kBAAR,CAAb;;AAEA,KAAMI,QAAQ;AACb;AACAC,OAFa,iBAEPC,QAFO,EAEEC,IAFF,EAEQ;AACpB,OAAI,OAAOD,QAAP,KAAoB,WAAxB,EAAqC;AACpC,QAAIE,MAAMC,SAASH,QAAT,GAAoBG,SAASC,MAAvC;AACAD,aAASE,MAAT,CAAgB,qBAAqBC,mBAAmBJ,GAAnB,CAArC;AACA,IAHD,MAGO,IAAI,OAAOF,QAAP,KAAoB,QAAxB,EAAkC;AACxCG,aAASE,MAAT,CAAgB,QAAhB;AACA,IAFM,MAEA;AACNF,aAASE,MAAT,CAAgB,qBAAqBC,mBAAmBN,QAAnB,CAArB,GAAoDC,IAApE;AACA;AACD,GAXY;AAYbM,SAZa,mBAYLC,QAZK,EAYIR,QAZJ,EAYaC,IAZb,EAYmB;AAC/BJ,QAAKY,KAAL,CAAW;AACVP,SAAK,iBADK;AAEVM,aAAS,uBAAQ;AAChB,SAAI,OAAOE,IAAP,KAAgB,SAAhB,IAA6BA,SAAS,KAA1C,EAAiD;AAChDZ,YAAMC,KAAN,CAAYC,QAAZ,EAAqBC,IAArB;AACA,MAFD,MAEO;AACNO,kBAAWA,SAAQE,IAAR,CAAX;AACA;AACD;AARS,IAAX;AAUA;AAvBY,EAAd;;AA0BAd,QAAOD,OAAP,GAAiBG,KAAjB;AACA,CA/BD","file":"../../js_es6/mods/login.js","sourcesContent":["/**\r\n * 登录跳转\r\n * @author wanglonghai\r\n * @date 20160221\r\n * 类型判断\r\n */\r\ndefine('mods/login', function(require, exports, module) {\r\n\r\n\tconst ajax = require('utils/async/ajax');\r\n\r\n\tconst Login = {\r\n\t\t//type  目前只用于 商品详情未登录直接购买和收藏\r\n\t\tlogin(pathname,type) {\r\n\t\t\tif (typeof pathname === 'undefined') {\r\n\t\t\t\tlet url = location.pathname + location.search;\r\n\t\t\t\tlocation.assign('/login?redirect=' + encodeURIComponent(url));\r\n\t\t\t} else if (typeof pathname === 'boolen') {\r\n\t\t\t\tlocation.assign('/login');\r\n\t\t\t} else {\r\n\t\t\t\tlocation.assign('/login?redirect=' + encodeURIComponent(pathname) + type);\r\n\t\t\t}\r\n\t\t},\r\n\t\tisLogin(success, pathname,type) {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: '/internal/login',\r\n\t\t\t\tsuccess: data => {\r\n\t\t\t\t\tif (typeof data === 'boolean' && data === false) {\r\n\t\t\t\t\t\tLogin.login(pathname,type);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsuccess && success(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.exports = Login;\r\n});"]}