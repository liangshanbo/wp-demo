{"version":3,"sources":["mods/storage/storage.js"],"names":["define","require","exports","module","UI_alert","bSet","localStorage","setItem","removeItem","e","alertSecond","name","val","value","Object","JSON","stringify","window","getItem","item","indexOf","parse","clear"],"mappings":";;AAAA;;;;;;;AAOAA,OAAO,yBAAP,EAAkC,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AACpE,KAAIC,WAAWH,QAAQ,iBAAR,CAAf;;AAEA,KAAII,OAAO,SAAPA,IAAO,GAAM;AAChB,MAAI;AACHC,gBAAaC,OAAb,CAAqB,QAArB,EAA+B,GAA/B;AACAD,gBAAaE,UAAb,CAAwB,QAAxB;AACA,GAHD,CAGE,OAAOC,CAAP,EAAU;AACXL,YAASM,WAAT,CAAqB,uBAArB;AACA,UAAO,KAAP;AACA;AACD,SAAO,IAAP;AACA,EATD;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAIH,UAAU,SAAVA,OAAU,CAACI,IAAD,EAAOC,GAAP,EAAe;AAC5B,MAAI,CAACP,IAAL,EAAW;AACV;AACA;AACD,MAAIQ,QAAQD,GAAZ;AACA,MAAGA,OAAOA,eAAeE,MAAzB,EAAgC;AAC/BD,WAAQE,KAAKC,SAAL,CAAeJ,GAAf,CAAR;AACA;AACDK,SAAOX,YAAP,CAAoBC,OAApB,CAA4BI,IAA5B,EAAiCE,KAAjC;AACA,EATD;;AAWA,KAAIK,UAAU,SAAVA,OAAU,OAAQ;AACrB,MAAG,CAACb,IAAJ,EAAS;AACR;AACA;AACD,MAAIc,OAAOb,aAAaY,OAAb,CAAqBP,IAArB,CAAX;AACG,MAAG;AACL,OAAGQ,KAAKC,OAAL,CAAa,GAAb,MAAsB,CAAtB,IAA2BD,KAAKC,OAAL,CAAa,GAAb,MAAsB,CAApD,EAAsD;AACrD,WAAOL,KAAKM,KAAL,CAAWF,IAAX,CAAP;AACA,IAFD,MAEK;AACJ,WAAOA,IAAP;AACA;AACD,GANE,CAMF,OAAMV,CAAN,EAAQ;AACR,UAAOU,IAAP;AACA;AACD,EAdD;;AAgBA,KAAIX,aAAa,SAAbA,UAAa,OAAQ;AACxB,MAAIW,OAAOD,QAAQP,IAAR,CAAX;AACAQ,SAAOF,OAAOX,YAAP,CAAoBE,UAApB,CAA+BG,IAA/B,CAAP,GAA8C,EAA9C;AACA,EAHD;;AAKA,KAAIW,QAAQ,SAARA,KAAQ,GAAM;AACjBL,SAAOX,YAAP,CAAoBgB,KAApB;AACA,EAFD;;AAIGnB,QAAOD,OAAP,GAAiB,EAACK,gBAAD,EAASW,gBAAT,EAAiBV,sBAAjB,EAA4Bc,YAA5B,EAAjB;AACH,CA7DD","file":"../../../js_es6/mods/storage/storage.js","sourcesContent":["/*\n    name:storage_model.js\n    description:本地存储localstorage\n    anthor:luoxiaowei\n    data:2016-11-04\n */\n\ndefine(\"mods/storage/storage.js\", function(require, exports, module) {\n\tlet UI_alert = require('UI/dialog/alert');\n\n\tlet bSet = () => {\n\t\ttry {\n\t\t\tlocalStorage.setItem(\"h5test\", 'a');\n\t\t\tlocalStorage.removeItem(\"h5test\");\n\t\t} catch (e) {\n\t\t\tUI_alert.alertSecond(\"当前浏览器不支持本地存储,请换用别的浏览器\");\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t// let bGet = () => {\n\t// \ttry {\n\t// \t\tlocalStorage.getItem(\"h5test\");\n\t// \t} catch (e) {\n\t// \t\tUI_alert.alertSecond(\"当前浏览器不支持本地存储,请换用别的浏览器\");\n\t// \t\treturn false;\n\t// \t}\n\t// \treturn true;\n\t// };\n\n\tlet setItem = (name, val) => {\n\t\tif (!bSet) {\n\t\t\treturn;\n\t\t}\n\t\tvar value = val;\n\t\tif(val && val instanceof Object){\n\t\t\tvalue = JSON.stringify(val);\n\t\t}\n\t\twindow.localStorage.setItem(name,value);\n\t};\n\n\tlet getItem = name => {\n\t\tif(!bSet){\n\t\t\treturn;\n\t\t}\n\t\tlet item = localStorage.getItem(name);\n    \ttry{\n\t\t\tif(item.indexOf('{') === 0 || item.indexOf('[') === 0){\n\t\t\t\treturn JSON.parse(item);\n\t\t\t}else{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}catch(e){\n\t\t\treturn item;\n\t\t}\n\t};\n\n\tlet removeItem = name => {\n\t\tlet item = getItem(name);\n\t\titem ? window.localStorage.removeItem(name) : '';\n\t};\n\n\tlet clear = () => {\n\t\twindow.localStorage.clear();\n\t};\n\n    module.exports = {setItem,getItem,removeItem,clear};\n});"]}