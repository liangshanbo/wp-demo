{"version":3,"sources":["conf/hy/game/slotmachine.js"],"names":["define","require","exports","module","Ajax","Swiper","Mobile","Storage","internal","WIN","LOSE","$price","$","Slot","playing","isToggleing","u","total_bonus_amount","data","bFirstRule","bFirstReward","num","result","_init","bindEvent","self","on","get_login","_ajax_playing","_go_btn_reset","login","hasClass","_sign","e","$self","type","addClass","toggleClass","attr","share","_popup","$popup","find","hide","_get_bonus","setTimeout","_pricebeat","time","_get_time","getItem","_set_sign_dis","removeClass","post","url","success","setItem","code","toast","_get_task_data","_set_bonus_num","message","query","pageNum","pageSize","amount","totalAmount","_set_bonus_amount","_set_reward","bonuses","symbol","countBalance","_set_task","$reward","$ul","str","style","html","length","eq","i","l","bonus","append","timestamp","date","Date","year","getFullYear","month","getMonth","day","getDate","h","getHours","m","getMinutes","obj","$task","key","split","$dds","k","isAdd","$nums","parseInt","$lis","css","_go","error","status","bonusStatus","arr","bonusLevel","random","Math","floor","each","index","animate","backgroundPositionY","duration","easing","complete","bonusAmount","valueOf","isAutoHide","show","siblings","pagination","isIOS","slidesPerView","direction"],"mappings":"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","file":"../../../../js_es6/conf/hy/game/slotmachine.js","sourcesContent":["/**\n * @title: 老虎机\n * @time:  2017-03-08\n * @author: wangchunpeng\n * 子类需实现方法 [login,get_login,toast]\n */\ndefine(\"conf/hy/game/slotmachine\", function(require, exports, module) {\n    require(\"$\");\n    require(\"lib/zeptojs/fx\");\n    let Ajax = require(\"utils/async/ajax\"),\n        Swiper = require('mods/swiper'),\n        Mobile = require(\"mods/check/mobile\"),\n        Storage = require(\"mods/storage/storage\");\n\n    let internal = {\n        WIN: [\n            [1, 0, 1],\n            [0, 0, 1],\n            [0, 1, 1],\n            [0, 1, 0],\n            [1, 0, 0]\n        ],\n        LOSE: [\n            [0, 0, 0],\n            [1, 1, 1],\n            [1, 1, 0]\n        ]\n    }\n    let $price = $(\"#main .head .price\");\n    class Slot {\n        constructor() {\n            this.playing = false;\n            this.isToggleing = false;\n            this.u = 800 / 5; // 每个奖项占的大小\n            this.total_bonus_amount = 0; // 该用户的所有的中奖金额\n            this.data = {\n                bFirstRule: true, //规则弹框 只第一次的时候初始化\n                bFirstReward: true,\n                num: 1, // 转动的倍数\n                result: {} //中间结果\n            };\n            this._init();\n            this.bindEvent();\n        }\n        bindEvent() {\n            let self = this;\n            $(\".go\").on(\"click\", function() { // GOGO\n                if (self.playing) {\n                    return;\n                }\n                self.playing = true;\n                self.get_login(function() { //每次玩都去请求是否是登录状态\n                    self._ajax_playing();\n                }, function() {\n                    self._go_btn_reset();\n                    self.login(function() {});\n                });\n            });\n            $(\".sign\").on(\"click\", function() { // 签到\n                if ($(this).hasClass(\"disable\")) {\n                    return;\n                }\n                self._sign();\n            });\n            $(\".btn\").on(\"touchstart touchend\", function(e) {\n                let self = this,\n                    $self = $(this);\n                if ($self.hasClass(\"go\")) {\n                    if (e.type == \"touchstart\" && (!self.playing)) {\n                        $self.addClass(\"active\");\n                    }\n                } else {\n                    $self.toggleClass(\"active\");\n                }\n            });\n            $(\".btns li\").on(\"click\", function() {\n                let type = $(this).attr(\"type\");\n                if (type == \"share\") {\n                    self.get_login(function() {\n                        self.share();\n                    }, function() {\n                        self.login(function() {\n                            self.share();\n                        });\n                    });\n                    return;\n                }\n                self._popup(type);\n            });\n            $(\".price\").on(\"click\", function() { // 点击获奖数额--弹框\n                self.get_login(function() {\n                    self._popup(\"reward\");\n                }, function() {\n                    self.login();\n                });\n            });\n            let $popup = $(\"#popup\");\n            $popup.find(\".close\").on(\"click\", function() {\n                $popup.hide();\n            });\n            $popup.find(\".share img\").on(\"click\", function() {\n                self.share();\n            })\n        }\n        _init() {\n            let self = this;\n            this.get_login(function(data) {\n                self._get_bonus();\n            }, function() {});\n            setTimeout(function() {\n                self._pricebeat();\n            }, 1000);\n\n            let time = self._get_time();\n            if (Storage.getItem(\"slot_\" + time)) {\n                self._set_sign_dis();\n            }\n        }\n        _go_btn_reset() { // Go按钮去除active\n            this.playing = false;\n            $(\".go\").removeClass(\"active\");\n        }\n        _pricebeat() {\n            let self = this;\n            $price.toggleClass(\"active\");\n            setTimeout(function() {\n                self._pricebeat();\n            }, 1000);\n        }\n        _sign() { //签到\n            let self = this;\n            this.get_login(function(data) {\n                Ajax.post({\n                    url: \"/api/activity/signing\",\n                    success: function(data) {\n                        let time = self._get_time();\n                        Storage.setItem(\"slot_\" + time, 1);\n                        self._set_sign_dis();\n                        if (data.code == 200) {\n                            self.toast(\"sign success\");\n                            self._get_task_data(); //重新获取\n                            self._set_bonus_num(5, true);\n                        } else {\n                            self.toast(data.message);\n                        }\n                    }\n                });\n            }, function() {\n                self.login();\n            });\n        }\n        _set_sign_dis() {\n            $(\"#main .foot .sign\").addClass(\"disable\");\n        }\n        _get_bonus() { // 获取该用户的抽奖次数、金额\n            let self = this;\n            self._get_task_data();\n            Ajax.query({\n                url: \"/api/activity/slots/bonuses\",\n                data: {\n                    pageNum: 1,\n                    pageSize: 6\n                },\n                success: function(data) {\n                    if (data.code == 200) {\n                        let amount = data.data.totalAmount.amount;\n                        self._set_bonus_amount(amount);\n                        self._set_reward(data.data.bonuses, data.data.totalAmount.symbol);\n                    }\n                }\n            });\n        }\n        _get_task_data() { // 获取该用户任务状态\n            let self = this;\n            Ajax.query({\n                url: \"/api/activity/slots/asset\",\n                success: function(data) {\n                    if (data.code == 200) {\n                        self._set_bonus_num(data.data.countBalance);\n                        self._set_task(data.data);\n                    } else {\n                        self.toast(data.message);\n                    }\n                }\n            });\n        }\n        _set_reward(bonuses, symbol) { // 该用户中奖信息\n            let $reward = $(\"#popup .reward\"),\n                $ul = $reward.find(\"ul\"),\n                str = \"\",\n                self = this,\n                style = \"\";\n            if (symbol) {\n                $reward.find(\".title span.symbol\").html(symbol);\n            }\n            if ($ul.find(\"li\").length > 0) {\n                style = $ul.find(\"li\").eq(0).attr(\"style\");\n            }\n            for (let i = 0, l = bonuses.length; i < l; i++) {\n                let bonus = bonuses[i];\n                str += \"<li class='swiper-slide' style='\" + style + \"'>\";\n                str += self._get_time(bonus[\"bonusTime\"]) + \" get \" + (bonus[\"amount\"][\"amount\"] / 100) + \" ₹\";\n                str += \"</li>\";\n            }\n            $ul.append(str);\n        }\n        _get_time(timestamp) {\n            let date = timestamp ? new Date(timestamp) : new Date(),\n                year = date.getFullYear(),\n                month = date.getMonth() + 1,\n                day = date.getDate();\n            month = month > 9 ? month : \"0\" + month;\n            day = day > 9 ? day : \"0\" + day;\n            if (timestamp) {\n                let h = date.getHours(),\n                    m = date.getMinutes();\n                h = h > 9 ? h : \"0\" + h;\n                m = m > 9 ? m : \"0\" + m;\n                return year + \" \" + month + \".\" + day + \" \" + h + \":\" + m;\n            } else {\n                return year + \"_\" + month + \"_\" + day;\n            }\n        }\n        _set_task(obj) { //该用户任务完成情况\n            let $task = $(\"#popup .task\");\n            for (let key in obj) {\n                if (obj[key] === \"COMPLETED\") {\n                    $task.find(\"li.\" + key).addClass(\"active\");\n                }\n            }\n        }\n        _set_bonus_amount(amount) { // 设置中奖金额\n            if (amount <= 0) {\n                return;\n            }\n            amount = amount / 100;\n            this.total_bonus_amount += amount; //加上之前加载出来的\n            amount = this.total_bonus_amount;\n            $(\"#popup .reward .amount\").html(amount); //设置弹框的总中奖金额\n            amount = (amount + \"\").split(\"\");\n            let $dds = $(\".head .price dd\"),\n                k = amount.length,\n                l = $dds.length;\n            for (let i = amount.length; i > 0; i--) {\n                $dds.eq(l - 1 - k + i).html(amount[i - 1]);\n            }\n        }\n        _set_bonus_num(num, isAdd) { //设置剩余抽奖次数\n            let $nums = $(\".ctls .nums\");\n            if (isAdd) {\n                num += parseInt($nums.html());\n            }\n            $nums.html(num);\n        }\n        _ajax_playing() { // 请求接口是否中奖\n            let self = this;\n            Ajax.post({\n                url: \"/api/activity/slots/gamePlaying\",\n                success: function(data) {\n                    if (data.code != 200) {\n                        self.toast(\"Your chance is 0, you can get through the task to get more chance to win!\");\n                        self._go_btn_reset();\n                        return;\n                    }\n                    self.data.result = data;\n                    let $lis = $(\".content li\");\n                    $lis.css(\"backgroundPositionY\", 0);\n                    self.data.num = 1;\n                    self._go();\n                },\n                error: function() {\n                    self._go_btn_reset();\n                    self.data.result = {};\n                }\n            });\n        }\n        _go() { //转起来吧\n            let self = this,\n                $lis = $(\".content li\"),\n                num = self.data.num++,\n                result = self.data.result,\n                status = result.data.bonusStatus, //[WIN,LOSE]\n                arr = [];\n            if (status == \"WIN\") {\n                arr = internal[\"WIN\"][result.data.bonusLevel - 1]; //根据几等奖显示结果\n            } else {\n                let random = Math.floor(Math.random() * 3);\n                arr = internal[\"LOSE\"][random];\n            }\n            // console.log(arr);\n            $lis.each(function(i) {\n                (function(index) {\n                    $lis.eq(index).animate({\n                        // backgroundPositionY: (self.u * (num * 50 + arr[index]) / 100 + 0.1) + \"rem\"\n                        backgroundPositionY: (num * 10 + arr[index]) * (-100) + \"%\"\n                    }, {\n                        duration: 3000 + 3000 * index,\n                        easing: \"easeInOutCirc\",\n                        complete: function() {\n                            if (index == 2) {\n                                if (status === \"WIN\") {\n                                    let $popup = $(\"#popup\"),\n                                        data = result.data,\n                                        amount = data.bonusAmount.amount,\n                                        obj = {};\n                                    $popup.find(\".win\").find(\".bonus\").html(amount / 100);\n                                    self._popup(\"win\", true);\n                                    self._set_bonus_amount(amount);\n                                    obj[\"bonusTime\"] = new Date().valueOf();\n                                    obj[\"amount\"] = data.bonusAmount;\n                                    self._set_reward([obj]);\n                                }\n                                self._set_bonus_num(result.data.countBalance); //剩余抽奖次数\n                                self._go_btn_reset();\n                            }\n                        }\n                    });\n                })(i);\n            });\n        }\n\n        /**\n         * @title: 弹框\n         * @param  {[type]}   type       [description] 弹框类型\n         * @param  {Boolean}  isAutoHide [description] 是否是自动隐藏(3秒隐藏)\n         */\n        _popup(type, isAutoHide) {\n            let $popup = $(\"#popup\"),\n                self = this;\n            if (type == \"win\") {\n                $popup.find(\".win\").show().siblings().hide();\n            } else if ($popup.find(\".\" + type).length) {\n                $popup.find(\".box_head\").show();\n                $popup.find(\".box_deco\").show();\n                $popup.find(\".box .close\").show();\n                switch (type) {\n                    case \"rules\":\n                        $popup.find(\".box_deco\").hide();\n                        $popup.find(\".box_head\").hide();\n                        if (self.data.bFirstRule) {\n                            self.data.bFirstRule = false;\n                            setTimeout(function() {\n                                new Swiper('.rules .swiper-container', {\n                                    pagination: '.swiper-pagination'\n                                });\n                            }, 0);\n                        }\n                        break;\n                    case \"download\":\n                        $popup.find(\".box_deco\").hide();\n                        $popup.find(\".box_head\").hide();\n                        if (Mobile.isIOS) {\n                            $popup.find(\".android\").hide();\n                        } else {\n                            $popup.find(\".ios\").hide();\n                        }\n                        $popup.find(\".box .close\").hide();\n                        break;\n                    case \"reward\":\n                        if (self.data.bFirstReward && $popup.find(\".reward li\").length > 1) {\n                            self.data.bFirstReward = false;\n                            setTimeout(function() {\n                                new Swiper('.reward .swiper-container', {\n                                    slidesPerView: 1,\n                                    direction: 'vertical'\n                                });\n                            }, 0);\n                        }\n                        break;\n                }\n                $popup.find(\".box\").show().siblings().hide();\n                $popup.find(\".box_head>.\" + type).show().siblings().hide();\n                $popup.find(\".box_content>.\" + type).show().siblings().hide();\n            }\n            $popup.show();\n            if (isAutoHide) {\n                setTimeout(function() {\n                    $popup.hide();\n                }, 3000);\n            }\n        }\n    }\n\n    module.exports = Slot;\n});\n"]}