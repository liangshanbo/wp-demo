{"version":3,"sources":["conf/hy/game/slot.js"],"names":["define","require","exports","module","userId","hasLogin","window","userinfo","user","id","Slot","UI","login","Share","appCall","Mobile","dlApp","shareFB","title","description","picture","wapcsspath","shareType","type","success","alertSecond","setTimeout","location","reload","failed","SlotH5","props","self","_superinit","callH5","url","_share_init","$popup","$","$download","get_login","show","isIOS","find","hide","scroll","document","body","scrollTop","on","download","fbAsyncInit","FB","init","appId","xfbml","version","AppEvents","logPageView","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","callback","errback","layer_show","msg","dl"],"mappings":"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","file":"../../../../js_es6/conf/hy/game/slot.js","sourcesContent":["/**\n * @title: 老虎机\n * @time:  2017-03-08\n * @author: wangchunpeng\n * 子类需实现方法 [login,get_login,toast]\n */\ndefine(\"conf/hy/game/slot\", function(require, exports, module) {\n    let userId = \"\",\n        hasLogin = false;\n    if (window.userinfo) {\n        userId = userinfo.user.id;\n        hasLogin = true;\n    }\n    window.userId = userId;\n    window.hasLogin = hasLogin;\n    let Slot = require(\"conf/hy/game/slotmachine\"),\n        UI = require('UI/dialog/alert.js'),\n        login = require('mods/login'),\n        Share = require('mods/share/shareDialog'),\n        appCall = require(\"utils/appCall\"),\n        Mobile = require(\"mods/check/mobile\"),\n        dlApp = require(\"utils/dlApp\");\n\n    let shareFB = new Share({\n        title: \"SlotMachine\",\n        description: \"Slot Machine\",\n        picture: wapcsspath + \"/images/game/laohuji/share.gif\",\n        shareType: \"gameShare\",\n        type: \"gif\",\n        success: function() {\n            UI.alertSecond(\"share success\");\n            setTimeout(function() {\n                location.reload();\n            }, 200);\n        },\n        failed: function() {\n            UI.alertSecond(\"share failed\");\n        }\n    });\n    class SlotH5 extends Slot {\n        constructor(props) {\n            super(props);\n            let self = this;\n            this._superinit();\n            appCall.callH5({\n                url: \"/game/slotmachine\"\n            });\n            setTimeout(function() {\n                self._share_init();\n            }, 0);\n        }\n        _superinit() {\n            let hasLogin = false,\n                $popup = $(\"#popup\"),\n                self = this,\n                $download = $(\"#download\");\n\n            self.get_login(function() {\n                $(\".btns .btn_download\").show();\n                $download.show();\n                hasLogin = true;\n            }, function() {});\n\n            if (hasLogin) {\n                if (Mobile.isIOS) {\n                    $download.find(\".down_android\").hide();\n                    $download.find(\".down_ios\").show();\n                }\n                $(window).scroll(function() {\n                    if (document.body.scrollTop > 0) {\n                        $download.hide();\n                    } else {\n                        $download.show();\n                    }\n                });\n                $popup.find(\".download li.no\").on(\"click\", function() {\n                    $popup.hide();\n                });\n                $popup.find(\".download li.yes\").on(\"click\", function() {\n                    self.download();\n                });\n                $download.on(\"click\", function() {\n                    self.download();\n                });\n            }\n        }\n        _share_init() {\n            window.fbAsyncInit = function() {\n                FB.init({\n                    appId: '125552021295455',\n                    xfbml: true,\n                    version: 'v2.8'\n                });\n                FB.AppEvents.logPageView();\n            };\n            (function(d, s, id) {\n                var js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) {\n                    return;\n                }\n                js = d.createElement(s);\n                js.id = id;\n                js.src = \"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6\";\n                fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        }\n        get_login(callback, errback) {\n            if (userinfo) {\n                callback();\n            } else {\n                errback();\n            }\n        }\n        login(callback) {\n            login.login();\n        }\n        share() {\n            shareFB.layer_show();\n        }\n        toast(msg) {\n            UI.alertSecond(msg);\n        }\n        download() {\n            dlApp.dl();\n        }\n    }\n\n    new SlotH5();\n});\n"]}