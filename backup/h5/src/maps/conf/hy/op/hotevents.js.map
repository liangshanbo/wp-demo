{"version":3,"sources":["conf/hy/op/hotevents.js"],"names":["define","require","exports","modul","Ajax","Vue","UI","Login","laz","Swiper","component","props","items","type","Array","default","_default","template","friends","pageNum","pageNum1","pageNum2","filter","url","indexOf","substr","el","data","showContent","isShowModal","hasLogin","userData","isShowConent","rewardData","name","description","clientTime","moreData","resultData","myeventData","init","self","$","children","length","dropload","scrollArea","window","domDown","domClass","domRefresh","wapcsspath","domUpdate","domLoad","loadDownFn","me","getClientTime","query","success","setTimeout","resetload","code","activityPlans","concat","plans","lazyload","alertSecond","message","invitationFriendOrders","ready","getParams","location","href","getData","userinfo","getMyeventsData","methods","toggleCon","opt","hash","showReward","eventObj","removeClass","closeModal","addClass","splice","$set","user","id","lazyLoading","pagination","login","date","Date","year","getFullYear","month","filterNum","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","num"],"mappings":"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","file":"../../../../js_es6/conf/hy/op/hotevents.js","sourcesContent":["\"use strict\";\n/**\n * title: 活动\n * author: lijing\n * time: 2017-05-03\n */\ndefine('conf/hy/op/hotevents.js', function(require, exports, modul) {\n    require(\"$\");\n    var Ajax = require(\"utils/async/ajax\"),\n        Vue = require(\"vue\"),\n        UI = require(\"UI/dialog/alert.js\"),\n        Login = require(\"mods/login\"),\n        laz = require('utils/async/lazyload.js'),\n        Swiper = require('mods/swiper');\n    require('mods/filters/com');\n    require('vendors/dropload.js');\n\n    Vue.component('listmore', {\n        props: {\n            items: {\n                type: Array,\n                default: function _default() {\n                    return [];\n                }\n            }\n        },\n        template: \"#planlist_tpl\"\n    });\n    Vue.component('friendsmore', {\n        props: {\n            friends: {\n                type: Array,\n                default: function _default() {\n                    return [];\n                }\n            }\n        },\n        template: \"#myevents_tpl\"\n    })\n    var pageNum = 2\n    var pageNum1 = 2\n    var pageNum2 = 2;\n    Vue.filter('hy', function(url) {\n        if (url.indexOf(\"game\") > 0) {\n            return \"/hy\" + url.substr(url.indexOf(\"/game\"));\n        }\n        if (url.indexOf(\"op\") > 0) {\n            return \"/hy\" + url.substr(url.indexOf(\"/op\"));\n        }\n        return url;\n    });\n    new Vue({\n        el: 'body',\n        data: function() {\n            return {\n                showContent: 'NOW',\n                isShowModal: false,\n                hasLogin: false,\n                userData: {},\n                isShowConent: false,\n                rewardData: { name: '', description: '', friends: {} },\n                clientTime: '',\n                moreData: [],\n                resultData: [],\n                myeventData: []\n            }\n        },\n        init: function() {\n            var self = this;\n            if ($('#plansList').children('.events-item').length > 0) {\n                $('#plansList').dropload({\n                    scrollArea: window,\n                    domDown: {\n                        domClass: 'dropload-down',\n                        domRefresh: '<div class=\"dropload-refresh\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                        domUpdate: '<div class=\"dropload-update\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                        domLoad: '<div class=\"dropload-load\"><img src=\"' + wapcsspath + '/images/common/loading.gif\" alt=\"\"/></div>'\n                    },\n                    loadDownFn: function loadDownFn(me) {\n                        self.clientTime = self.getClientTime()\n                        Ajax.query({\n                            url: \"/api/cashback/plans?dynamic=NOW&planStatus=ALL&clientTime=\" + self.clientTime + \"&pageNum=\" + pageNum++ + \"&pageSize=10\",\n                            success: function success(data) {\n                                setTimeout(function() {\n                                    me.resetload();\n                                }, 300);\n                                if (data.code === 200) {\n                                    if (!data.data.activityPlans.length) {\n                                        return;\n                                    }\n                                    self.moreData = self.moreData.concat(data.data.plans);\n                                    laz.lazyload();\n                                } else {\n                                    UI.alertSecond(data.message);\n                                }\n                            }\n                        });\n                    }\n                })\n            }\n            if ($('#plansList1').children('.events-item').length > 0) {\n                $('#plansList1').dropload({\n                    scrollArea: window,\n                    domDown: {\n                        domClass: 'dropload-down',\n                        domRefresh: '<div class=\"dropload-refresh\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                        domUpdate: '<div class=\"dropload-update\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                        domLoad: '<div class=\"dropload-load\"><img src=\"' + wapcsspath + '/images/common/loading.gif\" alt=\"\"/></div>'\n                    },\n                    loadDownFn: function loadDownFn(me) {\n                        self.clientTime = self.getClientTime()\n                        Ajax.query({\n                            url: \"/api/cashback/plans?dynamic=\" + self.showContent + \"&planStatus=ALL&clientTime=\" + self.clientTime + \"&pageNum=\" + pageNum1++ + \"&pageSize=10\",\n                            success: function success(data) {\n                                setTimeout(function() {\n                                    me.resetload();\n                                }, 300);\n                                if (data.code === 200) {\n                                    if (!data.data.activityPlans.length) {\n                                        return;\n                                    }\n                                    self.moreData = self.moreData.concat(data.data.plans);\n                                    laz.lazyload();\n                                } else {\n                                    UI.alertSecond(data.message);\n                                }\n                            }\n                        });\n                    }\n                })\n            }\n            if ($('#friendsList').children('.invited-items').length > 0) {\n                $('#friendsList').dropload({\n                    scrollArea: window,\n                    domDown: {\n                        domClass: 'dropload-down',\n                        domRefresh: '<div class=\"dropload-refresh\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                        domUpdate: '<div class=\"dropload-update\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                        domLoad: '<div class=\"dropload-load\"><img src=\"' + wapcsspath + '/images/common/loading.gif\" alt=\"\"/></div>'\n                    },\n                    loadDownFn: function loadDownFn(me) {\n                        self.clientTime = self.getClientTime()\n                        Ajax.query({\n                            url: \"/api/ext/cashback/details?status=CASHBACK&type=INVITATIONFRIEND&pageNum=\" + pageNum2++ + \"&pageSize=10\",\n                            success: function success(data) {\n                                setTimeout(function() {\n                                    me.resetload();\n                                }, 300);\n                                if (data.code === 200) {\n                                    if (!data.data.invitationFriendOrders.length) {\n                                        return;\n                                    }\n                                    self.moreData = self.moreData.concat(data.data.invitationFriendOrders);\n                                    laz.lazyload();\n                                } else {\n                                    UI.alertSecond(data.message);\n                                }\n                            }\n                        });\n                    }\n                })\n            }\n        },\n        ready: function() {\n            var type = this.getParams(window.location.href)\n            if (type) {\n                this.showContent = type\n                if (this.showContent !== 'MYEVENTS' && this.showContent !== 'NOW') {\n                    this.getData()\n                } else if (this.showContent === 'MYEVENTS') {\n                    if (window.userinfo) {\n                        // this.isShowConent = true\n                        this.getMyeventsData()\n                    }\n                    else {\n                        this.isShowConent = true\n                    }\n                    \n                }\n            }\n            if (window.userinfo) {\n                this.hasLogin = true\n                this.userData = window.userinfo\n            }\n        },\n        methods: {\n            toggleCon: function(opt) {\n                this.isShowConent = false\n                window.location.hash = opt\n                this.showContent = opt\n                pageNum1 = 2\n                pageNum = 2\n                if (this.showContent !== 'NOW' && this.showContent !== 'MYEVENTS') {\n                    this.getData()\n                } else if (this.showContent === 'MYEVENTS') {\n                    this.getMyeventsData()\n                }\n            },\n            showReward: function(eventObj) {\n                var self = this\n                this.rewardData.name = eventObj.name\n                this.rewardData.description = eventObj.description\n                    // 根据点击的活动ID获取获奖详情\n                Ajax.query({\n                    url: '/api/ext/cashback/details?status=CASHBACK&type=INVITATIONFRIEND&pageNum=1&pageSize=10',\n                    success: function(data) {\n                        if (data.code === 200) {\n                            self.rewardData.friends = data.data\n                            $('#modal').removeClass('hidden')\n                        } else {\n                            UI.alertSecond(data.message)\n                        }\n                    }\n                })\n                $('#modal').removeClass('hidden')\n            },\n            closeModal: function() {\n                $('#modal').addClass('hidden')\n                pageNum2 = 2\n            },\n            // 获取comming或者ended的数据\n            getData: function() {\n                var self = this\n                var clientTime = self.getClientTime()\n                self.resultData.splice(0)\n                Ajax.query({\n                    url: '/api/cashback/plans?planStatus=ALL&clientTime=' + clientTime + '&dynamic=' + this.showContent + '&pageNum=1&pageSize=10',\n                    success: function(data) {\n                        if (data.code === 200) {\n                            self.$set('resultData', data.data.activityPlans)\n                            self.isShowConent = true\n                        } else {\n                            UI.alertSecond(data.message)\n                        }\n                    }\n                })\n            },\n            // 获取myevents请求\n            getMyeventsData: function() {\n                var self = this\n                if (window.userinfo) {\n                    this.myeventData.splice(0)\n                    Ajax.query({\n                        url: '/api/cashback/myPlans?userId=' + window.userinfo.user.id,\n                        success: function(data) {\n                            if (data.code === 200) {\n                                self.$set('myeventData', data.data.activityPlans)\n                                self.isShowConent = true\n                                setTimeout(function() {\n                                    new Swiper('.myevents-conainer', {\n                                        lazyLoading: true, //解决轮播到最后再划显示默认图\n                                        pagination: '.swiper-pagination'\n                                    });\n                                }, 1000);\n                            } else {\n                                UI.alertSecond(data.message)\n                            }\n                        }\n                    })\n                } else {\n                    self.login()\n                }\n            },\n            getParams: function(url) {\n                if (url.indexOf('#') > 0) {\n                    return url.substr(url.indexOf('#') + 1)\n                } else {\n                    return null\n                }\n            },\n            getClientTime: function() {\n                var date = new Date(),\n                    year = date.getFullYear(),\n                    month = this.filterNum(date.getMonth() + 1),\n                    day = this.filterNum(date.getDate()),\n                    hours = this.filterNum(date.getHours()),\n                    minutes = this.filterNum(date.getMinutes()),\n                    seconds = this.filterNum(date.getSeconds());\n                return year + month + day + hours + minutes + seconds\n            },\n            filterNum: function(num) {\n                return num >= 10 ? num : ('0' + num)\n            },\n            login: function() {\n                var self = this\n                Login.login(location.href, \"\");\n                setTimeout(function () {\n                    self.isShowConent = true\n                }, 1000)\n            }\n        }\n    });\n})\n"]}