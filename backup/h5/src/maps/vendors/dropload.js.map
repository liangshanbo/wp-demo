{"version":3,"sources":["vendors/dropload.js"],"names":["define","require","exports","module","$","$win","window","$doc","document","fn","dropload","options","MyDropLoad","element","me","$element","insertDOM","loading","isLock","init","prototype","opts","extend","scrollArea","domUp","domClass","domRefresh","domUpdate","domLoad","domDown","distance","loadUpFn","loadDownFn","$scrollArea","on","e","fnTouches","fnTouchstart","fnTouchmove","fnTouchend","touches","originalEvent","_startY","pageY","_meHeight","height","_childrenHeight","overflow","parent","css","_scrollTop","scrollTop","_curY","_moveY","direction","_absMoveY","Math","abs","preventDefault","prepend","$domUp","fnTransition","_offsetY","html","append","$domDown","$domResult","children","fnCallback","remove","lock","unlock","resetload","dom","num"],"mappings":"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","file":"../../js_es6/vendors/dropload.js","sourcesContent":["'use strict';\n\ndefine('vendors/dropload', function (require, exports, module) {\n    var $ = require('vendors/zepto');\n    (function ($) {\n        'use strict';\n\n        var $win = $(window);\n        var $doc = $(document);\n        $.fn.dropload = function (options) {\n            return new MyDropLoad(this, options);\n        };\n        var MyDropLoad = function MyDropLoad(element, options) {\n            var me = this;\n            me.$element = $(element);\n            me.insertDOM = false;\n            me.loading = false;\n            me.isLock = false;\n            me.init(options);\n        };\n\n        // 初始化\n        MyDropLoad.prototype.init = function (options) {\n            var me = this;\n            me.opts = $.extend({}, {\n                scrollArea: me.$element, // 滑动区域\n                domUp: { // 上方DOM\n                    domClass: 'dropload-up',\n                    domRefresh: '<div class=\"dropload-refresh\"><span class=\"loading\"></span>↓下拉刷新</div>',\n                    domUpdate: '<div class=\"dropload-update\"><span class=\"loading\"></span>↑释放更新</div>',\n                    domLoad: '<div class=\"dropload-load\"><span class=\"loading\"></span>加载中...</div>'\n                },\n                domDown: { // 下方DOM\n                    domClass: 'dropload-down',\n                    domRefresh: '<div class=\"dropload-refresh\">↑上拉加载更多</div>',\n                    domUpdate: '<div class=\"dropload-update\">↓释放加载</div>',\n                    domLoad: '<div class=\"dropload-load\"><span class=\"loading\"></span>加载中...</div>'\n                },\n                distance: 50, // 拉动距离\n                loadUpFn: '', // 上方function\n                loadDownFn: '' // 下方function\n            }, options);\n\n            // 判断滚动区域\n            if (me.opts.scrollArea == window) {\n                me.$scrollArea = $win;\n            } else {\n                me.$scrollArea = me.opts.scrollArea;\n            }\n\n            // 绑定触摸\n            me.$element.on('touchstart', function (e) {\n                if (!me.loading && !me.isLock) {\n                    fnTouches(e);\n                    fnTouchstart(e, me);\n                }\n            });\n            me.$element.on('touchmove', function (e) {\n                if (!me.loading && !me.isLock) {\n                    fnTouches(e, me);\n                    fnTouchmove(e, me);\n                }\n            });\n            me.$element.on('touchend', function () {\n                if (!me.loading && !me.isLock) {\n                    fnTouchend(me);\n                }\n            });\n        };\n\n        // touches\n        function fnTouches(e) {\n            if (!e.touches) {\n                e.touches = e.originalEvent.touches;\n            }\n        }\n\n        // touchstart\n        function fnTouchstart(e, me) {\n            me._startY = e.touches[0].pageY;\n            // 判断滚动区域\n            if (me.opts.scrollArea == window) {\n                me._meHeight = $win.height();\n                me._childrenHeight = $doc.height();\n            } else {\n                /*me._meHeight = me.$element.height();\n                me._childrenHeight = me.$element.children().height();*/\n                me._meHeight = $(window).height();\n                me._childrenHeight = me.$element.height();\n            }\n            var overflow = me.$scrollArea.parent().css('overflow');\n            if (overflow && (overflow == 'scroll' || overflow == 'auto')) me._scrollTop = me.$scrollArea.scrollTop();else me._scrollTop = $(window).scrollTop();\n        }\n\n        // touchmove\n        function fnTouchmove(e, me) {\n            me._curY = e.touches[0].pageY;\n            me._moveY = me._curY - me._startY;\n\n            if (me._moveY > 0) {\n                me.direction = 'down';\n            } else if (me._moveY < 0) {\n                me.direction = 'up';\n            }\n\n            var _absMoveY = Math.abs(me._moveY);\n\n            // 加载上方\n            if (me.opts.loadUpFn != '' && me._scrollTop <= 0 && me.direction == 'down') {\n                e.preventDefault();\n                if (!me.insertDOM) {\n                    me.$element.prepend('<div class=\"' + me.opts.domUp.domClass + '\"></div>');\n                    me.insertDOM = true;\n                }\n\n                me.$domUp = $('.' + me.opts.domUp.domClass);\n                fnTransition(me.$domUp, 0);\n\n                // 下拉\n                if (_absMoveY <= me.opts.distance) {\n                    me._offsetY = _absMoveY;\n                    // 待解决：move时会不断清空、增加dom，有可能影响性能，下同\n                    me.$domUp.html('').append(me.opts.domUp.domRefresh);\n                    // 指定距离 < 下拉距离 < 指定距离*2\n                } else if (_absMoveY > me.opts.distance && _absMoveY <= me.opts.distance * 2) {\n                    me._offsetY = me.opts.distance + (_absMoveY - me.opts.distance) * 0.5;\n                    me.$domUp.html('').append(me.opts.domUp.domUpdate);\n                    // 下拉距离 > 指定距离*2\n                } else {\n                    me._offsetY = me.opts.distance + me.opts.distance * 0.5 + (_absMoveY - me.opts.distance * 2) * 0.2;\n                }\n\n                me.$domUp.css({ 'height': me._offsetY });\n            }\n\n            // 加载下方\n            if (me.opts.loadDownFn != '' && me._childrenHeight <= me._meHeight + me._scrollTop && me.direction == 'up') {\n                e.preventDefault();\n                if (!me.insertDOM) {\n                    me.$element.append('<div class=\"' + me.opts.domDown.domClass + '\"></div>');\n                    me.insertDOM = true;\n                }\n\n                me.$domDown = $('.' + me.opts.domDown.domClass);\n                fnTransition(me.$domDown, 0);\n\n                // 上拉\n                if (_absMoveY <= me.opts.distance) {\n                    me._offsetY = _absMoveY;\n                    me.$domDown.html('').append(me.opts.domDown.domRefresh);\n                    // 指定距离 < 上拉距离 < 指定距离*2\n                } else if (_absMoveY > me.opts.distance && _absMoveY <= me.opts.distance * 2) {\n                    me._offsetY = me.opts.distance + (_absMoveY - me.opts.distance) * 0.5;\n                    me.$domDown.html('').append(me.opts.domDown.domUpdate);\n                    // 上拉距离 > 指定距离*2\n                } else {\n                    me._offsetY = me.opts.distance + me.opts.distance * 0.5 + (_absMoveY - me.opts.distance * 2) * 0.2;\n                }\n\n                me.$domDown.css({ 'height': me._offsetY });\n                me.$scrollArea.scrollTop(me._offsetY + me._scrollTop);\n            }\n        }\n\n        // touchend\n        function fnTouchend(me) {\n            var _absMoveY = Math.abs(me._moveY);\n            if (me.insertDOM) {\n                if (me.direction == 'down') {\n                    me.$domResult = me.$domUp;\n                    me.domLoad = me.opts.domUp.domLoad;\n                } else if (me.direction == 'up') {\n                    me.$domResult = me.$domDown;\n                    me.domLoad = me.opts.domDown.domLoad;\n                }\n\n                fnTransition(me.$domResult, 300);\n\n                if (_absMoveY > me.opts.distance) {\n                    me.$domResult.css({ 'height': me.$domResult.children().height() });\n                    me.$domResult.html('').append(me.domLoad);\n                    fnCallback(me);\n                } else {\n                    me.$domResult.css({ 'height': '0' }).on('webkitTransitionEnd', function () {\n                        me.insertDOM = false;\n                        $(this).remove();\n                    });\n                }\n                me._moveY = 0;\n            }\n        }\n\n        // 回调\n        function fnCallback(me) {\n            me.loading = true;\n            if (me.opts.loadUpFn != '' && me.direction == 'down') {\n                me.opts.loadUpFn(me);\n            } else if (me.opts.loadDownFn != '' && me.direction == 'up') {\n                me.opts.loadDownFn(me);\n            }\n        }\n\n        // 锁定\n        MyDropLoad.prototype.lock = function () {\n            var me = this;\n            me.isLock = true;\n        };\n\n        // 解锁\n        MyDropLoad.prototype.unlock = function () {\n            var me = this;\n            me.isLock = false;\n        };\n\n        // 重置\n        MyDropLoad.prototype.resetload = function () {\n            var me = this;\n            if (!!me.$domResult) {\n                me.$domResult.css({ 'height': '0' }).on('webkitTransitionEnd', function () {\n                    me.loading = false;\n                    me.insertDOM = false;\n                    $(this).remove();\n                });\n            }\n        };\n\n        // css过渡\n        function fnTransition(dom, num) {\n            dom.css({\n                '-webkit-transition': 'all ' + num + 'ms',\n                'transition': 'all ' + num + 'ms'\n            });\n        }\n    })($);\n    module.exports = $;\n});\n//# sourceMappingURL=../../maps/vendors/dropload.js.map\n"]}