{"version":3,"sources":["conf/search/index.js"],"names":["define","require","exports","module","$","ajax","slayer","Vue","UI","BP","laz","cookie","dropload","init","dom","pdPos","pType","component","props","items","type","Array","default","template","sVue","el","data","keyword","input","listData","num","nav_type","sort_type","sort_criteria","filter_id","no_result","scrollTop","computed","self","scrollArea","window","domDown","domClass","domRefresh","wapcsspath","domUpdate","domLoad","loadDownFn","me","str","length","substr","query","url","success","setTimeout","resetload","code","alertSecond","concat","lazyload","message","lock","methods","click_input_focus","show_text_del","scTop","hide","show","find","focus","click_nav","click_close_filter","click_sort","sort","getItem","click_filter","id","target","currentTarget","addClass","siblings","removeClass","i","len","item","ext","imgbed","mainImage","name","sellingPrice","alternative","Math","round","amount","originPrice","discountPercentage","expectedCashBack","source","buy","outerUrl","trim","html","$watch","newVal","unlock","search","test","third","getCookie","userId","encodeURIComponent","size","res","match","isArray","getParams","obj","location","arr","split","l"],"mappings":"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","file":"../../../js_es6/conf/search/index.js","sourcesContent":["/**\n * 搜索\n * @author 黄奕海\n * @date 20170222\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/search/index.js\">\n </script>\n */\ndefine('conf/search/index.js', function (require, exports, module) {\n    const $ = require('$'),\n        ajax = require('utils/async/ajax.js'),\n        slayer = require('mods/search/layer.js'),\n        Vue = require(\"vue\"),\n        UI = require('UI/dialog/alert.js'),\n        BP =  require('mods/buried_point.js'),\n        laz = require('utils/async/lazyload.js'),\n        cookie = require('mods/storage/cookie.js');\n    let dropload;\n    require('mods/filters/com');\n    require('vendors/dropload.js');\n    //laz.init();\n    BP.init({\n        dom:'#sList',\n        pdPos:\"\",\n        pType:\"3\"\n    });//商品list曝光\n    Vue.component(\"listmore\", {\n        props: {\n            items: {\n                type: Array,\n                default: function () {\n                    return []\n                }\n            }\n        },\n        template: \"#searchList\"\n    });\n    const sVue = new Vue({\n        el: '#s_result',\n        data: {\n            keyword: keyword,\n            input: $('#s_layer_input'),\n            listData: [],\n            num: 2,\n            nav_type: 0,\n            sort_type: \"\",\n            sort_criteria:0,\n            filter_id: \"\",\n            no_result: 0,  //0  有结果 1 筛选无结果\n            scrollTop: 0\n        },\n        computed: {\n            /*sortCriteria: function () {\n                return this.sort_type === \"\" ? 0 : 1;\n            }*/\n        },\n        init: function () {\n            let self = this;\n            dropload = $(\"#s_result\").dropload({\n                scrollArea: window,\n                domDown: {\n                    domClass: 'dropload-down',\n                    domRefresh: '<div class=\"dropload-refresh\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                    domUpdate: '<div class=\"dropload-update\"><img src=\"' + wapcsspath + '/images/common/loading.png\" alt=\"\"/></div>',\n                    domLoad: '<div class=\"dropload-load\"><img src=\"' + wapcsspath + '/images/common/loading.gif\" alt=\"\"/></div>'\n                },\n                loadDownFn: function (me) {\n                    let str = \"\";\n                    if (self.filter_id !== \"\") {\n                        str = \"&categoryId=\" + self.filter_id + \"\";\n                    }\n                    if (self.sort_type !== \"\") {\n                        str += \"&sort=\" + self.sort_type;\n                    }\n                    let keyword = self.keyword.length>200?self.keyword.substr(0,200):self.keyword;\n                    ajax.query({\n                        url: \"/api/ext/item/searchItems?keyword=\" + keyword + \"&pageNum=\" + (self.num++) + \"&sortCriteria=\" + self.sort_criteria + str+\"&pageSize=10\",\n                        success: function (data) {\n                            setTimeout(function () {\n                                me.resetload();\n                            }, 300);\n                            if (data.code === 200) {\n                                if (!data.data.items.length) {\n                                    UI.alertSecond(\"Data is loaded\");\n                                    return;\n                                }\n                                self.listData = self.listData.concat(data.data.items);\n                                laz.lazyload();\n                            } else {\n                                UI.alertSecond(data.message);\n                            }\n                        }\n                    });\n                }\n            });\n            if ($('#null').length > 0) {\n                dropload.lock();\n            }\n        },\n        methods: {\n            click_input_focus: function () {\n                slayer.keyword = this.keyword;\n                slayer.show_text_del = 1;\n                slayer.scTop = $('body').scrollTop();\n                $(\"#s_result\").hide();\n                $('#s_layer').show().find(\"input\").focus();\n                this.nav_type = 0;\n            },\n            click_nav: function (type) {\n                if(this.nav_type === type){\n                    this.click_close_filter();\n                    return ;\n                }\n                this.nav_type = type;\n                this.scrollTop = $('body').scrollTop();\n            },\n            click_sort: function (sort,type) {\n                if(type!==\"\"){\n                    if(this.sort_criteria === sort && this.sort_type === type){\n                        this.click_close_filter();\n                        return ;\n                    }\n                }else{\n                    if(this.sort_criteria === sort){\n                        this.click_close_filter();\n                        return ;\n                    }\n                }\n                this.sort_type = type;\n                this.sort_criteria = sort;\n                this.getItem();\n                this.click_close_filter();\n            },\n            click_filter: function (id, target) {\n                let dom = $(target.currentTarget);\n                this.filter_id = id;\n                dom.addClass(\"active\").siblings().removeClass(\"active\");\n                this.getItem(id);\n                this.click_close_filter();\n            },\n            getItem: function (id) {\n                let sort = this.sort_type,\n                    str = \"\",\n                    self = this;\n                if (self.filter_id) {\n                    str = \"&categoryId=\" + self.filter_id + \"\";\n                }\n                if (self.sort_type !== \"\") {\n                    str += \"&sort=\" + self.sort_type;\n                }\n                let keyword = self.keyword.length>200?self.keyword.substr(1,200):self.keyword;\n                ajax.query({\n                    url: \"/api/ext/item/searchItems?keyword=\" + keyword + \"&pageNum=1&sortCriteria=\" + self.sort_criteria + str+\"&pageSize=10\",\n                    success: function (data) {\n                        if (data.code === 200) {\n                            let str = \"\";\n                            if (data.data && data.data.items && data.data.items.length > 0) {\n                                let items = data.data.items;\n                                for (let i = 0, len = items.length; i < len; i++) {\n                                    var item = items[i].item;\n                                    str += `<li class=\"goods-item\" point-data=\"{ext:'${items[i].ext}',type:'${items[i].type}',id:'${items[i].id}'}\">\n                                       <a href=\"/pro/detail?id=${item.id}&pdtype=6\">\n                                           <span class=\"goods-item-pic\">\n                                                <img gome-src=\"${imgbed(item.mainImage,'180')}\" src=\"${wapcsspath}/images/default_product.png\" alt=\"<%= item.name %>\">\n                                           </span>\n                                           <div class=\"goods-item-cont\">\n                                                <h4 class=\"goods-item-title\">${item.name}</h4>\n                                               <p class=\"goods-item-money\">`;\n                                    if (item.sellingPrice) {\n                                        str += `<strong class=\"current-money\">${item.sellingPrice.alternative}. ${Math.round(item.sellingPrice.amount / 100)}</strong>`\n                                    }\n                                    if (item.originPrice && item.originPrice.amount !== item.sellingPrice.amount) {\n                                        str += `<del class=\"before-money\">${item.originPrice.alternative}. ${Math.round(item.originPrice.amount / 100)}</del>`\n                                    }\n                                    if(item.discountPercentage>0){\n                                        str += `<span class=\"save-money\">${item.discountPercentage}% Off</span></p>`;\n                                    }\n                                    if (item.expectedCashBack.amount > 100) {\n                                        str += `<div class=\"rebate\">\n                                                <em class=\"icon-tag\"></em>\n                                                <p class=\"rebate-para\">Upto ${item.expectedCashBack.alternative}. ${Math.round(item.expectedCashBack.amount / 100)} Cashback</p>\n                                            </div>`\n                                    }\n                                    if(item.source.url){\n                                        str += `<div class=\"from\">\n                                                <img gome-src=\"${item.source.url}\" src=\"${wapcsspath}/images/common/default-prolist.png\" alt=\"${item.source.name}\" >\n                                            </div>`\n                                    }\n                                    str += `<a class=\"btn-buy\" href=\"${buy(item.outerUrl)}\"></a>\n                                            </div>\n                                        </a>\n                                    </li>`.trim();\n                                }\n                            } else {\n                                str = `<div class='null'><img src='${wapcsspath}/images/search/no_result.png' alt=''/><p>Sorry, no results</p><p class='col9'>Please change the filter conditions</p></div>`\n                                $('#s_sort').hide();\n                            }\n                            $('#good-list').html(str);\n                            self.num = 2;\n                            self.listData = [];\n                            $(\"body\").scrollTop(0);\n                            laz.lazyload();\n                            BP.init({\n                                dom:'#sList',\n                                pdPos:\"\",\n                                pType:\"3\",\n                                num:0\n                            });//商品list曝光\n                        } else {\n                            UI.alertSecond(data.message);\n                        }\n                    }\n                });\n            },\n            click_close_filter: function () {\n                this.nav_type = 0;\n                setTimeout(()=> {\n                    $('body').scrollTop(this.scrollTop);\n                }, 50)\n            }\n        }\n    });\n    sVue.$watch('nav_type', function (newVal) {\n        if (newVal === 0) {\n            $('body,html').removeClass('over');\n            dropload.unlock();\n        } else {\n            $('body,html').addClass('over');\n            dropload.lock();\n        }\n\n    });\n    function buy(outerUrl,name) {\n        var search = /\\?/.test(outerUrl),\n            third = cookie.getCookie('third_layer');//arr[0] userId  arr[1] cookie\n        if (userId != \"0\") {\n            if (third === \"\") {\n                return \"/pro/third?name=\" + name + \"&loc=\" + encodeURIComponent(outerUrl + (search ? \"&\" : \"?\") + \"affExtParam1=\" + userId);\n            } else {\n                return outerUrl + (search ? \"&\" : \"?\") + \"affExtParam1=\" + userId;\n            }\n        }\n        return \"/login?redirect=\" + encodeURIComponent(\"/pro/third?name=\" + name + \"&loc=\" + outerUrl + (search ? \"&\" : \"?\")) + \"&type=buy\";\n    }\n    function imgbed(url,size){\n        if(typeof url === 'string' && (/\\.(jpg|png|gif)$/i).test(url)){\n            var res = url.match(/(.*)(\\.(jpg|png|gif))/);\n            return res && Array.isArray(res) ? (res[0] + (size ? ('.' +  size) : '') + res[2]) : url;\n        }else{\n            return url;\n        }\n    }\n    function getParams(url) { //获取url传递的参数*/\n        let obj = {};\n        url = url || location.search;\n        url = /^\\?.*/i.test(url) ? url.substr(1) : url;\n        let arr = url.split(\"&\");\n        for (let i = 0, l = arr.length; i < l; i++) {\n            let res = arr[i].split(\"=\");\n            obj[res[0]] = res[1]\n        }\n        return obj;\n    }\n});\n"]}