{"version":3,"sources":["conf/account/_common.js"],"names":["define","require","exports","module","Vue","$","storage","scrollIntoTargetSelector","selector","cb","bodyPaddingTop","parseInt","css","targetEleScrollTop","document","querySelector","offsetTop","targetBodyScrollTop","tId","setInterval","currentBodyScrollTop","body","scrollTop","diff","Math","ceil","clearInterval","showTutorial","tutorialText","closeCb","tarEle","Error","left","offsetLeft","top","width","offsetWidth","height","offsetHeight","wdWidth","clientWidth","wdHeight","clientHeight","corners","ltCoord","rtCoord","lbCoord","rbCoord","$body","$tutorialMask","map","item","find","text","on","hide","removeClass","show","addClass","setFilters","filter","price","size","isNaN","round","toFixed","time","separator","date","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","dateStr"],"mappings":"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","file":"../../../js_es6/conf/account/_common.js","sourcesContent":["/**\n * 礼品卡h5和app公用方法\n * @author 张恩铭\n * @date 20170503\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/account/_common.js\">\n </script>\n */\n\ndefine('conf/account/_common.js', function(require, exports, module) {\n\n    const Vue = require('vue');\n    const $ = require('$');\n    const storage = require('mods/storage/storage');\n\n    /*\n    动画滚动页面至目标元素位置\n    @param selector {string} 目标元素选择器\n    @param cb {function?} 滚动完成的回调\n    */\n    function scrollIntoTargetSelector(selector, cb) {\n        let bodyPaddingTop = parseInt($('body').css('padding-top'));\n        let targetEleScrollTop = document.querySelector(selector).offsetTop;\n        let targetBodyScrollTop = targetEleScrollTop - bodyPaddingTop;\n        let tId = setInterval(function() {\n            let currentBodyScrollTop = document.body.scrollTop;\n            let diff = targetBodyScrollTop - currentBodyScrollTop;\n            switch (true) {\n                case diff > 0:\n                    currentBodyScrollTop += Math.ceil(diff / 5);\n                    break;\n                case diff < 0:\n                    currentBodyScrollTop -= Math.ceil(diff / -5);\n                    break;\n                default:\n                    clearInterval(tId);\n                    if (typeof cb === 'function') {\n                        cb();\n                    }\n            }\n            document.body.scrollTop = currentBodyScrollTop;\n        }, 10);\n    };\n\n    /*\n    单次的使用说明\n    @param selector {string} 目标元素选择器\n    @param tutorialText {string?} 要展示的说明文字\n    @param closeCb {function?} 关闭说明的回调\n    */\n    function showTutorial(selector, tutorialText, closeCb) {\n        let tarEle = document.querySelector(selector);\n\n        if (tarEle === null) {\n            throw new Error('没有这个元素。');\n        }\n\n        let left = tarEle.offsetLeft,\n            top = tarEle.offsetTop,\n            width = tarEle.offsetWidth,\n            height = tarEle.offsetHeight;\n\n        let wdWidth = document.body.clientWidth,\n            wdHeight = document.body.clientHeight;\n\n        let corners = {\n            ltCoord: [0, 0, left, top + height],\n            rtCoord: [left, 0, wdWidth - left, top],\n            lbCoord: [0, top + height, left + width, wdHeight - top - height],\n            rbCoord: [left + width, top, wdWidth - left - width, wdHeight - top],\n        };\n\n        let $body = $('body');\n\n        let $tutorialMask = $(document.querySelector('.tutorial-mask'));\n\n        ['lt', 'rt', 'lb', 'rb'].map(function(item) {\n            $tutorialMask.find('.' + item).css({\n                left: corners[item + 'Coord'][0],\n                top: corners[item + 'Coord'][1],\n                width: corners[item + 'Coord'][2],\n                height: corners[item + 'Coord'][3]\n            });\n        });\n\n        $tutorialMask.find('.text').text(\n            typeof tutorialText === 'string'\n            ? tutorialText\n            : '老哥还没传使用说明的文字。'\n        );\n\n        $tutorialMask.on('click', '.close-btn', function() {\n            $tutorialMask.hide();\n            $body.removeClass('no-scroll');\n            if (typeof closeCb === 'function') {\n                closeCb();\n            }\n        })\n\n        $tutorialMask.show();\n        $body.addClass('no-scroll');\n    }\n\n    /*\n    注册全局过滤器\n    */\n    function setFilters() {\n        Vue.filter('money', function(price, size) {\n            if (isNaN(price)) {\n                return price;\n            }\n            return size ? Math.round(price/100).toFixed(size) : Math.round(price/100);\n        });\n        Vue.filter('time', function(time, separator) {\n            var date = time ? new Date(time) : new Date();\n            var year = date.getFullYear();\n            var month = (date.getMonth() + 1) > 9 ? (date.getMonth() + 1) : '0' + (date.getMonth() + 1);\n            var day = date.getDate() > 9 ? date.getDate() : '0' + date.getDate();\n            var hour = date.getHours() > 9 ? date.getHours() : '0' + date.getHours();\n            var minute = date.getMinutes() > 9 ? date.getMinutes() : '0' + date.getMinutes();\n            var second = date.getSeconds() > 9 ? date.getSeconds() : '0' + date.getSeconds();\n            var dateStr = '';\n            if (separator) {\n                dateStr += day + separator + month + separator + year;\n            } else {\n                dateStr += day + '/' + month + '/' + year;\n            }\n            return dateStr;\n        });\n    }\n\n    module.exports = {\n        scrollIntoTargetSelector,\n        setFilters,\n        showTutorial,\n    };\n\n});\n"]}