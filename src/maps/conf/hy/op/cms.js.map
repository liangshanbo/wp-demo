{"version":3,"sources":["conf/hy/op/cms.js"],"names":["define","require","exports","module","Lazyload","Swiper","UI","login","Share","userId","hasLogin","window","userinfo","user","id","carousel","pagination","autoplay","autoplayDisableOnInteraction","shareFB","title","desc","picture","wapcsspath","shareType","type","success","alertSecond","failed","$","on","console","log","layer_show","md4","data","module_4","str","eq","addClass","first","attr","i","peas","length","cont","customImage","name","sellingPrice","alternative","amount","originPrice","html","lazyload","for_h","parseInt","height","siblings","removeClass","item","empty","throttle","fn","wait","time","Date","now","move","tops","offset","top","scr_top","scrollTop","addEventListener"],"mappings":"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","file":"../../../../js_es6/conf/hy/op/cms.js","sourcesContent":["/**\n * @title: cmd模板\n * @time:  2017-05-2\n * @author: ZYZ\n */\n\ndefine(\"conf/hy/op/cms.js\", function(require, exports, module) {\n    require('$');\n    var Lazyload = require('utils/async/lazyload.js');\n    var Swiper = require('mods/swiper'),\n        UI = require('UI/dialog/alert.js'),\n        login = require('mods/login'),\n        Share = require('mods/share/shareDialog');\n    let userId = \"\",\n        hasLogin = false;\n    if (window.userinfo) {\n        userId = userinfo.user.id;\n        hasLogin = true;\n    }\n    window.userId = userId;\n    window.hasLogin = hasLogin;\n\n    //头部轮播\n    var carousel = new Swiper('.carousel', {\n        pagination: '.swiper-pagination',\n        autoplay: 2500,\n        autoplayDisableOnInteraction: false\n    });\n    let shareFB = new Share({\n         title: \"That's a good news\",\n        desc: \"Exclusive for you\",\n        picture: wapcsspath + \"/images/op/op.jpg\",\n        shareType: \"opShare\",\n        type: \"gif\",\n        success: function() {\n            UI.alertSecond(\"share success\");\n        },\n        failed: function() {\n            UI.alertSecond(\"share failed\");\n        }\n    });\n    //判断是否登录\n    $('#share').on('click', function() {\n        if (userinfo) {\n            console.log('已登录');\n            shareFB.layer_show();\n        } else {\n            console.log('没有登录');\n            login.login();\n        }\n    });\n    //data\n    var md4 = data.data.module_4;\n    //console.log(md4);\n    var str = '';\n    //先渲染一个内容\n    $('.tab-in li').eq(0).addClass('active');\n    var first = $('.tab-in li').eq(0).attr('data-name');\n    for (var i = 0; i < md4[first].peas.length; i++) {\n        var cont = md4[first].peas[i];\n        if(cont.id){\n        str += '<li class=\"mod-hot-it\"><a href=\"/pro/detail?id=' + cont.id + '&pdtype=2\" class=\"hot-pic\"><img gome-src=\"' + cont.customImage + '\" src=\"'+ wapcsspath +'/images/common/default-home.png\" alt=\"\"></a><h4 class=\"hot-title\">' + cont.name + '</h4><p class=\"hot-para\"><strong>'+cont.sellingPrice.alternative +'.'+cont.sellingPrice.amount/100 + '</strong><del>' + cont.originPrice.alternative + '.' + cont.originPrice.amount/100 + '</del></p><a href=\"/pro/detail?id=' + cont.id + '&pdtype=2\" class=\"hot-btn\">BUY</a></li>';\n        }\n    }\n    $('.foryou-cont #mod-hot-list').html(str);\n    Lazyload.lazyload();\n    //tab\n    var for_h = parseInt($('.foryou-cont').height());\n    $('.tab-in li').on('click', function() {\n        for_h = parseInt($('.foryou-cont').height());\n        $(this).addClass('active').siblings().removeClass('active');\n        var name = $(this).attr('data-name');\n        //console.log(md4[name]);\n        str = '';\n        for (var i = 0; i < md4[name].peas.length; i++) {\n            var item = md4[name].peas[i];\n            if(item.id){\n                str += '<li class=\"mod-hot-it\"><a href=\"/pro/detail?id=' + item.id + '&pdtype=2\" class=\"hot-pic\"><img gome-src=\"' + item.customImage + '\" src=\"'+ wapcsspath +'/images/common/default-home.png\" alt=\"\"></a><h4 class=\"hot-title\">' + item.name + '</h4><p class=\"hot-para\"><strong>' + item.sellingPrice.alternative + '.' + item.sellingPrice.amount/100+ '</strong><del>' + item.originPrice.alternative + '.' + item.originPrice.amount/100+ '</del></p><a href=\"/pro/detail?id=' + item.id + '&pdtype=2\" class=\"hot-btn\">BUY</a></li>';\n            }\n        }\n        //console.log(str);\n        $('#mod-hot-list').empty().html(str);\n        Lazyload.lazyload();\n    })\n\n    //console.log(for_h);\n    //scroll\n    function throttle(fn, wait) {\n        var time = Date.now();\n        return function() {\n            if ((time + wait - Date.now()) < 0) {\n                fn();\n                time = Date.now();\n            }\n        }\n    }\n    //var tops = parseInt($('.tab-box').offset().top);\n    function move() {\n        var tops = parseInt($('.tab-box').offset().top);\n        var scr_top = parseInt($(window).scrollTop());\n        for_h = parseInt($('.foryou-cont').height());\n        //console.log(tops);\n        if (scr_top >= tops && scr_top <= (tops + for_h)) {\n            $('.tab').addClass('fixed');\n            //console.log('haha')\n        } else {\n            $('.tab').removeClass('fixed');\n        }\n        //console.log(scr_top+top);\n    }\n    window.addEventListener('scroll', throttle(move, 60));\n})\n"]}