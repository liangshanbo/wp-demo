{"version":3,"sources":["utils/appCall.js"],"names":["define","require","exports","module","Mobile","callH5","params","url","location","hostname","indexOf","arr","key","push","encodeURIComponent","call","join","callApp","src","isAndroid","ua","navigator","userAgent","toLowerCase","href","appIframe","document","createElement","style","display","body","appendChild","window","setTimeout"],"mappings":";;AAAA;;;;;AAKAA,OAAO,eAAP,EAAwB,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AACvD;;;;;AAKAF,YAAQ,GAAR;AACA,QAAIG,SAASH,QAAQ,mBAAR,CAAb;AACA,QAAII,SAAS,SAATA,MAAS,CAACC,MAAD,EAAY;AACrB,YAAI,CAACA,MAAD,IAAW,CAACA,OAAO,KAAP,CAAhB,EAA+B;AAC3B;AACH;AACDA,iBAASA,UAAU,EAAnB;AACA,YAAIC,MAAMC,SAASC,QAAnB;AACA,YAAIF,IAAIG,OAAJ,CAAY,KAAZ,IAAqB,CAAzB,EAA4B;AACxBH,kBAAM,2BAAN;AACH,SAFD,MAEO,IAAIA,IAAIG,OAAJ,CAAY,KAAZ,IAAqB,CAAzB,EAA4B;AAC/BH,kBAAM,2BAAN;AACH,SAFM,MAEA;AACHA,kBAAM,wBAAN;AACH;AACDD,eAAO,KAAP,IAAgBC,MAAMD,OAAOC,GAA7B;AACA,YAAII,MAAM,EAAV;AACA,aAAK,IAAIC,GAAT,IAAgBN,MAAhB,EAAwB;AACpBK,gBAAIE,IAAJ,CAAYD,GAAZ,SAAmBE,mBAAmBR,OAAOM,GAAP,CAAnB,CAAnB;AACH;AACDG,aAAK,+CAA+CJ,IAAIK,IAAJ,CAAS,GAAT,CAApD;AACH,KAnBD;AAoBA,QAAIC,UAAU,SAAVA,OAAU,CAACX,MAAD,EAAY;AACtB,YAAI,CAACA,MAAD,IAAW,CAACA,OAAO,KAAP,CAAhB,EAA+B;AAC3B;AACH;AACDS,aAAK,2BAA2BT,OAAO,KAAP,CAAhC;AACH,KALD;;AAOA,QAAIS,OAAO,SAAPA,IAAO,CAACG,GAAD,EAAS;AAChB,YAAId,OAAOe,SAAX,EAAsB;AAClB,gBAAIC,KAAKC,UAAUC,SAAV,CAAoBC,WAApB,EAAT;AACA,gBAAIH,GAAGV,OAAH,CAAW,SAAX,IAAwB,CAA5B,EAA+B;AAAE;AAC7BF,yBAASgB,IAAT,GAAgBN,GAAhB;AACH,aAFD,MAEO;AACH,oBAAIO,YAAYC,SAASC,aAAT,CAAuB,QAAvB,CAAhB;AACAF,0BAAUG,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AACAJ,0BAAUP,GAAV,GAAgBA,GAAhB;AACAQ,yBAASI,IAAT,CAAcC,WAAd,CAA0BN,SAA1B;AACAO,uBAAOC,UAAP,CAAkB,YAAY;AAC1B;AACH,iBAFD,EAEG,IAFH;AAGH;AACJ,SAbD,MAaO;AACHzB,qBAASgB,IAAT,GAAgBN,GAAhB;AACH;AACJ,KAjBD;AAkBAf,WAAOD,OAAP,GAAiB,EAAEG,cAAF,EAAUY,gBAAV,EAAjB;AACH,CAtDD","file":"../../js_es6/utils/appCall.js","sourcesContent":["/**\n * [description] H5站 callApp\n * 2017-03-30\n * author: wangchunpeng    \n */\ndefine(\"utils/appCall\", function(require, exports, module) {\n    /**\n     * @title: H5站 callApp\n     * @param  {[type]}   params [description] 参数 {url: 打开webview的完整路径, title: 标题 [选填]}\n     * \n     */\n    require(\"$\");\n    let Mobile = require(\"mods/check/mobile\");\n    let callH5 = (params) => {\n        if (!params || !params[\"url\"]) {\n            return;\n        }\n        params = params || {};\n        let url = location.hostname;\n        if (url.indexOf(\"dev\") > 0) {\n            url = \"http://h5-dev.gomeplus.in\";\n        } else if (url.indexOf(\"pre\") > 0) {\n            url = \"http://h5-pre.gomeplus.in\";\n        } else {\n            url = \"https://h5.gomeplus.in\";\n        }\n        params[\"url\"] = url + params.url;\n        let arr = [];\n        for (var key in params) {\n            arr.push(`${key}=${encodeURIComponent(params[key])}`);\n        }\n        call(\"gomeplusos://os.mx.com/hybrid/webViewOpen?\" + arr.join(\"&\"));\n    }\n    let callApp = (params) => {\n        if (!params || !params[\"url\"]) {\n            return;\n        }\n        call(\"gomeplusos://os.mx.com\" + params[\"url\"]);\n    }\n\n    let call = (src) => {\n        if (Mobile.isAndroid) {\n            let ua = navigator.userAgent.toLowerCase();\n            if (ua.indexOf(\"samsung\") > 0) { //单独处理三星手机\n                location.href = src;\n            } else {\n                var appIframe = document.createElement('iframe');\n                appIframe.style.display = 'none';\n                appIframe.src = src;\n                document.body.appendChild(appIframe);\n                window.setTimeout(function () {\n                    //document.body.removeChild(appIframe);\n                }, 2000);\n            }\n        } else {\n            location.href = src;\n        }\n    }\n    module.exports = { callH5, callApp };\n});\n"]}