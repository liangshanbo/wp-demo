{"version":3,"sources":["mods/search/history.js"],"names":["define","require","exports","module","storage","getH","arr","getItem","length","reverse","setH","val","idx","$","inArray","splice","push","setItem","rmH","removeItem"],"mappings":";;AAAA;;;;;;AAMAA,OAAO,wBAAP,EAAiC,UAAUC,OAAV,EAAmBC,OAAnB,EAA4BC,MAA5B,EAAoC;AACjE,QAAMC,UAAUH,QAAQ,yBAAR,CAAhB;AACA,aAASI,IAAT,GAAgB;AACZ,YAAIC,MAAMF,QAAQG,OAAR,CAAgB,OAAhB,CAAV;AACA,YAAGD,OAAOA,IAAIE,MAAd,EAAqB;AACjB,mBAAOJ,QAAQG,OAAR,CAAgB,OAAhB,EAAyBE,OAAzB,EAAP;AACH;AACD,eAAO,EAAP;AACH;AACD,aAASC,IAAT,CAAcC,GAAd,EAAmB;AACf,YAAIL,MAAMF,QAAQG,OAAR,CAAgB,OAAhB,IAA2BH,QAAQG,OAAR,CAAgB,OAAhB,CAA3B,GAAsD,EAAhE;AAAA,YACIK,MAAMC,EAAEC,OAAF,CAAUH,GAAV,EAAeL,GAAf,CADV;AAEAM,eAAO,CAAP,GAAWN,IAAIS,MAAJ,CAAWH,GAAX,EAAgB,CAAhB,CAAX,GAAgC,EAAhC;AACA,YAAIN,IAAIE,MAAJ,IAAc,EAAlB,EAAsB;AAClBF,gBAAIS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACH;AACDT,YAAIU,IAAJ,CAASL,GAAT;AACAP,gBAAQa,OAAR,CAAgB,OAAhB,EAAyBX,GAAzB;AACH;AACD,aAASY,GAAT,GAAe;AACXd,gBAAQe,UAAR,CAAmB,OAAnB;AACH;;AAEDhB,WAAOD,OAAP,GAAiB,EAACG,UAAD,EAAMK,UAAN,EAAWQ,QAAX,EAAjB;AACH,CAxBD","file":"../../../js_es6/mods/search/history.js","sourcesContent":["/**\n * 搜索历史\n * @author 黄奕海\n * @date 20170222\n *\n */\ndefine('mods/search/history.js', function (require, exports, module) {\n    const storage = require('mods/storage/storage.js');\n    function getH() {\n        var arr = storage.getItem('s_his');\n        if(arr && arr.length){\n            return storage.getItem('s_his').reverse();\n        }\n        return [];\n    };\n    function setH(val) {\n        let arr = storage.getItem(\"s_his\") ? storage.getItem(\"s_his\") : [],\n            idx = $.inArray(val, arr);\n        idx >= 0 ? arr.splice(idx, 1) : \"\";\n        if (arr.length >= 10) {\n            arr.splice(0, 1)\n        }\n        arr.push(val);\n        storage.setItem('s_his', arr);\n    };\n    function rmH() {\n        storage.removeItem('s_his');\n    }\n\n    module.exports = {getH,setH,rmH};\n});\n"]}