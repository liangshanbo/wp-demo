<<<<<<< HEAD
{"version":3,"sources":["mods/share/shareDialog.js"],"names":["define","require","exports","module","$","UI","dialog_com","Vue","storage","ajax","dialogStr","$shareLayer","$dom","shareCopy","find","shareVue","init","options","el","data","beforeCreate","hide","created","_self","share_login","getItem","hasLogin","removeItem","fb_show","methods","layer_show","show","layer_hide","add_box","length","addElement","slotCancel","slotGo","on","removeBox","attr","remove","copy_btn","event","imgSrc","title","text","shareType","shareId","shareTarget","sendData","method","display","href","location","userId","hashtag","picture","description","quote","caption","fn_failed","alertSecond","fn_success","fb_upload","post","url","success","textStatus","request","code","alert","error","fb_share","accessToken","FB_userId","FB","ui","response","console","log","post_id","FB_postId","api","fields","time","Date","getTime","uploadData","privacy","value","type","i","link","getLoginStatus","status","login","authResponse","userID","scope"],"mappings":"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","file":"../../../../mods/share/shareDialog.js","sourcesContent":["/**\r\n * 分享弹层\r\n * @author lixuefeng\r\n * @date 20170306\r\n * 页面引用\r\n * \"疲疲瞎！我们走！\"\r\n *\tconst share = require('mods/share/shareDialog');\r\n *\tshare.init(object);\r\n *\tobject {\r\n\tmethod  \t\t分享类型\r\n\tdisplay\t\t\t分享模组类型\r\n\tmobile_iframe\ttrue：弹层分享/false:新页面分享 默认false;\r\n\thref\t\t\t链接\r\n\tpicture\t\t\t图片地址完整路径\r\n\ttitle \t\t\t标题\r\n\tdescription\t\t描述\r\n\tcaption \t\t来源\r\n\tquote \t\t\t引用\r\n\thashtag \t\t标签\r\n\tsuccess \t\t成功时回调\r\n\tfailed \t\t\t失败时回调 \r\n\r\n\tshareType \t\t分享类型//用于数据上报接口\r\n\tshareId \t\t分享商品ID//用于数据上报接口\r\n\tshareTarget \t分享方式//用于数据上报接口\r\n *\t} \r\n *\tshare.init().layer_show();  方法调用\r\n*/\r\ndefine('mods/share/shareDialog.js', function (require, exports, module) {\r\n\tconst $ = require('$'),\r\n\t    UI = require('UI/dialog/alert.js'),\r\n\t    dialog_com = require('UI/dialog/dialog_com.js'),\r\n\t    Vue = require(\"vue\"),\r\n\t    storage = require('mods/storage/storage'),\r\n\t    ajax = require('utils/async/ajax.js'),\r\n\t    dialogStr = \"<header class='slot_header'><div class='slot_header_content' id='slot_cancel'>Shared Successfully!<em>X</em></div></header><article class='slot_main'><div class='slot_main_texts'><p>Play the slot machine to win rupee!</p></div><div class='slot_main_confirm'><a href='' id='slot_go'>GO</a></div></article>\";\r\n\tconst $shareLayer = $('#share_layer'),\r\n\t    $dom = {\r\n\t\t\tshareCopy: $shareLayer.find('#share_copylink')\r\n\t\t};\r\n\tlet shareVue \r\n\tvar init = function (options){ \r\n\t\t\treturn new Vue({\r\n\t\t\tel: '#share_layer',\r\n\t\t\tdata: '',\r\n\t\t\tbeforeCreate: function beforeCreate() {\r\n\t\t\t\t$shareLayer.hide();\r\n\t\t\t},\r\n\t\t\tcreated:function (){\r\n\t\t\t\tlet _self = this;\r\n\t\t\t\tlet share_login = storage.getItem('share_login');\r\n\t\t\t\tif( hasLogin && share_login && share_login === 'true'){\r\n\t\t\t\t\tstorage.removeItem('share_login');\r\n\t\t\t\t\tthis.fb_show();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmethods: {\r\n\t\t\t\tlayer_show:function\t (){\r\n\t\t\t\t\t$shareLayer.show();\r\n\t\t\t\t},\r\n\t\t\t\tlayer_hide: function (){\r\n\t\t\t\t\t$shareLayer.hide();\r\n\t\t\t\t},\r\n\t\t\t\tadd_box:function (){\r\n\t\t\t\t\tlet _self = this;\r\n\t\t\t\t\tif($('#dialog_slot').length === 0){\r\n\t\t\t\t\t\tdialog_com.addElement(dialogStr,'slot','dialog_slot')\r\n\t\t\t\t\t\tlet slotCancel = $('#slot_cancel'),\r\n\t\t\t\t\t\t\tslotGo = $('#slot_go');\r\n\t\t\t\t\t\tslotCancel.on('click',_self.removeBox);\r\n\t\t\t\t\t\tslotGo.attr('href','/');\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tremoveBox:function (){\r\n\t\t\t\t\tif($('#dialog_slot').length>0){\r\n\t\t\t\t\t\tdialog_com.remove('#dialog_slot');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcopy_btn:function (event){\r\n\t\t\t\t\t//Paste\r\n\t\t\t\t\t//.............\r\n\t\t\t\t},\r\n\t\t\t\tfb_show: function (){\r\n\t\t\t\t\tlet _self = this;\r\n\t\t\t\t\tlet imgSrc = $('.detail-pic>img').attr('src'),\r\n\t\t\t\t\t\ttitle = $('.detail-title').text(),\r\n\t\t\t\t\t\tshareType = \"productInfoShare\",\r\n\t\t\t\t\t\tshareId = $(\".detail\").attr('data-id'),\r\n\t\t\t\t\t\tshareTarget = \"FACEBOOK\",\r\n\t\t\t\t\t\tsendData = {\r\n\t\t\t\t\t    \tmethod:'share',\r\n\t\t\t\t\t    \tdisplay:'touch',\r\n\t\t\t\t\t    \thref:location.href+'?uerId='+userId,\r\n\t\t\t\t\t    \thashtag:'TAGTAG',\r\n\t\t\t\t\t    \ttitle:title,\r\n\t\t\t\t\t    \tpicture:imgSrc,\r\n\t\t\t\t\t    \tdescription:' ',\r\n\t\t\t\t\t    \t// mobile_iframe: true,\r\n\t\t\t\t\t    \tquote:'quote',\r\n\t\t\t\t\t    \tcaption:'gomeplus.in'\r\n\t\t\t\t\t    },\r\n\t\t\t\t\t\tfn_failed = () => {\r\n\t\t\t\t\t\t\tUI.alertSecond('Failed');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfn_success = () => {\r\n\t\t\t\t\t\t\tlocation.href = \"http://m-pre.gomeplus.in/shareSuccess\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfb_upload = (data) => {\r\n\t\t\t\t\t\t\tajax.post({\r\n\t\t\t\t\t            url:'/api/user/shareAction',\r\n\t\t\t\t\t            data:data,\r\n\t\t\t\t\t            success:function(data, textStatus, request){\r\n\t\t\t\t\t                if(data.code == 200){\r\n\t\t\t\t\t                \talert(\"Report completed\");\r\n\t\t\t\t\t                \tfn_success();\r\n\t\t\t\t\t                }else{\r\n\t\t\t\t\t                \tUI.alertSecond('shareActionFailed');\r\n\t\t\t\t\t                }\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            error:function(){\r\n\t\t\t\t\t            \tUI.alertSecond('serverError');\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfb_share = (accessToken,FB_userId) => {\r\n\t\t\t\t\t\t\tFB.ui(sendData, function (response){\r\n\t\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\t\t$shareLayer.hide();\r\n\t\t\t\t\t\t\t\tstorage.removeItem('share_login');\r\n\t\t\t\t\t\t\t\tif (response && typeof response.post_id === \"string\") {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"读取分享信息\")\r\n\t\t\t\t\t\t\t\t\tlet FB_postId = response.post_id;\r\n\t\t\t\t\t\t\t\t\tFB.api(\r\n\t\t\t\t\t\t\t\t\t    FB_userId+\"_\"+FB_postId,\r\n\t\t\t\t\t\t\t\t\t    {fields:'is_hidden,to,targeting,privacy,created_time'},\r\n\t\t\t\t\t\t\t\t\t    function (response) {\r\n\t\t\t\t\t\t\t\t\t    \tlet time = new Date().getTime();\r\n\t\t\t\t\t\t\t\t\t    \tlet uploadData = {\r\n\t\t\t\t\t\t\t\t\t    \t\t\"shareType\":shareType,\r\n\t\t\t\t\t\t\t\t\t    \t\t\"data\":{\r\n\t\t\t\t\t\t\t\t\t    \t\t\t\"id\":shareId\r\n\t\t\t\t\t\t\t\t\t    \t\t},\r\n\t\t\t\t\t\t\t\t\t    \t\t\"target\":shareTarget,\r\n\t\t\t\t\t\t\t\t\t    \t\t\"shareTime\":time\r\n\t\t\t\t\t\t\t\t\t    \t};\r\n\t\t\t\t\t\t\t\t\t\t    if (response && !response.error) {\r\n\t\t\t\t\t\t\t\t\t\t    \tconsole.log(response);\r\n\t\t\t\t\t\t\t\t\t\t    \tif( response.privacy.value === \"SELF\" ){\r\n\t\t\t\t\t\t\t\t\t\t    \t\tfn_success();\r\n\t\t\t\t\t\t\t\t\t\t    \t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t    \tfb_upload(uploadData);\r\n\t\t\t\t\t\t\t\t\t\t    \t}\r\n\t\t\t\t\t\t\t\t\t\t    }else{\r\n\t\t\t\t\t\t\t\t\t\t    \tif( response.error.code === 100 && response.error.type === \"GraphMethodException\" ){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfb_upload(uploadData);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfn_failed();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tfn_failed();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\tfor (let i in options) {\r\n\t\t\t\t\t\tswitch (i){\r\n\t\t\t\t\t\t\tcase 'shareType':\r\n\t\t\t\t\t\t\t\tshareType = options[i];break;\r\n\t\t\t\t\t\t\tcase 'shareId':\r\n\t\t\t\t\t\t\t\tshareId = options[i];break;\r\n\t\t\t\t\t\t\tcase 'shareTarget':\r\n\t\t\t\t\t\t\t\tshareTarget = options[i];break;\r\n\t\t\t\t\t\t\tcase 'method':\r\n\t\t\t\t\t\t\t\tsendData.method = options[i];break;\r\n\t\t\t\t\t\t\tcase 'display':\r\n\t\t\t\t\t\t\t\tsendData.display = options[i];break;\r\n\t\t\t\t\t\t\tcase 'link':\r\n\t\t\t\t\t\t\t\tsendData.link = options[i];break;\r\n\t\t\t\t\t\t\tcase 'title':\r\n\t\t\t\t\t\t\t\tsendData.title = options[i];break;\r\n\t\t\t\t\t\t\tcase 'picture': \r\n\t\t\t\t\t\t\t\tsendData.picture = options[i];break;\r\n\t\t\t\t\t\t\tcase 'description':\r\n\t\t\t\t\t\t\t\tsendData.description = options[i];break;\r\n\t\t\t\t\t\t\tcase 'hashtag':\r\n\t\t\t\t\t\t\t\tsendData.hashtag = options[i];break;\r\n\t\t\t\t\t\t\tcase 'quote':\r\n\t\t\t\t\t\t\t\tsendData.quote = options[i];break;\r\n\t\t\t\t\t\t\tcase 'caption':\r\n\t\t\t\t\t\t\t\tsendData.caption = options[i];break;\r\n\t\t\t\t\t\t\tcase 'success':\r\n\t\t\t\t\t\t\t\tfn_success = options[i];break;\r\n\t\t\t\t\t\t\tcase 'failed':\r\n\t\t\t\t\t\t\t\tfn_failed = options[i];break;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tconsole.log('参数错误');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tFB.getLoginStatus(function (response){\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\tif( response.status === 'not_authorized' ){\r\n\t\t\t\t\t\t\tFB.login(function(response){\r\n\t\t\t\t\t\t\tlet accessToken = response.authResponse.accessToken,//response from login\r\n\t\t\t\t\t\t\t\tFB_userId = response.authResponse.userID;\r\n\t\t\t\t\t\t\t  fb_share(accessToken,FB_userId);\r\n\t\t\t\t\t\t\t},{scope:\"publish_actions,user_posts\"});\r\n\t\t\t\t\t\t}else if( response.status === 'connected' ){\r\n\t\t\t\t\t\t\tlet accessToken = response.authResponse.accessToken,//response from getLoginStatus\r\n\t\t\t\t\t\t\tFB_userId = response.authResponse.userID;\r\n\t\t\t\t\t\t\tfb_share(accessToken,FB_userId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tmodule.exports = {\r\n\t\tinit:init\r\n\t};\r\n});\r\n"]}
=======
{"version":3,"sources":["mods/share/shareDialog.js"],"names":["define","require","exports","module","$","UI","dialog_com","Vue","storage","ajax","dialogStr","$shareLayer","$dom","shareCopy","find","shareVue","init","options","el","data","beforeCreate","hide","created","_self","share_login","getItem","hasLogin","removeItem","fb_show","methods","layer_show","show","layer_hide","add_box","length","addElement","slotCancel","slotGo","on","removeBox","attr","remove","copy_btn","event","imgSrc","title","text","shareType","shareId","shareTarget","sendData","method","display","href","location","userId","hashtag","picture","description","quote","caption","fn_failed","alertSecond","fn_success","fb_upload","post","url","success","textStatus","request","code","alert","error","fb_share","accessToken","FB_userId","FB","ui","response","console","log","post_id","FB_postId","api","fields","privacy","value","time","Date","getTime","created_time","uploadData","i","link","getLoginStatus","status","login","authResponse","userID","scope"],"mappings":"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","file":"../../../../mods/share/shareDialog.js","sourcesContent":["/**\n * 分享弹层\n * @author lixuefeng\n * @date 20170306\n * 页面引用\n * \"疲疲瞎！我们走！\"\n *\tconst share = require('mods/share/shareDialog');\n *\tshare.init(object);\n *\tobject {\n\tmethod  \t\t分享类型\n\tdisplay\t\t\t分享模组类型\n\tmobile_iframe\ttrue：弹层分享/false:新页面分享 默认false;\n\thref\t\t\t链接\n\tpicture\t\t\t图片地址完整路径\n\ttitle \t\t\t标题\n\tdescription\t\t描述\n\tcaption \t\t来源\n\tquote \t\t\t引用\n\thashtag \t\t标签\n\tsuccess \t\t成功时回调\n\tfailed \t\t\t失败时回调 \n\n\tshareType \t\t分享类型//用于数据上报接口\n\tshareId \t\t分享商品ID//用于数据上报接口\n\tshareTarget \t分享方式//用于数据上报接口\n *\t} \n *\tshare.init().layer_show();  方法调用\n*/\ndefine('mods/share/shareDialog.js', function (require, exports, module) {\n\tconst $ = require('$'),\n\t    UI = require('UI/dialog/alert.js'),\n\t    dialog_com = require('UI/dialog/dialog_com.js'),\n\t    Vue = require(\"vue\"),\n\t    storage = require('mods/storage/storage'),\n\t    ajax = require('utils/async/ajax.js'),\n\t    dialogStr = \"<header class='slot_header'><div class='slot_header_content' id='slot_cancel'>Shared Successfully!<em>X</em></div></header><article class='slot_main'><div class='slot_main_texts'><p>Play the slot machine to win rupee!</p></div><div class='slot_main_confirm'><a href='' id='slot_go'>GO</a></div></article>\";\n\tconst $shareLayer = $('#share_layer'),\n\t    $dom = {\n\t\t\tshareCopy: $shareLayer.find('#share_copylink')\n\t\t};\n\tlet shareVue \n\tvar init = function (options){ \n\t\t\treturn new Vue({\n\t\t\tel: '#share_layer',\n\t\t\tdata: '',\n\t\t\tbeforeCreate: function beforeCreate() {\n\t\t\t\t$shareLayer.hide();\n\t\t\t},\n\t\t\tcreated:function (){\n\t\t\t\tlet _self = this;\n\t\t\t\tlet share_login = storage.getItem('share_login');\n\t\t\t\tif( hasLogin && share_login && share_login === 'true'){\n\t\t\t\t\tstorage.removeItem('share_login');\n\t\t\t\t\tthis.fb_show();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods: {\n\t\t\t\tlayer_show:function\t (){\n\t\t\t\t\t$shareLayer.show();\n\t\t\t\t},\n\t\t\t\tlayer_hide: function (){\n\t\t\t\t\t$shareLayer.hide();\n\t\t\t\t},\n\t\t\t\tadd_box:function (){\n\t\t\t\t\tlet _self = this;\n\t\t\t\t\tif($('#dialog_slot').length === 0){\n\t\t\t\t\t\tdialog_com.addElement(dialogStr,'slot','dialog_slot')\n\t\t\t\t\t\tlet slotCancel = $('#slot_cancel'),\n\t\t\t\t\t\t\tslotGo = $('#slot_go');\n\t\t\t\t\t\tslotCancel.on('click',_self.removeBox);\n\t\t\t\t\t\tslotGo.attr('href','/');\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tremoveBox:function (){\n\t\t\t\t\tif($('#dialog_slot').length>0){\n\t\t\t\t\t\tdialog_com.remove('#dialog_slot');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcopy_btn:function (event){\n\t\t\t\t\t//Paste\n\t\t\t\t\t//.............\n\t\t\t\t},\n\t\t\t\tfb_show: function (){\n\t\t\t\t\tlet _self = this;\n\t\t\t\t\tlet imgSrc = $('.detail-pic>img').attr('src'),\n\t\t\t\t\t\ttitle = $('.detail-title').text(),\n\t\t\t\t\t\tshareType = \"productInfoShare\",\n\t\t\t\t\t\tshareId = $(\".detail\").attr('data-id'),\n\t\t\t\t\t\tshareTarget = \"FACEBOOK\",\n\t\t\t\t\t\tsendData = {\n\t\t\t\t\t    \tmethod:'share',\n\t\t\t\t\t    \tdisplay:'touch',\n\t\t\t\t\t    \thref:location.href+'?uerId='+userId,\n\t\t\t\t\t    \thashtag:'TAGTAG',\n\t\t\t\t\t    \ttitle:title,\n\t\t\t\t\t    \tpicture:imgSrc,\n\t\t\t\t\t    \tdescription:' ',\n\t\t\t\t\t    \t// mobile_iframe: true,\n\t\t\t\t\t    \tquote:'quote',\n\t\t\t\t\t    \tcaption:'gomeplus.in'\n\t\t\t\t\t    },\n\t\t\t\t\t\tfn_failed = () => {\n\t\t\t\t\t\t\tUI.alertSecond('Failed');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfn_success = () => {\n\t\t\t\t\t\t\tlocation.href = \"http://m-pre.gomeplus.in/shareSuccess\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfb_upload = (data) => {\n\t\t\t\t\t\t\tajax.post({\n\t\t\t\t\t            url:'/api/user/shareAction',\n\t\t\t\t\t            data:data,\n\t\t\t\t\t            success:function(data, textStatus, request){\n\t\t\t\t\t                if(data.code == 200){\n\t\t\t\t\t                \talert(\"Report completed\");\n\t\t\t\t\t                \tfn_success();\n\t\t\t\t\t                }else{\n\t\t\t\t\t                \tUI.alertSecond('shareActionFailed');\n\t\t\t\t\t                }\n\t\t\t\t\t            },\n\t\t\t\t\t            error:function(){\n\t\t\t\t\t            \tUI.alertSecond('serverError');\n\t\t\t\t\t            }\n\t\t\t\t\t        });\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfb_share = (accessToken,FB_userId) => {\n\t\t\t\t\t\t\tFB.ui(sendData, function (response){\n\t\t\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t\t\t\t$shareLayer.hide();\n\t\t\t\t\t\t\t\tstorage.removeItem('share_login');\n\t\t\t\t\t\t\t\tif (response && typeof response.post_id === \"string\") {\n\t\t\t\t\t\t\t\t\tconsole.log(\"读取分享信息\")\n\t\t\t\t\t\t\t\t\tlet FB_postId = response.post_id;\n\t\t\t\t\t\t\t\t\tFB.api(\n\t\t\t\t\t\t\t\t\t    FB_userId+\"_\"+FB_postId,\n\t\t\t\t\t\t\t\t\t    {fields:'is_hidden,to,targeting,privacy,created_time'},\n\t\t\t\t\t\t\t\t\t    function (response) {\n\t\t\t\t\t\t\t\t\t\t    if (response && !response.error) {\n\t\t\t\t\t\t\t\t\t\t    \tconsole.log(response);\n\t\t\t\t\t\t\t\t\t\t    \tif( response.privacy.value === \"SELF\" ){\n\t\t\t\t\t\t\t\t\t\t    \t\tfn_success();\n\t\t\t\t\t\t\t\t\t\t    \t}else{\n\t\t\t\t\t\t\t\t\t\t    \t\tlet time = new Date().getTime(response.created_time);\n\t\t\t\t\t\t\t\t\t\t\t    \tlet uploadData = {\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\"shareType\":shareType,\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\"data\":{\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\"id\":shareId\n\t\t\t\t\t\t\t\t\t\t\t    \t\t},\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\"target\":shareTarget,\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\"shareTime\":time\n\t\t\t\t\t\t\t\t\t\t\t    \t};\n\t\t\t\t\t\t\t\t\t\t\t    \tfb_upload(uploadData);\n\t\t\t\t\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t\t\t\t\t    }else{\n\t\t\t\t\t\t\t\t\t\t    \tfn_failed();\n\t\t\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfn_failed();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\t\t\t\t\tfor (let i in options) {\n\t\t\t\t\t\tswitch (i){\n\t\t\t\t\t\t\tcase 'shareType':\n\t\t\t\t\t\t\t\tshareType = options[i];break;\n\t\t\t\t\t\t\tcase 'shareId':\n\t\t\t\t\t\t\t\tshareId = options[i];break;\n\t\t\t\t\t\t\tcase 'shareTarget':\n\t\t\t\t\t\t\t\tshareTarget = options[i];break;\n\t\t\t\t\t\t\tcase 'method':\n\t\t\t\t\t\t\t\tsendData.method = options[i];break;\n\t\t\t\t\t\t\tcase 'display':\n\t\t\t\t\t\t\t\tsendData.display = options[i];break;\n\t\t\t\t\t\t\tcase 'link':\n\t\t\t\t\t\t\t\tsendData.link = options[i];break;\n\t\t\t\t\t\t\tcase 'title':\n\t\t\t\t\t\t\t\tsendData.title = options[i];break;\n\t\t\t\t\t\t\tcase 'picture': \n\t\t\t\t\t\t\t\tsendData.picture = options[i];break;\n\t\t\t\t\t\t\tcase 'description':\n\t\t\t\t\t\t\t\tsendData.description = options[i];break;\n\t\t\t\t\t\t\tcase 'hashtag':\n\t\t\t\t\t\t\t\tsendData.hashtag = options[i];break;\n\t\t\t\t\t\t\tcase 'quote':\n\t\t\t\t\t\t\t\tsendData.quote = options[i];break;\n\t\t\t\t\t\t\tcase 'caption':\n\t\t\t\t\t\t\t\tsendData.caption = options[i];break;\n\t\t\t\t\t\t\tcase 'success':\n\t\t\t\t\t\t\t\tfn_success = options[i];break;\n\t\t\t\t\t\t\tcase 'failed':\n\t\t\t\t\t\t\t\tfn_failed = options[i];break;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tconsole.log('参数错误');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tFB.getLoginStatus(function (response){\n\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t\tif( response.status === 'not_authorized' ){\n\t\t\t\t\t\t\tFB.login(function(response){\n\t\t\t\t\t\t\tlet accessToken = response.authResponse.accessToken,//response from login\n\t\t\t\t\t\t\t\tFB_userId = response.authResponse.userID;\n\t\t\t\t\t\t\t  fb_share(accessToken,FB_userId);\n\t\t\t\t\t\t\t},{scope:\"publish_actions,user_posts\"});\n\t\t\t\t\t\t}else if( response.status === 'connected' ){\n\t\t\t\t\t\t\tlet accessToken = response.authResponse.accessToken,//response from getLoginStatus\n\t\t\t\t\t\t\tFB_userId = response.authResponse.userID;\n\t\t\t\t\t\t\tfb_share(accessToken,FB_userId);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tmodule.exports = {\n\t\tinit:init\n\t};\n});\n"]}
>>>>>>> origin/feature/new.trans
