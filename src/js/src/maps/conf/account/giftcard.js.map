{"version":3,"sources":["conf/account/giftcard.js"],"names":["define","require","exports","module","$","ajax","UI","Vue","laz","pageSize","init","bindEvents","setFilters","filter","time","separator","date","Date","year","getFullYear","month","getMonth","day","getDate","dateStr","string","Math","round","num","money","toFixed","c","Clipboard","on","alertSecond"],"mappings":";;AAAA;;;;;;;;;;;AAWAA,OAAO,0BAAP,EAAmC,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AAClE,QAAMC,IAAIH,QAAQ,GAAR,CAAV;AACA,QAAMI,OAAOJ,QAAQ,qBAAR,CAAb;AACA,QAAMK,KAAKL,QAAQ,iBAAR,CAAX;AACA,QAAMM,MAAMN,QAAQ,KAAR,CAAZ;AACA;AACAA,YAAQ,qBAAR;AACA,QAAMO,MAAMP,QAAQ,yBAAR,CAAZ;;AAEA,QAAIQ,WAAW,EAAf;AACA;;AAEAC;;AAEA,aAASA,IAAT,GAAgB;AACZC;AACAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AAED,aAASA,UAAT,GAAsB;AAClBL,YAAIM,MAAJ,CAAW,MAAX,EAAmB,UAASC,IAAT,EAAeC,SAAf,EAA0B;AACzC,gBAAIC,OAAO,IAAIC,IAAJ,CAASH,IAAT,CAAX;AACA,gBAAII,OAAOF,KAAKG,WAAL,EAAX;AACA,gBAAIC,QAASJ,KAAKK,QAAL,KAAkB,CAAnB,GAAwB,CAAxB,GAA6BL,KAAKK,QAAL,KAAkB,CAA/C,GAAoD,OAAOL,KAAKK,QAAL,KAAkB,CAAzB,CAAhE;AACA,gBAAIC,MAAMN,KAAKO,OAAL,KAAiB,CAAjB,GAAqBP,KAAKO,OAAL,EAArB,GAAsC,MAAMP,KAAKO,OAAL,EAAtD;AACA,gBAAIC,UAAU,EAAd;AACA,gBAAIT,SAAJ,EAAe;AACZS,2BAAWF,MAAMP,SAAN,GAAkBK,KAAlB,GAA0BL,SAA1B,GAAsCG,IAAjD;AACF,aAFD,MAEO;AACJM,2BAAWF,MAAM,GAAN,GAAYF,KAAZ,GAAoB,GAApB,GAA0BF,IAArC;AACF;AACD,mBAAOM,OAAP;AACH,SAZD;AAaAjB,YAAIM,MAAJ,CAAW,OAAX,EAAoB,UAASY,MAAT,EAAgB;AAChC,mBAAOC,KAAKC,KAAL,CAAWC,MAAM,GAAjB,CAAP;AACH,SAFD;AAGArB,YAAIM,MAAJ,CAAW,eAAX,EAA4B,UAASgB,KAAT,EAAe;AACvC,mBAAO,CAACD,MAAM,GAAP,EAAYE,OAAZ,CAAoB,CAApB,CAAP;AACH,SAFD;AAGH;;AAED,aAASnB,UAAT,GAAsB;;AAElB;AACA,YAAIoB,IAAI,IAAIC,SAAJ,CAAc,WAAd,CAAR;AACAD,UAAEE,EAAF,CAAK,SAAL,EAAgB,YAAW;AACvB3B,eAAG4B,WAAH,CAAe,SAAf;AACH,SAFD;AAGAH,UAAEE,EAAF,CAAK,OAAL,EAAc,YAAW;AACrB3B,eAAG4B,WAAH,CAAe,0CAAf;AACH,SAFD;AAIH;AAEJ,CA1GD","file":"../../../../conf/account/giftcard.js","sourcesContent":["/**\n * 我的礼品卡\n * @author 张恩铭\n * @date 20170324\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/account/giftcard.js\">\n </script>\n */\ndefine('conf/account/giftcard.js', function(require, exports, module) {\n    const $ = require('$');\n    const ajax = require('utils/async/ajax.js');\n    const UI = require('UI/dialog/alert');\n    const Vue = require('vue');\n    // 这个插件的文档 https://github.com/ximan/dropload\n    require('vendors/dropload.js');\n    const laz = require('utils/async/lazyload.js');\n\n    let pageSize = 10;\n    // let $exchangeList = $('.exchange-list');\n\n    init();\n\n    function init() {\n        bindEvents();\n        setFilters();\n        // Vue.component('account-list-more', {\n        //     props: {\n        //         details: {\n        //             type: Array,\n        //         },\n        //     },\n        //     template: '#account-list-more-template',\n        // });\n        // let vm = new Vue({\n        //     el: 'body',\n        //     data: {\n        //         currentPageNum: 1,\n        //         accountDetailsData: [],\n        //         pageSize,\n        //         reqDisabled: false,\n        //     },\n        //     init() {\n        //         $accountList.dropload({\n        //             scrollArea: window,\n        //             domDown: {\n        //                 domClass: 'dropload-down',\n        //                 domRefresh: '<div class=\"dropload-refresh\">↑ Pull To Load More</div>',\n        //                 domLoad: '<div class=\"dropload-load\"><i class=\"loading\"></i>Loading...</div>',\n        //                 domNoData: '<div class=\"dropload-noData\">There\\'re No More Transactions</div>',\n        //             },\n        //             loadDownFn(me) {\n        //                 if (vm.reqDisabled) {\n        //                     UI.alertSecond('No More Transactions.');\n        //                     me.resetload();\n        //                 } else {\n        //                     ajax.query({\n        //                         url: `/api/account/balance?&pageNum=${++vm.currentPageNum}&pageSize=${vm.pageSize}`,\n        //                         success(res) {\n        //                             if (res.code === 200) {\n        //                                 if (res.data.orders.length > 0) {\n        //                                     vm.accountDetailsData = vm.accountDetailsData.concat(res.data.details);\n        //                                     laz.lazyload();\n        //                                 } else {\n        //                                     UI.alertSecond('No More Transactions.');\n        //                                     vm.reqDisabled = true;\n        //                                 }\n        //                             } else {\n        //                                 UI.alertSecond(res.message);\n        //                             }\n        //                             me.resetload();\n        //                         },\n        //                     });\n        //                 }\n        //             },\n        //         });\n        //     },\n        // });\n    }\n\n    function setFilters() {\n        Vue.filter('time', function(time, separator) {\n            var date = new Date(time);\n            var year = date.getFullYear();\n            var month = (date.getMonth() + 1) > 9 ? (date.getMonth() + 1) : '0' + (date.getMonth() + 1);\n            var day = date.getDate() > 9 ? date.getDate() : '0' + date.getDate();\n            var dateStr = '';\n            if (separator) {\n               dateStr += day + separator + month + separator + year;\n            } else {\n               dateStr += day + '/' + month + '/' + year;\n            }\n            return dateStr;\n        });\n        Vue.filter('toInt', function(string){\n            return Math.round(num / 100);\n        });\n        Vue.filter('to2digitFloat', function(money){\n            return (num / 100).toFixed(2);\n        });\n    }\n\n    function bindEvents() {\n\n        // 剪贴板插件 https://github.com/zenorocha/clipboard.js/\n        let c = new Clipboard('.copy-btn');\n        c.on('success', function() {\n            UI.alertSecond('Copied.');\n        });\n        c.on('error', function() {\n            UI.alertSecond('Your browser doesn\\'t support auto-copy.');\n        });\n\n    }\n\n});\n"]}