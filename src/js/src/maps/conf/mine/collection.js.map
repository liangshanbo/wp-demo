{"version":3,"sources":["conf/mine/collection.js"],"names":["define","require","exports","module","$","ajax","Vue","UI","laz","component","props","items","type","Array","default","template","filter","url","search","test","userId","encodeURIComponent","el","data","listData","num","init","self","dropload","scrollArea","window","domDown","domClass","domRefresh","domUpdate","domLoad","domUp","loadDownFn","me","query","success","setTimeout","resetload","code","length","alertSecond","concat","lazyload","message","loadUpFn","location","reload"],"mappings":";;AAAA;;;;;;;;;;;AAWAA,OAAO,yBAAP,EAAkC,UAAUC,OAAV,EAAmBC,OAAnB,EAA4BC,MAA5B,EAAoC;AAClE,QAAMC,IAAIH,QAAQ,GAAR,CAAV;AAAA,QACII,OAAOJ,QAAQ,qBAAR,CADX;AAAA,QAEIK,MAAML,QAAQ,KAAR,CAFV;AAAA,QAGIM,KAAKN,QAAQ,oBAAR,CAHT;AAAA,QAIIO,MAAMP,QAAQ,yBAAR,CAJV;AAKAA,YAAQ,qBAAR;AACA;AACAK,QAAIG,SAAJ,CAAc,UAAd,EAA0B;AACtBC,eAAO;AACHC,mBAAO;AACHC,sBAAMC,KADH;AAEHC,yBAAS,oBAAW;AAChB,2BAAO,EAAP;AACH;AAJE;AADJ,SADe;AAStBC,kBAAU;AATY,KAA1B;AAWAT,QAAIU,MAAJ,CAAW,KAAX,EAAiB,UAASC,GAAT,EAAa;AAC1B,YAAIC,SAAS,KAAKC,IAAL,CAAUF,GAAV,CAAb;AACA,YAAG,CAAC,CAACG,MAAL,EAAY;AACR,mBAAOH,OAAOC,SAAS,GAAT,GAAa,GAApB,IAAyB,eAAzB,GAAyCE,MAAhD;AACH;AACD,eAAO,oBAAkBC,mBAAmBJ,GAAnB,CAAlB,GAA0C,WAAjD;AACH,KAND;AAOA,QAAIX,GAAJ,CAAQ;AACJgB,YAAG,MADC;AAEJC,cAAM;AACFC,sBAAS,EADP;AAEFC,iBAAK;AAFH,SAFF;AAMJC,cAAK,gBAAU;AACX,gBAAIC,OAAO,IAAX;AACAvB,cAAE,MAAF,EAAUwB,QAAV,CAAmB;AACfC,4BAAYC,MADG;AAEfC,yBAAS;AACLC,8BAAU,eADL;AAELC,gCAAY,sDAFP;AAGLC,+BAAW,qDAHN;AAILC,6BAAS;AAJJ,iBAFM;AAQfC,uBAAO;AACHJ,8BAAU,aADP;AAEHC,gCAAY,wDAFT;AAGHC,+BAAW,qDAHR;AAIHC,6BAAS;AAJN,iBARQ;AAcfE,4BAAY,oBAASC,EAAT,EAAa;AACrBjC,yBAAKkC,KAAL,CAAW;AACPtB,6BAAK,6BAA6BU,KAAKF,GAAL,EAD3B;AAEPe,iCAAS,iBAASjB,IAAT,EAAe;AACpBkB,uCAAW,YAAW;AAClBH,mCAAGI,SAAH;AACH,6BAFD,EAEG,GAFH;AAGA,gCAAInB,KAAKoB,IAAL,KAAc,GAAlB,EAAuB;AACnB,oCAAI,CAACpB,KAAKA,IAAL,CAAUZ,KAAV,CAAgBiC,MAArB,EAA6B;AACzBrC,uCAAGsC,WAAH,CAAe,gBAAf;AACA;AACH;AACDlB,qCAAKH,QAAL,GAAgBG,KAAKH,QAAL,CAAcsB,MAAd,CAAqBvB,KAAKA,IAAL,CAAUZ,KAA/B,CAAhB;AACAH,oCAAIuC,QAAJ;AACH,6BAPD,MAOO;AACHxC,mCAAGsC,WAAH,CAAetB,KAAKyB,OAApB;AACH;AACJ;AAhBM,qBAAX;AAkBH,iBAjCc;AAkCfC,0BAAU,kBAAUX,EAAV,EAAc;AACpBG,+BAAW,YAAY;AACnBH,2BAAGI,SAAH;AACAQ,iCAASC,MAAT,CAAgB,IAAhB;AACH,qBAHD,EAGG,GAHH;AAIH;AAvCc,aAAnB;AAyCH;AAjDG,KAAR;AAmDH,CA7ED","file":"../../../../conf/mine/collection.js","sourcesContent":["/**\n * 收藏列表\n * @author 黄奕海\n * @date 20170308\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/mine/collection.js\">\n </script>\n */\ndefine('conf/mine/collection.js', function (require, exports, module) {\n    const $ = require('$'),\n        ajax = require('utils/async/ajax.js'),\n        Vue = require(\"vue\"),\n        UI = require('UI/dialog/alert.js'),\n        laz = require('utils/async/lazyload.js');\n    require('vendors/dropload.js');\n    //laz.init();\n    Vue.component(\"listmore\", {\n        props: {\n            items: {\n                type: Array,\n                default: function() {\n                    return []\n                }\n            }\n        },\n        template: \"#collectionList\"\n    });\n    Vue.filter('buy',function(url){\n        var search = /\\?/.test(url);\n        if(!!userId){\n            return url + (search ? \"&\":\"?\")+\"affExtParam1=\"+userId;\n        }\n        return \"login?redirect=\"+encodeURIComponent(url)+\"&type=buy\";\n    });\n    new Vue({\n        el:'body',\n        data: {\n            listData:[],\n            num :2\n        },\n        init:function(){\n            let self = this;\n            $(\"body\").dropload({\n                scrollArea: window,\n                domDown: {\n                    domClass: 'dropload-down',\n                    domRefresh: '<div class=\"dropload-refresh\">↑Pull-up loading</div>',\n                    domUpdate: '<div class=\"dropload-update\">↓Release loading</div>',\n                    domLoad: '<div class=\"dropload-load\"><span class=\"loading\"></span>In loading...</div>'\n                },\n                domUp: {\n                    domClass: 'dropload-up',\n                    domRefresh: '<div class=\"dropload-refresh\">↓Pull-down refresh</div>',\n                    domUpdate: '<div class=\"dropload-update\">↑Release loading</div>',\n                    domLoad: '<div class=\"dropload-load\"><span class=\"loading\"></span>In loading...</div>'\n                },\n                loadDownFn: function(me) {\n                    ajax.query({\n                        url: \"/api/user/items?pageNum=\"+ (self.num++),\n                        success: function(data) {\n                            setTimeout(function() {\n                                me.resetload();\n                            }, 300);\n                            if (data.code === 200) {\n                                if (!data.data.items.length) {\n                                    UI.alertSecond(\"Data is loaded\");\n                                    return;\n                                }\n                                self.listData = self.listData.concat(data.data.items);\n                                laz.lazyload();\n                            } else {\n                                UI.alertSecond(data.message);\n                            }\n                        }\n                    });\n                },\n                loadUpFn: function (me) {\n                    setTimeout(function () {\n                        me.resetload();\n                        location.reload(true);\n                    }, 500);\n                }\n            });\n        }\n    })\n});\n"]}