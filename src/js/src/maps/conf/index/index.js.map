{"version":3,"sources":["conf/index/index.js"],"names":["define","require","exports","module","Ajax","Vue","UI","searchLayer","laz","Swiper","pagination","paginationClickable","slidesPerView","mySwiper","loop","component","props","items","type","Array","default","template","filter","url","search","test","userId","encodeURIComponent","pageNum","el","data","moreData","init","self","$","children","length","dropload","scrollArea","window","domDown","domClass","domRefresh","domUpdate","domLoad","loadDownFn","me","query","success","setTimeout","resetload","code","alertSecond","concat","lazyload","message","methods","click_show_slayer","layer_show","click_close_down","hide"],"mappings":";;AAAA;;;;;AAKAA,OAAO,qBAAP,EAA8B,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AAC7DF,YAAQ,GAAR;AACA,QAAIG,OAAOH,QAAQ,kBAAR,CAAX;AAAA,QACII,MAAMJ,QAAQ,KAAR,CADV;AAAA,QAEIK,KAAKL,QAAQ,oBAAR,CAFT;AAAA,QAGIM,cAAcN,QAAQ,mBAAR,CAHlB;AAAA,QAIIO,MAAMP,QAAQ,yBAAR,CAJV;AAAA,QAKIQ,SAASR,QAAQ,aAAR,CALb;AAMA;AACAA,YAAQ,qBAAR;AACJ;AACI,QAAIQ,MAAJ,CAAW,MAAX,EAAkB;AACdC,oBAAY,aADE;AAEdC,6BAAqB,IAFP;AAGdC,uBAAe;AAHD,KAAlB;AAKJ;AACC,QAAIC,WAAW,IAAIJ,MAAJ,CAAY,WAAZ,EAAyB;AACrCK,cAAM,IAD+B;AAErC;AACAJ,oBAAY;;AAHyB,KAAzB,CAAf;AAMGL,QAAIU,SAAJ,CAAc,UAAd,EAA0B;AACtBC,eAAO;AACHC,mBAAO;AACHC,sBAAMC,KADH;AAEHC,yBAAS,oBAAW;AAChB,2BAAO,EAAP;AACH;AAJE;AADJ,SADe;AAStBC,kBAAU;AATY,KAA1B;AAWAhB,QAAIiB,MAAJ,CAAW,KAAX,EAAiB,UAASC,GAAT,EAAa;AAC1B,YAAIC,SAAS,KAAKC,IAAL,CAAUF,GAAV,CAAb;AACA,YAAG,CAAC,CAACG,MAAL,EAAY;AACR,mBAAOH,OAAOC,SAAS,GAAT,GAAa,GAApB,IAAyB,eAAzB,GAAyCE,MAAhD;AACH;AACD,eAAO,oBAAkBC,mBAAmBJ,GAAnB,CAAlB,GAA0C,WAAjD;AACH,KAND;AAOA,QAAIK,UAAU,CAAd;AACA,QAAIvB,GAAJ,CAAQ;AACJwB,YAAI,MADA;AAEJC,cAAM;AACFC,sBAAU;AADR,SAFF;AAKJC,cAAM,gBAAW;AACb,gBAAIC,OAAO,IAAX;AACA,gBAAGC,EAAE,YAAF,EAAgBC,QAAhB,CAAyB,IAAzB,EAA+BC,MAA/B,GAAsC,CAAzC,EAA2C;AACvCF,kBAAE,MAAF,EAAUG,QAAV,CAAmB;AACfC,gCAAYC,MADG;AAEfC,6BAAS;AACLC,kCAAU,eADL;AAELC,oCAAY,sDAFP;AAGLC,mCAAW,qDAHN;AAILC,iCAAS;AAJJ,qBAFM;AAQfC,gCAAY,oBAASC,EAAT,EAAa;AACrB1C,6BAAK2C,KAAL,CAAW;AACPxB,iCAAK,oFAAqFK,SADnF;AAEPoB,qCAAS,iBAASlB,IAAT,EAAe;AACpBmB,2CAAW,YAAW;AAClBH,uCAAGI,SAAH;AACH,iCAFD,EAEG,GAFH;AAGA,oCAAIpB,KAAKqB,IAAL,KAAc,GAAlB,EAAuB;AACnB,wCAAI,CAACrB,KAAKA,IAAL,CAAUb,KAAV,CAAgBmB,MAArB,EAA6B;AACzB9B,2CAAG8C,WAAH,CAAe,gBAAf;AACA;AACH;AACDnB,yCAAKF,QAAL,GAAgBE,KAAKF,QAAL,CAAcsB,MAAd,CAAqBvB,KAAKA,IAAL,CAAUb,KAA/B,CAAhB;AACAT,wCAAI8C,QAAJ;AACH,iCAPD,MAOO;AACHhD,uCAAG8C,WAAH,CAAetB,KAAKyB,OAApB;AACH;AACJ;AAhBM,yBAAX;AAkBH;AA3Bc,iBAAnB;AA6BH;AACJ,SAtCG;AAuCJC,iBAAQ;AACJC,+BAAkB,6BAAU;AACxBlD,4BAAYmD,UAAZ;AACH,aAHG;AAIJC,8BAAiB,4BAAU;AACvBzB,kBAAE,WAAF,EAAe0B,IAAf;AACH;AANG;AAvCJ,KAAR;AAgDH,CA1FD","file":"../../../../conf/index/index.js","sourcesContent":["/**\n * title: 商品列表页\n * author: wangchunpeng\n * time: 2017-02-20\n */\ndefine('conf/index/index.js', function(require, exports, module) {\n    require(\"$\");\n    let Ajax = require(\"utils/async/ajax\"),\n        Vue = require(\"vue\"),\n        UI = require('UI/dialog/alert.js'),\n        searchLayer = require('mods/search/layer'),\n        laz = require('utils/async/lazyload.js'),\n        Swiper = require('mods/swiper');\n    // touchSlide = require('vendors/TouchSlide');\n    require('vendors/dropload.js');\n//推荐gdy\n    new Swiper('.hot',{\n        pagination: '.pagination',\n        paginationClickable: true,\n        slidesPerView: 'auto'\n    })\n//banner gdy\n var mySwiper = new Swiper ('.carousel', {\n    loop: true,\n    // 如果需要分页器\n    pagination: '.swiper-pagination',\n    \n  })        \n    Vue.component(\"listmore\", {\n        props: {\n            items: {\n                type: Array,\n                default: function() {\n                    return []\n                }\n            }\n        },\n        template: \"#prolist_tpl\"\n    });\n    Vue.filter('buy',function(url){\n        var search = /\\?/.test(url);\n        if(!!userId){\n            return url + (search ? \"&\":\"?\")+\"affExtParam1=\"+userId;\n        }\n        return \"login?redirect=\"+encodeURIComponent(url)+\"&type=buy\";\n    });\n    var pageNum = 2;\n    new Vue({\n        el: \"body\",\n        data: {\n            moreData: []\n        },\n        init: function() {\n            let self = this;\n            if($('#goodsList').children('li').length>0){\n                $(\"body\").dropload({\n                    scrollArea: window,\n                    domDown: {\n                        domClass: 'dropload-down',\n                        domRefresh: '<div class=\"dropload-refresh\">↑Pull-up loading</div>',\n                        domUpdate: '<div class=\"dropload-update\">↓Release loading</div>',\n                        domLoad: '<div class=\"dropload-load\"><span class=\"loading\"></span>In loading...</div>'\n                    },\n                    loadDownFn: function(me) {\n                        Ajax.query({\n                            url: \"/api/ext/recommendation/items?pageType=AaP0001&pageModule=AaP0001M0003&pageNum=\" + (pageNum++),\n                            success: function(data) {\n                                setTimeout(function() {\n                                    me.resetload();\n                                }, 300);\n                                if (data.code === 200) {\n                                    if (!data.data.items.length) {\n                                        UI.alertSecond(\"Data is loaded\");\n                                        return;\n                                    }\n                                    self.moreData = self.moreData.concat(data.data.items);\n                                    laz.lazyload();\n                                } else {\n                                    UI.alertSecond(data.message);\n                                }\n                            }\n                        });\n                    }\n                });\n            }\n        },\n        methods:{\n            click_show_slayer:function(){\n                searchLayer.layer_show();\n            },\n            click_close_down:function(){\n                $('#download').hide();\n            }\n        }\n    });\n});\n"]}