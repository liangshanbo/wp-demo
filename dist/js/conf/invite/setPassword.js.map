{"version":3,"sources":["webpack:///conf/invite/setPassword.js","webpack:///webpack/bootstrap 2698a9f306103c1e7f9b?b6cd*******************","webpack:///./src/js_es6/conf/invite/setPassword.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","20","__WEBPACK_AMD_DEFINE_RESULT__","undefined","require","getParams","url","obj","location","search","decodeURI","test","substr","arr","split","length","res","e","Error","code","ajax","Vue","storage","check","UI","el","data","password","init","phone","$","val","methods","hideTS","dom","currentTarget","attr","showTS","isNext","$this","replace","this","_nextHigh","nextStep","pwd","params","invitationCode","stoken","source","ga","Date","getItem","removeItem","hasClass","alertSecond","accessToken","type","refereeUserId","post","success","assign","message","error","goback","href","removeClass","addClass"],"mappings":"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","file":"conf\\invite\\setPassword.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 20);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 20:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar __WEBPACK_AMD_DEFINE_RESULT__;\n\n/**\n * 邀请好友 设置密码\n * @author wangming\n * @date 20170315\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/invite/setPassword.js\">\n </script>\n */\n\n!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n    __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"$\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n    var ajax = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"utils/async/ajax\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        Vue = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"vue\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        storage = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/storage/storage.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        check = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/check/input.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        UI = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"UI/dialog/alert.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\n    new Vue({\n        el: \"body\",\n        data: {\n            password: false\n        },\n        init: function init() {\n            var phone = getParams(location.search).phone;\n            if (phone) {\n                $(\"#username\").val(phone.substr(0, 3) + \"****\" + phone.substr(7));\n            }\n        },\n        methods: {\n            hideTS: function hideTS(dom) {\n                var $this = $(dom.currentTarget);\n                $this.attr(\"placeholder\", \"\");\n            },\n            showTS: function showTS(dom) {\n                var $this = $(dom.currentTarget);\n                $this.attr(\"placeholder\", \"New  Password\");\n            },\n            isNext: function isNext(dom) {\n                var $this = $(dom.currentTarget),\n                    val = $this.val();\n                $this.val(val.replace(/[<> \\&]/g, \"\"));\n                if (val.length >= 6) {\n                    this.password = true;\n                } else {\n                    this.password = false;\n                }\n                this._nextHigh();\n            },\n            nextStep: function nextStep(dom) {\n                var pwd = $(\"#password\").val(),\n                    params = getParams(location.search),\n                    phone = params.phone,\n                    invitationCode = params.invitationCode,\n                    $this = $(dom.currentTarget);\n                var stoken = void 0,\n                    obj = {},\n                    source = params.source;\n                //埋点\n                ga('send', 'event', 'login/sign', 'invite_sign_finish_btn_click');\n                if (new Date() * 1 - storage.getItem('invitetime') <= 600000) {\n                    stoken = storage.getItem('invitesst');\n                } else {\n                    storage.removeItem(\"invitesst\");\n                    storage.removeItem(\"invitetime\");\n                }\n                if ($this.hasClass(\"disabled\")) {\n                    return;\n                }\n                if (!check.password(pwd)) {\n                    UI.alertSecond('Please enter a password with 6 to 20 digits, including letters, digitals or symbols.');\n                    return;\n                }\n                if (source) {\n                    if (source == \"FB\") {\n                        source = \"FACEBOOK\";\n                    } else {\n                        source = \"SMS\";\n                    }\n                }\n                obj = {\n                    password: pwd,\n                    accessToken: stoken,\n                    type: source\n                };\n                if (invitationCode != \"undefined\") {\n                    obj.refereeUserId = invitationCode;\n                }\n                ajax.post({\n                    url: '/api/user/register',\n                    data: obj,\n                    success: function success(data) {\n                        var code = data.code;\n                        if (code === 200) {\n                            UI.alertSecond(\"SIGN UP success\", function () {\n                                storage.removeItem(\"rst\" + phone);\n                                storage.removeItem(\"rsttime\");\n                                location.assign('/');\n                            }, 500);\n                        } else {\n                            UI.alertSecond(data.message);\n                        }\n                    },\n                    error: function error(data) {}\n                });\n            },\n            goback: function goback() {\n                var params = getParams(location.search),\n                    phone = params.phone,\n                    invitationCode = params.invitationCode,\n                    source = params.source;\n                location.href = \"/invite/regist?phone=\" + phone + \"&invitationCode=\" + invitationCode + \"&source=\" + source;\n            },\n            _nextHigh: function _nextHigh() {\n                if (this.password) {\n                    $('#register').removeClass(\"disabled\");\n                } else {\n                    $('#register').addClass(\"disabled\");\n                }\n            }\n        }\n    });\n\n    function getParams(url) {\n        var obj = {};\n        url = url || location.search;\n        url = decodeURI(url);\n        url = /^\\?.*/i.test(url) ? url.substr(1) : url;\n        var arr = url.split(\"&\");\n        for (var i = 0, l = arr.length; i < l; i++) {\n            var res = arr[i].split(\"=\");\n            obj[res[0]] = res[1];\n        }\n        return obj;\n    }\n}.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// conf/invite/setPassword.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2698a9f306103c1e7f9b","/**\n * 邀请好友 设置密码\n * @author wangming\n * @date 20170315\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/invite/setPassword.js\">\n </script>\n */\n\ndefine('conf/invite/setPassword.js', function (require, exports, module) {\n\trequire(\"$\")\n    const ajax = require(\"utils/async/ajax\"),\n        Vue = require(\"vue\"),\n        storage = require('mods/storage/storage.js'),\n        check = require('mods/check/input.js'),\n        UI = require('UI/dialog/alert.js');\n\n    new Vue({\n    \tel: \"body\",\n    \tdata: {\n    \t\tpassword: false\n    \t},\n    \tinit: function(){\n    \t\tlet phone = getParams(location.search).phone;\n    \t\tif(phone) {\n                $(\"#username\").val(phone.substr(0,3) + \"****\" + phone.substr(7));\n            }\n    \t},\n    \tmethods: {\n    \t\thideTS: function(dom) {\n    \t\t\tlet $this = $(dom.currentTarget);\n    \t\t\t$this.attr(\"placeholder\", \"\");\n    \t\t},\n    \t\tshowTS: function(dom) {\n    \t\t\tlet $this = $(dom.currentTarget);\n    \t\t\t$this.attr(\"placeholder\", \"New  Password\");\n    \t\t},\n    \t\tisNext: function(dom) {\n    \t\t\tlet $this = $(dom.currentTarget),\n    \t\t\t\tval = $this.val();\n    \t\t\t$this.val(val.replace(/[<> \\&]/g,\"\"));\n    \t\t\tif(val.length >= 6) {\n    \t\t\t\tthis.password = true;\n    \t\t\t} else {\n    \t\t\t\tthis.password = false;\n    \t\t\t}\n    \t\t\tthis._nextHigh();\n    \t\t},\n            nextStep: function(dom) {\n            \tconst pwd = $(\"#password\").val(),\n                    params = getParams(location.search),\n            \t\tphone = params.phone,\n            \t\tinvitationCode = params.invitationCode,\n            \t\t$this = $(dom.currentTarget);\n            \tlet stoken, obj = {}, source = params.source;\n                 //埋点\n                ga('send', 'event', 'login/sign', 'invite_sign_finish_btn_click');\n            \tif(new Date() * 1 - storage.getItem('invitetime') <= 600000){\n\t\t            stoken = storage.getItem('invitesst');\n\t\t        }else{\n\t\t            storage.removeItem(\"invitesst\");\n\t\t            storage.removeItem(\"invitetime\");\n        \t\t}\n            \tif($this.hasClass(\"disabled\")) {\n                    return;\n                }\n                if(!check.password(pwd)){\n\t\t            UI.alertSecond('Please enter a password with 6 to 20 digits, including letters, digitals or symbols.');\n\t\t            return;\n\t\t        }\n                if(source) {\n                    if(source == \"FB\") {\n                        source = \"FACEBOOK\";\n                    } else {\n                        source = \"SMS\";\n                    }\n                }\n\t\t        obj = {\n\t\t        \tpassword: pwd,\n\t\t        \taccessToken: stoken,\n                    type: source\n\t\t        };\n                if(invitationCode != \"undefined\") {\n                    obj.refereeUserId = invitationCode;\n                }\n\t\t        ajax.post({\n                    url: '/api/user/register',\n                    data: obj,\n                    success: function (data) {\n                        let code = data.code;\n                        if (code === 200) {\n                            UI.alertSecond(\"SIGN UP success\",function(){\n\t\t                        storage.removeItem(\"rst\"+phone);\n\t\t                        storage.removeItem(\"rsttime\");\n\t\t                        location.assign('/');\n\t\t                    },500);\n                        } else {\n                            UI.alertSecond(data.message);\n                        }\n                    },\n                    error: function (data) {\n\n                    }\n                })\n            },\n            goback: function() {\n            \tlet params = getParams(location.search),\n                    phone = params.phone,\n                    invitationCode = params.invitationCode,\n                    source = params.source;\n            \tlocation.href = \"/invite/regist?phone=\" + phone + \"&invitationCode=\" + invitationCode + \"&source=\" + source;\n            },\n            _nextHigh: function() {\n                if(this.password) {\n                    $('#register').removeClass(\"disabled\");\n                } else {\n                    $('#register').addClass(\"disabled\");\n                }\n            }\n    \t}\n    });\n\n    function getParams(url) {\n\t\tlet obj = {};\n        url = url || location.search;\n        url = decodeURI(url);\n        url = /^\\?.*/i.test(url) ? url.substr(1) : url;\n        let arr = url.split(\"&\");\n        for (let i = 0, l = arr.length; i < l; i++) {\n            let res = arr[i].split(\"=\");\n            obj[res[0]] = res[1]\n        }\n        return obj;\n\t}\n});\n\n\n// WEBPACK FOOTER //\n// ./src/js_es6/conf/invite/setPassword.js"],"sourceRoot":""}