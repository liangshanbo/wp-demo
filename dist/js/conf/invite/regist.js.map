{"version":3,"sources":["webpack:///conf/invite/regist.js","webpack:///webpack/bootstrap 2698a9f306103c1e7f9b","webpack:///./src/js_es6/conf/invite/regist.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","19","__WEBPACK_AMD_DEFINE_RESULT__","undefined","require","getParams","url","obj","location","search","decodeURI","test","substr","arr","split","length","res","$","e","Error","code","Vue","ajax","UI","sendVerification","storage","el","data","phone","verification","agree","stoken","timer","isShow","init","_this","this","getItem","val","addClass","countryCode","html","click","hide","show","on","attr","find","removeClass","methods","hideTS","dom","currentTarget","showTS","type","$this","countryList","isNext","send","_nextHigh","isAgree","hasClass","getCode","mobile","checkPhone","params","callback","token","setItem","Date","nextStep","ga","source","invitationCode","removeItem","smsCode","smsToken","put","success","href","alertSecond","message","error"],"mappings":"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","file":"conf\\invite\\regist.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 19);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 19:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar __WEBPACK_AMD_DEFINE_RESULT__;\n\n/**\n * 邀请好友\n * @author wangming\n * @date 20170314\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/invite/regist.js\">\n </script>\n */\n!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n    var $ = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"$\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        Vue = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"vue\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        ajax = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"utils/async/ajax.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        check = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/check/input.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        UI = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"UI/dialog/alert\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        sendVerification = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/send_verification\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        storage = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/storage/storage.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n    __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/country_area.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n    new Vue({\n        el: \"body\",\n        data: {\n            phone: getParams(location.search).phone ? true : false,\n            verification: false,\n            agree: true,\n            stoken: \"\",\n            timer: \"\",\n            isShow: false\n        },\n        init: function init() {\n            var phone = getParams(location.search).phone;\n            var _this = this,\n                code = storage.getItem('code' + phone),\n                countryCode = storage.getItem('countryCode' + phone);\n            if (phone && phone >= 7) {\n                $(\"#username\").val(phone);\n                $(\"#send\").addClass('verification-active');\n                if (code) {\n                    if (code != \"undefined\") {\n                        this.code = storage.getItem('code' + phone);\n                        this.countryCode = storage.getItem('countryCode' + phone);\n                        $(\"#countryNum\").html(this.code + \" \" + this.countryCode);\n                    } else {\n                        $(\"#countryNum\").html(\"IN +91\");\n                    }\n                }\n            }\n            $(\"#area_cancel\").click(function () {\n                _this.isShow = false;\n                $(\"#area\").hide();\n                $(\"#regist\").show();\n            });\n            $(\".country\").on(\"click\", \"dd\", function () {\n                _this.code = $(this).attr(\"code\");\n                _this.countryCode = $(this).attr(\"countrycode\");\n                $(\"#countryNum\").html(_this.code + \" \" + _this.countryCode);\n                _this.isShow = false;\n                $(\"#area\").hide();\n                $(\"#regist\").show();\n                $('#country').find('dt').removeClass('fixed');\n            });\n        },\n        methods: {\n            hideTS: function hideTS(dom) {\n                var $this = $(dom.currentTarget);\n                $this.attr(\"placeholder\", \"\");\n            },\n            showTS: function showTS(dom, type) {\n                // type: 1、手机号   2、验证码\n                var $this = $(dom.currentTarget);\n                if (type === 1) {\n                    $this.attr(\"placeholder\", \"Mobile No\");\n                } else {\n                    $this.attr(\"placeholder\", \"SMS verification code\");\n                }\n            },\n            countryList: function countryList() {\n                if (this.isShow) {\n                    $(\"#area\").hide();\n                    $(\"#regist\").show();\n                } else {\n                    $(\"#area\").show();\n                    $(\"#regist\").hide();\n                }\n                this.show = !this.show;\n            },\n            isNext: function isNext(dom, type) {\n                var $this = $(dom.currentTarget),\n                    val = $this.val(),\n                    send = $(\"#send\");\n                if (type === 1) {\n                    if (val.length >= 7) {\n                        this.phone = true;\n                        if (send.html() == \"SEND\") {\n                            send.addClass('verification-active');\n                        }\n                    } else {\n                        this.phone = false;\n                        send.removeClass('verification-active');\n                    }\n                } else {\n                    this.verification = val.length >= 6 ? true : false;\n                }\n                this._nextHigh();\n            },\n            isAgree: function isAgree(dom) {\n                var $this = $(dom.currentTarget);\n                if ($this.hasClass(\"register-agreement-active\")) {\n                    $this.removeClass(\"register-agreement-active\");\n                    this.agree = true;\n                } else {\n                    $this.addClass(\"register-agreement-active\");\n                    this.agree = false;\n                }\n                this._nextHigh();\n            },\n            getCode: function getCode(dom) {\n                var phone = $(\"#username\").val(),\n                    obj = {\n                    \"countryCode\": this.countryCode ? this.countryCode : \"+91\",\n                    \"mobile\": phone,\n                    \"type\": \"INVITE_REGISTER\"\n                },\n                    $this = $(dom.currentTarget),\n                    _this = this;\n                if (!$this.hasClass('verification-active')) {\n                    return;\n                }\n                $this.removeClass('verification-active');\n                sendVerification.checkPhone({\n                    dom: $(\"#send\"),\n                    params: obj,\n                    type: 1,\n                    callback: function callback(token) {\n                        _this.stoken = token; //获取手机验证码token;\n                        storage.setItem(\"inv\" + phone, token); //register stoken\n                        storage.setItem(\"invtime\", new Date() * 1); //register time\n                    }\n                });\n                /*ajax.post({\n                    url: '/api/user/sms',\n                    data: obj,\n                    success: function (data) {\n                        let code = data.code,\n                            token = data.data.smsToken;\n                        if (code === 200) {\n                           \n                        } else {\n                            $this.addClass('verification-active');\n                            UI.alertSecond(data.message);\n                        }\n                    },\n                    error: function (data) {\n                     }\n                })*/\n            },\n            nextStep: function nextStep(dom) {\n                //埋点\n\n                ga('send', 'event', 'login/sign', 'invite_sign_next_btn_click');\n                var $this = $(dom.currentTarget),\n                    phone = $(\"#username\").val(),\n                    verification = $(\"#verification\").val(),\n                    params = getParams(location.search),\n                    source = params.source,\n                    _this = this,\n                    invitationCode = params.invitationCode;\n                if ($this.hasClass(\"disabled\")) {\n                    return;\n                }\n                if (new Date() * 1 - storage.getItem('invtime') <= 600000 && storage.getItem('inv' + phone)) {\n                    this.stoken = storage.getItem('inv' + phone);\n                } else {\n                    storage.removeItem(\"inv\" + phone);\n                    storage.removeItem(\"invtime\");\n                }\n                var obj = {\n                    countryCode: this.countryCode ? this.countryCode : \"+91\",\n                    mobile: phone,\n                    smsCode: verification,\n                    smsToken: this.stoken\n                };\n                ajax.put({\n                    url: '/api/user/sms',\n                    data: obj,\n                    success: function success(data) {\n                        var code = data.code,\n                            token = data.data.smsToken;\n                        if (code === 200) {\n                            storage.setItem('invitetime', new Date() * 1);\n                            storage.setItem('invitesst', token);\n                            if (_this.code) {\n                                storage.setItem('code' + phone, _this.code);\n                                storage.setItem('countryCode' + phone, _this.countryCode);\n                            }\n                            location.href = \"/invite/setPassword?invitationCode=\" + invitationCode + \"&phone=\" + phone + \"&source=\" + source;\n                        } else {\n                            UI.alertSecond(data.message);\n                        }\n                    },\n                    error: function error(data) {}\n                });\n            },\n            _nextHigh: function _nextHigh() {\n                if (this.phone && this.verification && this.agree) {\n                    $('#register').removeClass(\"disabled\");\n                } else {\n                    $('#register').addClass(\"disabled\");\n                }\n            }\n        }\n    });\n\n    function getParams(url) {\n        var obj = {};\n        url = url || location.search;\n        url = decodeURI(url);\n        url = /^\\?.*/i.test(url) ? url.substr(1) : url;\n        var arr = url.split(\"&\");\n        for (var i = 0, l = arr.length; i < l; i++) {\n            var res = arr[i].split(\"=\");\n            obj[res[0]] = res[1];\n        }\n        return obj;\n    }\n}.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// conf/invite/regist.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2698a9f306103c1e7f9b","/**\n * 邀请好友\n * @author wangming\n * @date 20170314\n * 页面引用\n *  <script src=\"__PUBLIC__/js/lithe.js\"\n data-config=\"config.js\"\n data-debug=\"true\"\n data-main=\"conf/invite/regist.js\">\n </script>\n */\ndefine('conf/invite/regist.js', function (require, exports, module) {\n    const $ = require('$'),\n        Vue = require(\"vue\"),\n        ajax = require('utils/async/ajax.js'),\n        check = require('mods/check/input.js'),\n        UI = require('UI/dialog/alert'),\n        sendVerification = require('mods/send_verification'),\n        storage = require('mods/storage/storage.js');\n    require('mods/country_area.js');       \n    new Vue({\n        el: \"body\",\n        data: {\n            phone: getParams(location.search).phone ? true : false,\n            verification: false,\n            agree: true,\n            stoken: \"\",\n            timer: \"\",\n            isShow: false\n        },\n        init: function() {\n            let phone = getParams(location.search).phone;\n            let _this = this,\n                code = storage.getItem('code' + phone),\n                countryCode = storage.getItem('countryCode' + phone);\n            if(phone && phone >= 7) {\n                $(\"#username\").val(phone);\n                $(\"#send\").addClass('verification-active');\n                if(code) {\n                    if(code != \"undefined\") {\n                        this.code = storage.getItem('code' + phone);\n                        this.countryCode = storage.getItem('countryCode' + phone);\n                        $(\"#countryNum\").html(this.code +\" \" + this.countryCode);\n                    } else {\n                        $(\"#countryNum\").html(\"IN +91\");\n                    }\n                }\n                \n            }\n            $(\"#area_cancel\").click(function(){\n                _this.isShow = false;\n                $(\"#area\").hide();\n                $(\"#regist\").show();\n            });\n            $(\".country\").on(\"click\", \"dd\", function() {\n                _this.code = $(this).attr(\"code\");\n                _this.countryCode = $(this).attr(\"countrycode\");\n                $(\"#countryNum\").html(_this.code +\" \" + _this.countryCode);\n                _this.isShow = false;\n                $(\"#area\").hide();\n                $(\"#regist\").show();\n                $('#country').find('dt').removeClass('fixed');\n            });\n        },\n        methods: {\n            hideTS: function (dom) {\n                let $this = $(dom.currentTarget);\n                $this.attr(\"placeholder\", \"\");\n            },\n            showTS: function (dom, type) { // type: 1、手机号   2、验证码\n                let $this = $(dom.currentTarget);\n                if(type === 1) {\n                    $this.attr(\"placeholder\", \"Mobile No\");\n                } else {\n                    $this.attr(\"placeholder\", \"SMS verification code\");\n                }\n            },\n            countryList: function() {\n                if(this.isShow) {\n                    $(\"#area\").hide();\n                    $(\"#regist\").show();\n                } else {\n                    $(\"#area\").show();\n                    $(\"#regist\").hide();\n                }\n                this.show = !this.show;\n            },\n            isNext: function(dom, type) {\n                let $this = $(dom.currentTarget),\n                    val = $this.val(),\n                    send = $(\"#send\");\n                if(type === 1) {\n                    if(val.length >= 7) {\n                        this.phone = true;\n                        if(send.html() == \"SEND\") {\n                            send.addClass('verification-active');\n                        }\n                    } else {\n                        this.phone =  false;\n                        send.removeClass('verification-active');\n                    }\n                } else {\n                    this.verification = val.length >= 6 ? true : false;\n                }\n                this._nextHigh();\n            },\n            isAgree: function(dom) {\n                let $this = $(dom.currentTarget);\n                if($this.hasClass(\"register-agreement-active\")) {\n                    $this.removeClass(\"register-agreement-active\");\n                    this.agree = true;\n                } else {\n                    $this.addClass(\"register-agreement-active\");\n                    this.agree = false;\n                }\n                this._nextHigh();\n            },\n            getCode: function(dom) {\n                const phone = $(\"#username\").val(),\n                    obj = {\n                        \"countryCode\" : this.countryCode ? this.countryCode : \"+91\",\n                        \"mobile\" : phone,\n                        \"type\" : \"INVITE_REGISTER\"\n                    },\n                    $this = $(dom.currentTarget),\n                    _this = this;\n                if (!$this.hasClass('verification-active')) {\n                    return;\n                }\n                $this.removeClass('verification-active');\n                sendVerification.checkPhone({\n                    dom:$(\"#send\"),\n                    params:obj,\n                    type:1,\n                    callback:function(token){\n                        _this.stoken = token;//获取手机验证码token;\n                        storage.setItem(\"inv\"+phone,token);//register stoken\n                        storage.setItem(\"invtime\",new Date()*1);//register time\n                    }\n                });\n                /*ajax.post({\n                    url: '/api/user/sms',\n                    data: obj,\n                    success: function (data) {\n                        let code = data.code,\n                            token = data.data.smsToken;\n                        if (code === 200) {\n                           \n                        } else {\n                            $this.addClass('verification-active');\n                            UI.alertSecond(data.message);\n                        }\n                    },\n                    error: function (data) {\n\n                    }\n                })*/\n            },\n            nextStep: function(dom) {\n                //埋点\n             \n                ga('send', 'event', 'login/sign', 'invite_sign_next_btn_click');\n                let $this = $(dom.currentTarget),\n                    phone = $(\"#username\").val(),\n                    verification = $(\"#verification\").val(),\n                    params = getParams(location.search),\n                    source = params.source,\n                    _this = this,\n                    invitationCode = params.invitationCode;\n                if($this.hasClass(\"disabled\")) {\n                    return;\n                }\n                if(new Date() * 1 - storage.getItem('invtime') <= 600000 && storage.getItem('inv'+phone)){\n                    this.stoken = storage.getItem('inv'+phone);\n                } else {\n                    storage.removeItem(\"inv\"+phone);\n                    storage.removeItem(\"invtime\");\n                }\n                let obj = {\n                    countryCode : this.countryCode ? this.countryCode : \"+91\",\n                    mobile: phone,\n                    smsCode: verification,\n                    smsToken: this.stoken\n                };\n                ajax.put({\n                    url: '/api/user/sms',\n                    data: obj,\n                    success: function (data) {\n                        let code = data.code,\n                            token = data.data.smsToken;\n                        if (code === 200) {\n                            storage.setItem('invitetime', new Date() * 1);\n                            storage.setItem('invitesst', token);\n                            if(_this.code) {\n                                storage.setItem('code' + phone, _this.code);\n                                storage.setItem('countryCode' + phone, _this.countryCode);\n                            }\n                            location.href = \"/invite/setPassword?invitationCode=\" + invitationCode + \"&phone=\" + phone + \"&source=\" + source;\n                        } else {\n                            UI.alertSecond(data.message);\n                        }\n                    },\n                    error: function (data) {\n\n                    }\n                })\n            },\n            _nextHigh: function() {\n                if(this.phone && this.verification &&  this.agree) {\n                    $('#register').removeClass(\"disabled\");\n                } else {\n                    $('#register').addClass(\"disabled\");\n                }\n            },\n            /*_countDown: function(dom, time) {\n                let times = time,\n                    _this = this;\n                dom.html(times + \"s\");\n                _this.timer = setInterval(function () {\n                    times--;\n                    dom.html(times + \"s\");\n                    if (times <= 0) {\n                        _this.clearTimer();\n                        dom.html(\"Send\");\n                        dom.addClass('verification-active');\n                        times = time;\n                    }\n                }, 1000)\n            },\n            clearTimer: function(){\n                let _this = this;\n                clearInterval(_this.timer);\n            }*/\n        }\n    });\n\n    function getParams(url) {\n        let obj = {};\n        url = url || location.search;\n        url = decodeURI(url);\n        url = /^\\?.*/i.test(url) ? url.substr(1) : url;\n        let arr = url.split(\"&\");\n        for (let i = 0, l = arr.length; i < l; i++) {\n            let res = arr[i].split(\"=\");\n            obj[res[0]] = res[1]\n        }\n        return obj;\n    }\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/js_es6/conf/invite/regist.js"],"sourceRoot":""}