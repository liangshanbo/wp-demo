!function(t){function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=2)}({2:function(t,n,e){"use strict";var o;void 0!==(o=function(t,n,o){function i(){var t={commonMod:u,renderCompleted:!1,shownElementName:"",cardId:"",isExchanging:!1,iconFlySwitch:!1,successfulExchanges:0,badgeBlinkSwitch:!1,toastDuration:2e3,cardListRes:{code:0,data:{balance:{amount:0},giftCards:[]}}},n=new a({el:"body",data:function(){return t},methods:{fetchGiftcardsList:function(){c.query({url:"/api/trade/giftCards",success:function(t){200===t.code&&(n.cardListRes=t),""!==n.cardId&&u.scrollIntoTargetSelector(".cards-li"),n.renderCompleted=!0},error:function(){n.renderCompleted=!0}})},showExchangePrompt:function(t){this.isExchanging||(this.cardId=r(t.target).data("card-id"),this.shownElementName="prompt")},sendExchangeReq:function(){this.shownElementName="loading",c.post({url:"/api/trade/myGiftCard",data:{id:n.cardId},success:function(t){200===t.code?n.removeMaskAndAlert("Exchanged Sucessfully. Check it in My Gift Voucher.",!0):n.removeMaskAndAlert(t.message,!1)},fail:function(t){n.removeMaskAndAlert("Exchange failed.",!1)}}),this.checkNetwork()},removeMaskAndAlert:function(t,e){this.shownElementName="","string"==typeof t&&(this.isExchanging=!0,s.alertSecond(t,null,this.toastDuration),setTimeout(function(){n.animate(e)},n.toastDuration)),this.fetchGiftcardsList()},checkNetwork:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;setTimeout(function(){window.navigator.onLine||n.removeMaskAndAlert("Please check your network.")},t)},animate:function(t){!0===t?(d.setItem("showPoint","true"),++n.successfulExchanges,n.iconFlySwitch=n.badgeBlinkSwitch=!0,setTimeout(function(){n.iconFlySwitch=n.isExchanging=n.badgeBlinkSwitch=!1},1100)):n.isExchanging=!1},toMyGiftcards:function(){d.removeItem("showPoint"),this.successfulExchanges=0,this.badgeBlinkSwitch=!1;var t=window.location.href.replace("/account/exchange","/account/giftcard");window.location=t}},init:function(){u.setFilters()},created:function(){this.fetchGiftcardsList(),"true"===d.getItem("showPoint")&&(this.successfulExchanges=1,this.badgeBlinkSwitch=!0)}})}var r=e(!function(){var t=new Error('Cannot find module "$"');throw t.code="MODULE_NOT_FOUND",t}()),c=e(!function(){var t=new Error('Cannot find module "utils/async/ajax.js"');throw t.code="MODULE_NOT_FOUND",t}()),a=e(!function(){var t=new Error('Cannot find module "vue"');throw t.code="MODULE_NOT_FOUND",t}()),s=e(!function(){var t=new Error('Cannot find module "UI/dialog/alert"');throw t.code="MODULE_NOT_FOUND",t}()),d=e(!function(){var t=new Error('Cannot find module "mods/storage/storage"');throw t.code="MODULE_NOT_FOUND",t}()),u=e(!function(){var t=new Error('Cannot find module "conf/account/_common.js"');throw t.code="MODULE_NOT_FOUND",t}());r(i)}.call(n,e,n,t))&&(t.exports=o)}});
//# sourceMappingURL=exchange.js.map