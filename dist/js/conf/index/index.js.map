{"version":3,"sources":["webpack:///index/index.js","webpack:///webpack/bootstrap cc47a71fbd10bdad4319","webpack:///./src/js/conf/index/a.js","webpack:///./src/js/utils/async/ajax.js","webpack:///./src/js/conf/index/index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","a","console","log","_classCallCheck","instance","Constructor","TypeError","__WEBPACK_AMD_DEFINE_RESULT__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","undefined","require","e","Error","code","alert","defaults_xhr","xmlhttp","XMLHttpRequest","defaults","type","dataType","success","error","data","Ajax","this","window","fetch","_ajax","_fetch","_xhr","params","assign","options","url","alertSecond","df","ops","_url_get","open","setRequestHeader","responseType","onload","status","readyState","res","response","text","alertBox","cancelCallback","location","callback","pathname","search","encodeURIComponent","JSON","parse","ontimeout","stringify","send","args","method","mode","cache","credentials","headers","Content-Type","body","then","ok","json","obj","FormData","append","str","substr","arr","push","includes","join"],"mappings":"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","file":"index\\index.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n\ta: function a() {\n\t\tconsole.log('a');\n\t}\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\n/**\r\n * [description] ajax\r\n * 2017-02-08\r\n * query 查询get方法\r\n * post  post\r\n *\r\n * params:  {\r\n    url: \"\", // 必填\r\n    type: \"\", // 选填 [get,post]\r\n    success: function() {}, //选填 成功的回调\r\n    error: function(){}, // 选填 失败的回调\r\n    data: null, // 选填\r\n    dataType: \"\" //选填\r\n}\r\n */\n!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n    __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"lib/polyfill/object.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n    __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"lib/polyfill/string.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n    var alert = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"UI/dialog/alert.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\n    var defaults_xhr = {\n        xmlhttp: new XMLHttpRequest(),\n        defaults: {\n            type: 'post',\n            dataType: 'json',\n            success: function success() {},\n            error: function error() {},\n            data: null\n        }\n    };\n\n    var Ajax = function () {\n        function Ajax() {\n            _classCallCheck(this, Ajax);\n\n            if (typeof window.fetch !== \"undefined\") {\n                this._ajax = this._fetch;\n            } else {\n                this._ajax = this._xhr;\n            }\n        }\n\n        _createClass(Ajax, [{\n            key: 'query',\n            value: function query(params) {\n                this._ajax(Object.assign({ type: \"GET\" }, params));\n            }\n        }, {\n            key: 'post',\n            value: function post(params) {\n                this._ajax(Object.assign({ type: \"POST\" }, params));\n            }\n        }, {\n            key: 'put',\n            value: function put(params) {\n                this._ajax(Object.assign({ type: \"PUT\" }, params));\n            }\n        }, {\n            key: 'delete',\n            value: function _delete(params) {\n                this._ajax(Object.assign({ type: \"DELETE\" }, params));\n            }\n        }, {\n            key: '_xhr',\n            value: function _xhr(options) {\n                if (!options.url) {\n                    alert.alertSecond(\"url是必填参数\");\n                    return;\n                }\n                var df = defaults_xhr,\n                    xmlhttp = new XMLHttpRequest(),\n                    ops = Object.assign({}, df.defaults, options);\n\n                if (ops.data && ops.type == \"GET\") {\n                    ops.url = this._url_get(ops.url, ops.data);\n                }\n                xmlhttp.open(ops.type, ops.url, true);\n                xmlhttp.setRequestHeader(\"Content-type\", \"application/json\");\n                xmlhttp.responseType = ops.dataType;\n                // xmlhttp.timeout = 3000;\n                xmlhttp.onload = function () {\n                    if (xmlhttp.status === 200 && xmlhttp.readyState === 4) {\n                        // let res = xmlhttp.response || {};\n                        // if (typeof res === 'object' && 'code' in res && res['code'] === 401) {\n                        //     alert.alertSecond(res.message);\n                        // }\n                        var res = xmlhttp.response,\n                            text = \"Your login status has expired, please log in again\";\n                        if (res.code === 401) {\n                            if (res.error.code === \"US-10013\") {\n                                text = \"Your account has been logged in elsewhere\";\n                            }\n                            alert.alertBox({\n                                text: text,\n                                cancelCallback: function cancelCallback() {\n                                    location.assign(\"/\");\n                                },\n                                callback: function callback() {\n                                    var url = location.pathname + location.search;\n                                    location.assign('/login?redirect=' + encodeURIComponent(url));\n                                }\n                            });\n                        } else {\n                            res = typeof res == \"string\" ? JSON.parse(res) : res;\n                            ops.success(res);\n                        }\n                    } else {\n                        console.log('request is fail');\n                    }\n                };\n                xmlhttp.ontimeout = function () {\n                    console.log('请求超时');\n                };\n                var data = JSON.stringify(ops.data || {});\n                xmlhttp.send(data || null);\n            }\n        }, {\n            key: '_fetch',\n            value: function _fetch(options) {\n                if (!options.url) {\n                    alert.alertSecond(\"url是必填参数\");\n                    return;\n                }\n                var args = {\n                    method: options.type,\n                    mode: 'cors',\n                    cache: 'default',\n                    credentials: 'include', // 请求带上cookies，是每次请求保持会话一直\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                };\n                if (options.data) {\n                    if (options.type == \"GET\") {\n                        options.url = this._url_get(options.url, options.data);\n                    } else {\n                        args.body = JSON.stringify(options.data || {});\n                    }\n                }\n                fetch(options.url, args).then(function (res) {\n                    if (res.ok) {\n                        //暂时只处理json格式的数据\n                        // if (res.headers.get(\"content-type\").indexOf(\"application/json\") >= 0) {\n                        res.json().then(function (data) {\n                            var text = \"Your login status has expired, please log in again\";\n                            if (data.code === 401) {\n                                if (data.error.code === \"US-10013\") {\n                                    text = \"Your account has been logged in elsewhere\";\n                                }\n                                alert.alertBox({\n                                    text: text,\n                                    cancelCallback: function cancelCallback() {\n                                        location.assign(\"/\");\n                                    },\n                                    callback: function callback() {\n                                        var url = location.pathname + location.search;\n                                        location.assign('/login?redirect=' + encodeURIComponent(url));\n                                    }\n                                });\n                            }\n                            options.success(data);\n                        });\n                        // } else {\n                        // alert.alertSecond(\"暂不支持此格式\");\n                        // }\n                    }\n                });\n            }\n        }, {\n            key: '_formatParams',\n            value: function _formatParams(obj) {\n                // let formdata = new FormData();\n                // for (let key in obj) {\n                //     formdata.append(key, obj[key]);\n                // }\n                // return formdata;\n                // var arr = new Array();\n                // var i = 0;\n                // for (var attr in obj) {\n                //     arr[i] = encodeURIComponent(attr) + \"=\" + encodeURIComponent(obj[attr]);\n                //     i++;\n                // }\n                // return arr.join(\"&\");\n                var data = new FormData();\n                data.append(\"json\", JSON.stringify(obj));\n                return data;\n            }\n        }, {\n            key: '_fetchParams',\n            value: function _fetchParams(obj) {\n                var str = \"\";\n                for (var key in obj) {\n                    str += key + \"=\" + obj[key] + \"&\";\n                }\n                return str.substr(0, str.length - 1);\n            }\n        }, {\n            key: '_url_get',\n            value: function _url_get(url, obj) {\n                var arr = [];\n                for (var key in obj) {\n                    arr.push(key + \"=\" + obj[key]);\n                }\n                url += (url.includes(\"?\") ? \"&\" : \"?\") + arr.join(\"&\");\n                return url;\n            }\n        }]);\n\n        return Ajax;\n    }();\n\n    module.exports = new Ajax();\n}.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceMappingURL=../../../maps/utils/async/ajax.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar a = __webpack_require__(0);\nvar ajax = __webpack_require__(1);\n\na.a();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// index/index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cc47a71fbd10bdad4319","module.exports = {\r\n\ta(){\r\n\t\tconsole.log('a');\r\n\t}\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/conf/index/a.js","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * [description] ajax\r\n * 2017-02-08\r\n * query 查询get方法\r\n * post  post\r\n *\r\n * params:  {\r\n    url: \"\", // 必填\r\n    type: \"\", // 选填 [get,post]\r\n    success: function() {}, //选填 成功的回调\r\n    error: function(){}, // 选填 失败的回调\r\n    data: null, // 选填\r\n    dataType: \"\" //选填\r\n}\r\n */\ndefine(\"utils/async/ajax\", function (require, exports, module) {\n    require('lib/polyfill/object.js');\n    require('lib/polyfill/string.js');\n    var alert = require('UI/dialog/alert.js');\n\n    var defaults_xhr = {\n        xmlhttp: new XMLHttpRequest(),\n        defaults: {\n            type: 'post',\n            dataType: 'json',\n            success: function success() {},\n            error: function error() {},\n            data: null\n        }\n    };\n\n    var Ajax = function () {\n        function Ajax() {\n            _classCallCheck(this, Ajax);\n\n            if (typeof window.fetch !== \"undefined\") {\n                this._ajax = this._fetch;\n            } else {\n                this._ajax = this._xhr;\n            }\n        }\n\n        _createClass(Ajax, [{\n            key: 'query',\n            value: function query(params) {\n                this._ajax(Object.assign({ type: \"GET\" }, params));\n            }\n        }, {\n            key: 'post',\n            value: function post(params) {\n                this._ajax(Object.assign({ type: \"POST\" }, params));\n            }\n        }, {\n            key: 'put',\n            value: function put(params) {\n                this._ajax(Object.assign({ type: \"PUT\" }, params));\n            }\n        }, {\n            key: 'delete',\n            value: function _delete(params) {\n                this._ajax(Object.assign({ type: \"DELETE\" }, params));\n            }\n        }, {\n            key: '_xhr',\n            value: function _xhr(options) {\n                if (!options.url) {\n                    alert.alertSecond(\"url是必填参数\");\n                    return;\n                }\n                var df = defaults_xhr,\n                    xmlhttp = new XMLHttpRequest(),\n                    ops = Object.assign({}, df.defaults, options);\n\n                if (ops.data && ops.type == \"GET\") {\n                    ops.url = this._url_get(ops.url, ops.data);\n                }\n                xmlhttp.open(ops.type, ops.url, true);\n                xmlhttp.setRequestHeader(\"Content-type\", \"application/json\");\n                xmlhttp.responseType = ops.dataType;\n                // xmlhttp.timeout = 3000;\n                xmlhttp.onload = function () {\n                    if (xmlhttp.status === 200 && xmlhttp.readyState === 4) {\n                        // let res = xmlhttp.response || {};\n                        // if (typeof res === 'object' && 'code' in res && res['code'] === 401) {\n                        //     alert.alertSecond(res.message);\n                        // }\n                        var res = xmlhttp.response,\n                            text = \"Your login status has expired, please log in again\";\n                        if (res.code === 401) {\n                            if (res.error.code === \"US-10013\") {\n                                text = \"Your account has been logged in elsewhere\";\n                            }\n                            alert.alertBox({\n                                text: text,\n                                cancelCallback: function cancelCallback() {\n                                    location.assign(\"/\");\n                                },\n                                callback: function callback() {\n                                    var url = location.pathname + location.search;\n                                    location.assign('/login?redirect=' + encodeURIComponent(url));\n                                }\n                            });\n                        } else {\n                            res = typeof res == \"string\" ? JSON.parse(res) : res;\n                            ops.success(res);\n                        }\n                    } else {\n                        console.log('request is fail');\n                    }\n                };\n                xmlhttp.ontimeout = function () {\n                    console.log('请求超时');\n                };\n                var data = JSON.stringify(ops.data || {});\n                xmlhttp.send(data || null);\n            }\n        }, {\n            key: '_fetch',\n            value: function _fetch(options) {\n                if (!options.url) {\n                    alert.alertSecond(\"url是必填参数\");\n                    return;\n                }\n                var args = {\n                    method: options.type,\n                    mode: 'cors',\n                    cache: 'default',\n                    credentials: 'include', // 请求带上cookies，是每次请求保持会话一直\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                };\n                if (options.data) {\n                    if (options.type == \"GET\") {\n                        options.url = this._url_get(options.url, options.data);\n                    } else {\n                        args.body = JSON.stringify(options.data || {});\n                    }\n                }\n                fetch(options.url, args).then(function (res) {\n                    if (res.ok) {\n                        //暂时只处理json格式的数据\n                        // if (res.headers.get(\"content-type\").indexOf(\"application/json\") >= 0) {\n                        res.json().then(function (data) {\n                            var text = \"Your login status has expired, please log in again\";\n                            if (data.code === 401) {\n                                if (data.error.code === \"US-10013\") {\n                                    text = \"Your account has been logged in elsewhere\";\n                                }\n                                alert.alertBox({\n                                    text: text,\n                                    cancelCallback: function cancelCallback() {\n                                        location.assign(\"/\");\n                                    },\n                                    callback: function callback() {\n                                        var url = location.pathname + location.search;\n                                        location.assign('/login?redirect=' + encodeURIComponent(url));\n                                    }\n                                });\n                            }\n                            options.success(data);\n                        });\n                        // } else {\n                        // alert.alertSecond(\"暂不支持此格式\");\n                        // }\n                    }\n                });\n            }\n        }, {\n            key: '_formatParams',\n            value: function _formatParams(obj) {\n                // let formdata = new FormData();\n                // for (let key in obj) {\n                //     formdata.append(key, obj[key]);\n                // }\n                // return formdata;\n                // var arr = new Array();\n                // var i = 0;\n                // for (var attr in obj) {\n                //     arr[i] = encodeURIComponent(attr) + \"=\" + encodeURIComponent(obj[attr]);\n                //     i++;\n                // }\n                // return arr.join(\"&\");\n                var data = new FormData();\n                data.append(\"json\", JSON.stringify(obj));\n                return data;\n            }\n        }, {\n            key: '_fetchParams',\n            value: function _fetchParams(obj) {\n                var str = \"\";\n                for (var key in obj) {\n                    str += key + \"=\" + obj[key] + \"&\";\n                }\n                return str.substr(0, str.length - 1);\n            }\n        }, {\n            key: '_url_get',\n            value: function _url_get(url, obj) {\n                var arr = [];\n                for (var key in obj) {\n                    arr.push(key + \"=\" + obj[key]);\n                }\n                url += (url.includes(\"?\") ? \"&\" : \"?\") + arr.join(\"&\");\n                return url;\n            }\n        }]);\n\n        return Ajax;\n    }();\n\n    module.exports = new Ajax();\n});\n//# sourceMappingURL=../../../maps/utils/async/ajax.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/async/ajax.js","var a = require('a');\nvar ajax = require('ajax');\n\na.a();\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/conf/index/index.js"],"sourceRoot":""}