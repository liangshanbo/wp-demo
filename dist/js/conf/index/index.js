!function(e){function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=2)}([function(e,n,t){"use strict";e.exports={a:function(){console.log("a")}}},function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var a,r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();void 0!==(a=function(e,n,a){t(!function(){var e=new Error('Cannot find module "lib/polyfill/object.js"');throw e.code="MODULE_NOT_FOUND",e}()),t(!function(){var e=new Error('Cannot find module "lib/polyfill/string.js"');throw e.code="MODULE_NOT_FOUND",e}());var i=t(!function(){var e=new Error('Cannot find module "UI/dialog/alert.js"');throw e.code="MODULE_NOT_FOUND",e}()),c={xmlhttp:new XMLHttpRequest,defaults:{type:"post",dataType:"json",success:function(){},error:function(){},data:null}},u=function(){function e(){o(this,e),void 0!==window.fetch?this._ajax=this._fetch:this._ajax=this._xhr}return r(e,[{key:"query",value:function(e){this._ajax(Object.assign({type:"GET"},e))}},{key:"post",value:function(e){this._ajax(Object.assign({type:"POST"},e))}},{key:"put",value:function(e){this._ajax(Object.assign({type:"PUT"},e))}},{key:"delete",value:function(e){this._ajax(Object.assign({type:"DELETE"},e))}},{key:"_xhr",value:function(e){if(!e.url)return void i.alertSecond("url是必填参数");var n=c,t=new XMLHttpRequest,o=Object.assign({},n.defaults,e);o.data&&"GET"==o.type&&(o.url=this._url_get(o.url,o.data)),t.open(o.type,o.url,!0),t.setRequestHeader("Content-type","application/json"),t.responseType=o.dataType,t.onload=function(){if(200===t.status&&4===t.readyState){var e=t.response,n="Your login status has expired, please log in again";401===e.code?("US-10013"===e.error.code&&(n="Your account has been logged in elsewhere"),i.alertBox({text:n,cancelCallback:function(){location.assign("/")},callback:function(){var e=location.pathname+location.search;location.assign("/login?redirect="+encodeURIComponent(e))}})):(e="string"==typeof e?JSON.parse(e):e,o.success(e))}else console.log("request is fail")},t.ontimeout=function(){console.log("请求超时")};var a=JSON.stringify(o.data||{});t.send(a||null)}},{key:"_fetch",value:function(e){if(!e.url)return void i.alertSecond("url是必填参数");var n={method:e.type,mode:"cors",cache:"default",credentials:"include",headers:{"Content-Type":"application/json"}};e.data&&("GET"==e.type?e.url=this._url_get(e.url,e.data):n.body=JSON.stringify(e.data||{})),fetch(e.url,n).then(function(n){n.ok&&n.json().then(function(n){var t="Your login status has expired, please log in again";401===n.code&&("US-10013"===n.error.code&&(t="Your account has been logged in elsewhere"),i.alertBox({text:t,cancelCallback:function(){location.assign("/")},callback:function(){var e=location.pathname+location.search;location.assign("/login?redirect="+encodeURIComponent(e))}})),e.success(n)})})}},{key:"_formatParams",value:function(e){var n=new FormData;return n.append("json",JSON.stringify(e)),n}},{key:"_fetchParams",value:function(e){var n="";for(var t in e)n+=t+"="+e[t]+"&";return n.substr(0,n.length-1)}},{key:"_url_get",value:function(e,n){var t=[];for(var o in n)t.push(o+"="+n[o]);return e+=(e.includes("?")?"&":"?")+t.join("&")}}]),e}();a.exports=new u}.call(n,t,n,e))&&(e.exports=a)},function(e,n,t){"use strict";var o=t(0);t(1);o.a()}]);
//# sourceMappingURL=index.js.map