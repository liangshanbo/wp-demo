{"version":3,"sources":["webpack:///hy/game/luckydraw_core.js","webpack:///webpack/bootstrap e88654c60313c2e6e044?9e99*******","webpack:///./src/js/conf/hy/game/luckydraw_core.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","__WEBPACK_AMD_DEFINE_RESULT__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","undefined","require","e","Error","code","Storage","Ajax","internal","dates","loading","date_now","Date","valueOf","$pre","$","$next","$list","$nolist","$date","date_storage","begintime","endtime","DrawCore","this","init","self","ajaxData","bindEvents","on","share","_toggle_date","$dom","type","parent","hasClass","now","data","bounses","str","Math","min","boun","html","show","hide","descr","description","split","find","timestamp","date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","miu","getMinutes","seconds","getSeconds","$now","_get_date","$begin","$end","$rnow","bPre","_get_timestamp","bNext","removeClass","addClass","dd","getItem","join","query","url","queryDate","success","result","_handle_data","toast","message","_show_data","beginTime","entTime","bonusTime","_set_btn"],"mappings":"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","file":"hy\\game\\luckydraw_core.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */,\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\n/**\n * @title: 幸运大抽奖--核心部分\n * @time:  2017-04-26\n * @author: wangchunpeng\n */\n!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n    __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"$\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n    var Storage = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/storage/storage\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())),\n        Ajax = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"utils/async/ajax\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\n    var internal = {\n        dates: [\"Apr\", \"May\"],\n        loading: false, //是否正在加载list\n        date_now: new Date().valueOf(), //当前显示的哪天的数据\n        $pre: $(\".pre\"),\n        $next: $(\".next\"),\n        $list: $(\".main .list\"),\n        $nolist: $(\".main .nolist\"),\n        $date: $(\".main .date\"),\n        date_storage: \"\",\n        begintime: \"\", //活动开始时间\n        endtime: \"\" //结束时间\n    };\n\n    var DrawCore = function () {\n        function DrawCore() {\n            _classCallCheck(this, DrawCore);\n\n            this.init();\n        }\n\n        _createClass(DrawCore, [{\n            key: \"init\",\n            value: function init() {\n                var self = this;\n                self.ajaxData();\n                self.bindEvents();\n            }\n        }, {\n            key: \"bindEvents\",\n            value: function bindEvents() {\n                var self = this;\n                $(\".share,.share0\").on(\"click\", function () {\n                    self.share();\n                });\n                internal.$pre.on(\"click\", function () {\n                    self._toggle_date(internal.$pre, \"pre\");\n                });\n                internal.$next.on(\"click\", function () {\n                    self._toggle_date(internal.$next, \"next\");\n                });\n            }\n        }, {\n            key: \"_toggle_date\",\n            value: function _toggle_date($dom, type) {\n                if ($dom.parent().hasClass(\"disabled\") || internal.loading) {\n                    return;\n                }\n                var now = internal.date_now,\n                    self = this;\n                if (type == \"next\") {\n                    now += 24 * 60 * 60 * 1000;\n                } else {\n                    now -= 24 * 60 * 60 * 1000;\n                }\n                internal.date_now = now;\n                self.ajaxData();\n            }\n        }, {\n            key: \"_show_data\",\n            value: function _show_data(data) {\n                var bounses = data.bounses;\n                if (bounses) {\n                    var str = \"\",\n                        l = Math.min(10, bounses.length);\n                    for (var i = 0; i < l; i++) {\n                        var boun = bounses[i];\n                        str += (boun[\"isMe\"] ? \"<li class='active'>\" : \"<li>\") + \"<a href='javascript:void(0)' class='clearfix'>\" + (\"<span class='uname'>\" + boun['nickname'] + \"</span>\") + (\"<span class='phone'>\" + boun['mobile'] + \"</span>\") + \"</li>\";\n                    }\n                    internal.$list.html(str).show();\n                    internal.$nolist.hide();\n                } else {\n                    var descr = data.description.split(\".\");\n                    internal.$nolist.find(\".tip1\").html(descr[0]);\n                    internal.$nolist.find(\".tip2\").html(descr[1]);\n                    internal.$list.hide();\n                    internal.$nolist.show();\n                }\n            }\n        }, {\n            key: \"_get_date\",\n            value: function _get_date(timestamp) {\n                var date = new Date(timestamp),\n                    year = date.getFullYear(),\n                    month = date.getMonth() + 1,\n                    day = date.getDate(),\n                    hour = date.getHours(),\n                    miu = date.getMinutes(),\n                    seconds = date.getSeconds();\n                month = month > 9 ? month : \"0\" + month;\n                day = day > 9 ? day : \"0\" + day;\n                hour = hour > 9 ? hour : \"0\" + hour;\n                miu = miu > 9 ? miu : \"0\" + miu;\n                seconds = seconds > 9 ? seconds : \"0\" + seconds;\n\n                return { year: year, month: month, day: day, hour: hour, miu: miu, seconds: seconds };\n            }\n\n            /**\n             * @title:设置next pre是否disable\n             * bPre： 大于开始时间的第二天\n             * bNext：小于结束时间&&小于当前时间\n             */\n\n        }, {\n            key: \"_set_btn\",\n            value: function _set_btn() {\n                if (internal.begintime && internal.endtime) {\n                    var self = this,\n                        $now = self._get_date(internal.date_now),\n                        $begin = self._get_date(internal.begintime),\n                        $end = self._get_date(internal.endtime),\n                        $rnow = self._get_date(new Date().valueOf());\n\n                    var bPre = self._get_timestamp($now) > self._get_timestamp($begin),\n                        bNext = self._get_timestamp($now) < Math.min(self._get_timestamp($end), self._get_timestamp($rnow));\n\n                    if (bPre) {\n                        internal.$pre.parent().removeClass(\"disabled\");\n                    } else {\n                        internal.$pre.parent().addClass(\"disabled\");\n                    }\n                    if (bNext) {\n                        internal.$next.parent().removeClass(\"disabled\");\n                    } else {\n                        internal.$next.parent().addClass(\"disabled\");\n                    }\n                }\n            }\n        }, {\n            key: \"_get_timestamp\",\n            value: function _get_timestamp($date) {\n                return new Date($date.year + \"/\" + $date.month + \"/\" + $date.day).valueOf();\n            }\n        }, {\n            key: \"ajaxData\",\n            value: function ajaxData() {\n                var self = this;\n\n                internal.$list.hide();\n                internal.$nolist.find(\".tip\").html(\"\");\n                internal.$nolist.show();\n\n                var dd = self._get_date(internal.date_now),\n                    storage = Storage.getItem(\"luckydraw_\" + internal.date_storage);\n                dd = [dd.year, dd.month, dd.day, dd.hour, dd.miu, dd.seconds].join(\"\");\n                if (storage) {//优先拿本地存储的数据\n                    //self._handle_data(storage); //TODO\n                    //return;\n                }\n                internal.loading = true;\n                Ajax.query({\n                    url: \"/api/activity/luckydraw/bonuses\",\n                    data: {\n                        queryDate: dd\n                    },\n                    success: function success(data) {\n                        if (data.code === 200) {\n                            var result = data.data;\n                            self._handle_data(result);\n                            if (result.bounses) {\n                                //Storage.setItem(\"luckydraw_\" + internal.date_storage, JSON.stringify(result)); //TODO\n                            }\n                        } else {\n                            self.toast(data.message);\n                        }\n                        internal.loading = false;\n                    }\n                });\n            }\n        }, {\n            key: \"_handle_data\",\n            value: function _handle_data(result) {\n                var self = this;\n                self._show_data(result);\n                internal.begintime = result.beginTime;\n                internal.endtime = result.entTime;\n                if (result.bonusTime) {\n                    internal.date_now = new Date(result.bonusTime).valueOf();\n                }\n                self._set_btn();\n                var date = self._get_date(internal.date_now),\n                    str = \"\";\n                str += date.month == \"04\" ? internal[\"dates\"][0] : internal[\"dates\"][1];\n                str += \".\" + date.day;\n                internal.$date.find(\"span\").html(str);\n            }\n        }]);\n\n        return DrawCore;\n    }();\n\n    module.exports = DrawCore;\n}.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceMappingURL=../../../../maps/conf/hy/game/luckydraw_core.js.map\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// hy/game/luckydraw_core.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e88654c60313c2e6e044","\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @title: 幸运大抽奖--核心部分\n * @time:  2017-04-26\n * @author: wangchunpeng\n */\ndefine(\"conf/hy/game/luckydraw_core\", function (require, exports, module) {\n    require(\"$\");\n    var Storage = require(\"mods/storage/storage\"),\n        Ajax = require(\"utils/async/ajax\");\n\n    var internal = {\n        dates: [\"Apr\", \"May\"],\n        loading: false, //是否正在加载list\n        date_now: new Date().valueOf(), //当前显示的哪天的数据\n        $pre: $(\".pre\"),\n        $next: $(\".next\"),\n        $list: $(\".main .list\"),\n        $nolist: $(\".main .nolist\"),\n        $date: $(\".main .date\"),\n        date_storage: \"\",\n        begintime: \"\", //活动开始时间\n        endtime: \"\" //结束时间\n    };\n\n    var DrawCore = function () {\n        function DrawCore() {\n            _classCallCheck(this, DrawCore);\n\n            this.init();\n        }\n\n        _createClass(DrawCore, [{\n            key: \"init\",\n            value: function init() {\n                var self = this;\n                self.ajaxData();\n                self.bindEvents();\n            }\n        }, {\n            key: \"bindEvents\",\n            value: function bindEvents() {\n                var self = this;\n                $(\".share,.share0\").on(\"click\", function () {\n                    self.share();\n                });\n                internal.$pre.on(\"click\", function () {\n                    self._toggle_date(internal.$pre, \"pre\");\n                });\n                internal.$next.on(\"click\", function () {\n                    self._toggle_date(internal.$next, \"next\");\n                });\n            }\n        }, {\n            key: \"_toggle_date\",\n            value: function _toggle_date($dom, type) {\n                if ($dom.parent().hasClass(\"disabled\") || internal.loading) {\n                    return;\n                }\n                var now = internal.date_now,\n                    self = this;\n                if (type == \"next\") {\n                    now += 24 * 60 * 60 * 1000;\n                } else {\n                    now -= 24 * 60 * 60 * 1000;\n                }\n                internal.date_now = now;\n                self.ajaxData();\n            }\n        }, {\n            key: \"_show_data\",\n            value: function _show_data(data) {\n                var bounses = data.bounses;\n                if (bounses) {\n                    var str = \"\",\n                        l = Math.min(10, bounses.length);\n                    for (var i = 0; i < l; i++) {\n                        var boun = bounses[i];\n                        str += (boun[\"isMe\"] ? \"<li class='active'>\" : \"<li>\") + \"<a href='javascript:void(0)' class='clearfix'>\" + (\"<span class='uname'>\" + boun['nickname'] + \"</span>\") + (\"<span class='phone'>\" + boun['mobile'] + \"</span>\") + \"</li>\";\n                    }\n                    internal.$list.html(str).show();\n                    internal.$nolist.hide();\n                } else {\n                    var descr = data.description.split(\".\");\n                    internal.$nolist.find(\".tip1\").html(descr[0]);\n                    internal.$nolist.find(\".tip2\").html(descr[1]);\n                    internal.$list.hide();\n                    internal.$nolist.show();\n                }\n            }\n        }, {\n            key: \"_get_date\",\n            value: function _get_date(timestamp) {\n                var date = new Date(timestamp),\n                    year = date.getFullYear(),\n                    month = date.getMonth() + 1,\n                    day = date.getDate(),\n                    hour = date.getHours(),\n                    miu = date.getMinutes(),\n                    seconds = date.getSeconds();\n                month = month > 9 ? month : \"0\" + month;\n                day = day > 9 ? day : \"0\" + day;\n                hour = hour > 9 ? hour : \"0\" + hour;\n                miu = miu > 9 ? miu : \"0\" + miu;\n                seconds = seconds > 9 ? seconds : \"0\" + seconds;\n\n                return { year: year, month: month, day: day, hour: hour, miu: miu, seconds: seconds };\n            }\n\n            /**\n             * @title:设置next pre是否disable\n             * bPre： 大于开始时间的第二天\n             * bNext：小于结束时间&&小于当前时间\n             */\n\n        }, {\n            key: \"_set_btn\",\n            value: function _set_btn() {\n                if (internal.begintime && internal.endtime) {\n                    var self = this,\n                        $now = self._get_date(internal.date_now),\n                        $begin = self._get_date(internal.begintime),\n                        $end = self._get_date(internal.endtime),\n                        $rnow = self._get_date(new Date().valueOf());\n\n                    var bPre = self._get_timestamp($now) > self._get_timestamp($begin),\n                        bNext = self._get_timestamp($now) < Math.min(self._get_timestamp($end), self._get_timestamp($rnow));\n\n                    if (bPre) {\n                        internal.$pre.parent().removeClass(\"disabled\");\n                    } else {\n                        internal.$pre.parent().addClass(\"disabled\");\n                    }\n                    if (bNext) {\n                        internal.$next.parent().removeClass(\"disabled\");\n                    } else {\n                        internal.$next.parent().addClass(\"disabled\");\n                    }\n                }\n            }\n        }, {\n            key: \"_get_timestamp\",\n            value: function _get_timestamp($date) {\n                return new Date($date.year + \"/\" + $date.month + \"/\" + $date.day).valueOf();\n            }\n        }, {\n            key: \"ajaxData\",\n            value: function ajaxData() {\n                var self = this;\n\n                internal.$list.hide();\n                internal.$nolist.find(\".tip\").html(\"\");\n                internal.$nolist.show();\n\n                var dd = self._get_date(internal.date_now),\n                    storage = Storage.getItem(\"luckydraw_\" + internal.date_storage);\n                dd = [dd.year, dd.month, dd.day, dd.hour, dd.miu, dd.seconds].join(\"\");\n                if (storage) {//优先拿本地存储的数据\n                    //self._handle_data(storage); //TODO\n                    //return;\n                }\n                internal.loading = true;\n                Ajax.query({\n                    url: \"/api/activity/luckydraw/bonuses\",\n                    data: {\n                        queryDate: dd\n                    },\n                    success: function success(data) {\n                        if (data.code === 200) {\n                            var result = data.data;\n                            self._handle_data(result);\n                            if (result.bounses) {\n                                //Storage.setItem(\"luckydraw_\" + internal.date_storage, JSON.stringify(result)); //TODO\n                            }\n                        } else {\n                            self.toast(data.message);\n                        }\n                        internal.loading = false;\n                    }\n                });\n            }\n        }, {\n            key: \"_handle_data\",\n            value: function _handle_data(result) {\n                var self = this;\n                self._show_data(result);\n                internal.begintime = result.beginTime;\n                internal.endtime = result.entTime;\n                if (result.bonusTime) {\n                    internal.date_now = new Date(result.bonusTime).valueOf();\n                }\n                self._set_btn();\n                var date = self._get_date(internal.date_now),\n                    str = \"\";\n                str += date.month == \"04\" ? internal[\"dates\"][0] : internal[\"dates\"][1];\n                str += \".\" + date.day;\n                internal.$date.find(\"span\").html(str);\n            }\n        }]);\n\n        return DrawCore;\n    }();\n\n    module.exports = DrawCore;\n});\n//# sourceMappingURL=../../../../maps/conf/hy/game/luckydraw_core.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/conf/hy/game/luckydraw_core.js"],"sourceRoot":""}