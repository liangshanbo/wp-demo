!function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=22)}({22:function(e,n,t){"use strict";var o;void 0!==(o=function(e,n,o){t(!function(){var e=new Error('Cannot find module "$"');throw e.code="MODULE_NOT_FOUND",e}());var r=(t(!function(){var e=new Error('Cannot find module "mods/check/input.js"');throw e.code="MODULE_NOT_FOUND",e}()),t(!function(){var e=new Error('Cannot find module "utils/async/ajax.js"');throw e.code="MODULE_NOT_FOUND",e}())),c=t(!function(){var e=new Error('Cannot find module "mods/storage/storage"');throw e.code="MODULE_NOT_FOUND",e}());$("[data-node=fbLog]").on("click","a",function(){ga("send","event","login/sign","login_fb_btn_click"),FB.getLoginStatus(i)});var i=function(e){if("connected"!==e.status)FB.login(function(e){if(e.authResponse){var n={id:e.authResponse.userID,thirdPartyAccountType:"FACEBOOK",thirdPartyAccessToken:e.authResponse.accessToken};e.authResponse.accessToken;FB.api("/me",{fields:"name,cover,picture,email"},function(e){c.setItem("ascUserInfo",e),s(n)})}},{scope:"user_friends,email,public_profile"});else{var n={id:e.authResponse.userID,thirdPartyAccountType:"FACEBOOK",thirdPartyAccessToken:e.authResponse.accessToken};FB.api("/me",{fields:"name,cover,picture,email"},function(e){c.setItem("ascUserInfo",e),s(n)})}},s=function(e){var n="/api/user/thirdPartyAccountLogin?id="+e.id+"&thirdPartyAccessToken="+e.thirdPartyAccessToken+"&thirdPartyAccountType="+e.thirdPartyAccountType;r.query({url:n,success:function(n){200===n.code&&(n.data.isBound?location.replace("/"):(c.setItem("ascToken",e),location.assign("/login/associated")))},error:function(){}})}}.call(n,t,n,e))&&(e.exports=o)}});
//# sourceMappingURL=fbLog.js.map