!function(e){function n(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var o={};n.m=e,n.c=o,n.i=function(e){return e},n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=24)}({24:function(e,n,o){"use strict";var t;void 0!==(t=function(e,n,t){function r(){p.phone&&p.psd?$("#log").attr("disabled",!1).removeClass("disabled"):$("#log").attr("disabled",!0).addClass("disabled")}var a=(o(!function(){var e=new Error('Cannot find module "mods/check/input.js"');throw e.code="MODULE_NOT_FOUND",e}()),o(!function(){var e=new Error('Cannot find module "UI/dialog/alert.js"');throw e.code="MODULE_NOT_FOUND",e}())),i=o(!function(){var e=new Error('Cannot find module "utils/async/ajax.js"');throw e.code="MODULE_NOT_FOUND",e}()),c=o(!function(){var e=new Error('Cannot find module "mods/storage/storage"');throw e.code="MODULE_NOT_FOUND",e}()),l=o(!function(){var e=new Error('Cannot find module "mods/storage/cookie"');throw e.code="MODULE_NOT_FOUND",e}());o(!function(){var e=new Error('Cannot find module "$"');throw e.code="MODULE_NOT_FOUND",e}()),o(!function(){var e=new Error('Cannot find module "/conf/login/fbLog.js"');throw e.code="MODULE_NOT_FOUND",e}()),o(!function(){var e=new Error('Cannot find module "/conf/login/googleLog.js"');throw e.code="MODULE_NOT_FOUND",e}()),o(!function(){var e=new Error('Cannot find module "mods/country_area.js"');throw e.code="MODULE_NOT_FOUND",e}());var d=$("#log"),s=$("#username"),u=$("#password"),f=$("#login-phone-del"),m=$(".btn-border"),v=$(".login-input-forgot"),g={areaPhone:$("#login_area"),area:$("#area"),content:$("#content"),cancel:$("#area_cancel")},h=function(e){var n={};e=e||location.search,e=/^\?.*/i.test(e)?e.substr(1):e;for(var o=e.split("&"),t=0,r=o.length;t<r;t++){var a=o[t].split("=");n[a[0]]=a[1]}return n}(),p={phone:!1,psd:!1};window.onload=function(){s.val().length>=7&&(p.phone=!0,p.psd=!0,r())},function(){c.removeItem("fst"),c.removeItem("fsttime"),c.removeItem("sst"),c.removeItem("ssttime"),""!==s.val()&&(p.phone=!0),c.getItem("area")&&(g.areaPhone.html(c.getItem("area")),c.removeItem("area")),document.getElementById("username").addEventListener("input",function(e){var n=s.val();""!==n?f.show():f.hide(),p.phone=n.length>=7,""===n&&setTimeout(function(){s.val("")},50),r()},!1),f.on("click",function(){s.val(""),f.hide(),s.focus()}),document.getElementById("password").addEventListener("input",function(e){var n=u.val();u.val(n.replace(/[<> \&]/g,"")),p.psd=n.length>=6,""===n&&setTimeout(function(){u.val("")},50),r()},!1),g.areaPhone.on("click",function(){g.area.show(),g.content.hide()}),g.area.on("click","dd",function(){var e=$(this).attr("countryCode"),n=$(this).attr("code");g.areaPhone.html(n+" "+e),g.area.hide(),g.content.show(),$("#country").find("dt").removeClass("fixed")}),g.cancel.on("click",function(){g.area.hide(),g.content.show()})}(),d.on("click",function(){if(ga("send","event","login/sign","login_btn_click"),"true"==$("#log").attr("disabled"))return!1;var e={mobile:s.val(),password:u.val(),countryCode:"+"+g.areaPhone.html().split("+")[1]};i.post({url:"/api/user/login",data:e,success:function(e){if(200!==e.code)return a.alertSecond(e.message),!1;if(h&&h.redirect){var n=decodeURIComponent(h.redirect);h.type&&("collect"===h.type?l.setCookie("collect",1,1/240):"buy"===h.type&&(n+="&affExtParam1="+e.data.user.id)),location.replace(n)}else location.replace("/")},error:function(e){return a.alertSecond(e.message),!1}})}),m.on("click",function(){ga("send","event","login/sign","sign_btn_click")}),v.on("click",function(){ga("send","event","login/sign","forgotpassword_click")})}.call(n,o,n,e))&&(e.exports=t)}});
//# sourceMappingURL=index.js.map