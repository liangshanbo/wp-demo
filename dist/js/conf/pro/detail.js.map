{"version":3,"sources":["webpack:///conf/pro/detail.js","webpack:///webpack/bootstrap 2698a9f306103c1e7f9b?b6cd*****","webpack:///./src/js_es6/conf/pro/detail.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","34","__WEBPACK_AMD_DEFINE_RESULT__","undefined","require","init","cookie","getCookie","g_detail","btns","like","attr","UI","alertSecond","setCookie","collection","params","id","$","children","length","Swiper","loop","lazyLoading","pagination","onInit","e","Error","code","autoplay","bindEvent","buy","on","login","isLogin","url","userId","location","assign","thirdParty","show","collect","pathname","search","cancelCollection","layerBtn","layer","closeLayer","hide","showList","skus","find","each","this","index","select","hasClass","removeClass","addClass","confirm","dom","ajax","post","success","data","error","message","delete","itemId","Share","share","obj","test","substr","arr","split","res","fns","shareId","title","text","hashtag"],"mappings":"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","file":"conf\\pro\\detail.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 34);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 34:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar __WEBPACK_AMD_DEFINE_RESULT__;\n\n/**\n * title: 商品详情\n * author: wangchunpeng\n * time: 2017-02-20 \n */\n!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t__webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"$\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\tvar login = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/login\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\tvar UI = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"UI/dialog/alert\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\tvar ajax = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"utils/async/ajax\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\tvar Swiper = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/swiper.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\tvar cookie = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/storage/cookie.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\tvar Share = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"mods/share/shareDialog\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\tvar g_detail = {\n\t\tbtns: {\n\t\t\tbuy: $('#buy'),\n\t\t\tlike: $('#like'),\n\t\t\tshare: $('#share'),\n\t\t\tlayerBtn: $('#proDetailLayer'),\n\t\t\tlayer: $('#goodDetailLayer'),\n\t\t\tcloseLayer: $('#closeLayer'),\n\t\t\tshowList: $('#showList'),\n\t\t\tselect: $('#select'),\n\t\t\tconfirm: $('#confirm')\n\t\t},\n\t\tthirdParty: $('#third_party'),\n\t\tparams: getParams(),\n\t\tfns: {\n\t\t\tinit: init\n\t\t},\n\t\tskus: $('#skus')\n\t};\n\n\tg_detail.fns.init();\n\tvar share = new Share({\n\t\tbindEvent: g_detail.btns.share,\n\t\tshareId: $(\".detail\").attr('data-id'),\n\t\ttitle: $('.detail-title').text(),\n\t\thashtag: '#GOMEPLUS'\n\t});\n\tfunction init() {\n\t\t//处理未登录收藏的逻辑\n\t\tif (cookie.getCookie('collect') === \"1\") {\n\t\t\tvar collect = g_detail.btns.like.attr('collect');\n\t\t\tif (collect == \"1\") {\n\t\t\t\tUI.alertSecond(\"success\");\n\t\t\t\tcookie.setCookie('collect', \"0\", 1 / (24 * 10 * 6));\n\t\t\t} else {\n\t\t\t\tcollection(g_detail.params.id, g_detail.btns.like);\n\t\t\t}\n\t\t}\n\t\tif ($('#swiper-banner').children().length > 1) {\n\t\t\tnew Swiper('.carousel', {\n\t\t\t\tloop: true,\n\t\t\t\t// 如果需要分页器\n\t\t\t\tlazyLoading: true, //解决轮播到最后再划显示默认图\n\t\t\t\tpagination: '.swiper-pagination',\n\t\t\t\tonInit: function onInit() {\n\t\t\t\t\t__webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"utils/async/lazyload.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\t\t\t},\n\t\t\t\tautoplay: 3000\n\t\t\t});\n\t\t} else {\n\t\t\t__webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"utils/async/lazyload.js\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\t}\n\n\t\tbindEvent();\n\t}\n\n\tfunction bindEvent() {\n\t\tg_detail.btns.buy.on('click', function () {\n\t\t\tlogin.isLogin(function () {\n\t\t\t\tif (cookie.getCookie('third_layer')) {\n\t\t\t\t\tvar url = g_detail.btns.buy.attr('data-url') + '&affExtParam1=' + userId;\n\t\t\t\t\tlocation.assign(url || '/');\n\t\t\t\t} else {\n\t\t\t\t\tg_detail.thirdParty.show();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tg_detail.btns.like.on('click', function () {\n\t\t\tvar collect = g_detail.btns.like.attr('collect'),\n\t\t\t    url = location.pathname + location.search;\n\t\t\tlogin.isLogin(function () {\n\t\t\t\tif (collect === \"0\") {\n\t\t\t\t\tcollection(g_detail.params.id, g_detail.btns.like);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcancelCollection(g_detail.params.id, g_detail.btns.like);\n\t\t\t}, url, \"&type=collect\");\n\t\t});\n\t\t// g_detail.btns.share.on('click',function (){\n\t\t// \tconsole.log(share);\n\t\t// \tshare._show();\n\t\t// });\n\t\tg_detail.btns.layerBtn.on('click', function () {\n\t\t\tvar amount = g_detail.btns.layerBtn.attr('amount');\n\t\t\tif (amount > 100) {\n\t\t\t\tg_detail.btns.layer.show();\n\t\t\t}\n\t\t});\n\t\tg_detail.btns.closeLayer.on('click', function () {\n\t\t\tg_detail.btns.layer.hide();\n\t\t});\n\t\tif (g_detail.btns.showList.length > 0) {\n\t\t\tg_detail.btns.showList.on('click', function () {\n\t\t\t\tvar isShow = g_detail.skus.attr(\"isShow\");\n\t\t\t\tif (isShow === \"1\") {\n\t\t\t\t\tg_detail.skus.attr(\"isShow\", \"0\").find('li').each(function () {\n\t\t\t\t\t\tif ($(this).children('span').children().length > 4) {\n\t\t\t\t\t\t\t$(this).children('span').children().each(function () {\n\t\t\t\t\t\t\t\tif ($(this).index() > 3) {\n\t\t\t\t\t\t\t\t\t$(this).hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ($(this).index() > 3) {\n\t\t\t\t\t\t\t$(this).hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tg_detail.skus.attr(\"isShow\", \"1\").find('li,a,del').show();\n\t\t\t});\n\t\t}\n\t\t/*弹层*/\n\t\tg_detail.btns.select.on('click', function () {\n\t\t\tif ($(this).hasClass('active')) {\n\t\t\t\t$(this).removeClass('active');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$(this).addClass('active');\n\t\t});\n\t\tg_detail.btns.confirm.on('click', function () {\n\t\t\tvar url = g_detail.btns.buy.attr('data-url') + '&affExtParam1=' + userId;\n\t\t\tif (g_detail.btns.select.hasClass('active')) {\n\t\t\t\tcookie.setCookie('third_layer', 1, 9999);\n\t\t\t}\n\t\t\tlocation.assign(url || '/');\n\t\t});\n\t}\n\tfunction collection(id, dom) {\n\t\tajax.post({\n\t\t\turl: '/api/user/item?itemId=' + id,\n\t\t\tsuccess: function success(data) {\n\t\t\t\tif (data.code === 200) {\n\t\t\t\t\tdom.attr('collect', '1').children('i').addClass('active');\n\t\t\t\t\tUI.alertSecond(\"success\");\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function error(data) {\n\t\t\t\tUI.alertSecond(data.message);\n\t\t\t}\n\t\t});\n\t}\n\tfunction cancelCollection(id, dom) {\n\t\tajax.delete({\n\t\t\turl: '/api/user/item',\n\t\t\tdata: { itemId: id },\n\t\t\tsuccess: function success(data) {\n\t\t\t\tif (data.code === 200) {\n\t\t\t\t\tdom.attr('collect', '0').children('i').removeClass('active');\n\t\t\t\t\tUI.alertSecond(\"Cancel success\");\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function error(data) {\n\t\t\t\tUI.alertSecond(data.message);\n\t\t\t}\n\t\t});\n\t}\n\tfunction getParams(url) {\n\t\t//获取url传递的参数*/\n\t\tvar obj = {};\n\t\turl = url || location.search;\n\t\turl = /^\\?.*/i.test(url) ? url.substr(1) : url;\n\t\tvar arr = url.split(\"&\");\n\t\tfor (var i = 0, l = arr.length; i < l; i++) {\n\t\t\tvar res = arr[i].split(\"=\");\n\t\t\tobj[res[0]] = res[1];\n\t\t}\n\t\treturn obj;\n\t}\n}.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// conf/pro/detail.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2698a9f306103c1e7f9b","/**\n * title: 商品详情\n * author: wangchunpeng\n * time: 2017-02-20 \n */\ndefine('conf/pro/detail.js', function(require, exports, module) {\n\trequire('$');\n\tconst login = require('mods/login');\n\tconst UI = require('UI/dialog/alert');\n\tconst ajax = require('utils/async/ajax');\n\tconst Swiper = require('mods/swiper.js');\n\tconst cookie = require('mods/storage/cookie.js');\n\tconst Share = require('mods/share/shareDialog');\n\tconst g_detail = {\n\t\tbtns: {\n\t\t\tbuy: $('#buy'),\n\t\t\tlike: $('#like'),\n\t\t\tshare: $('#share'),\n\t\t\tlayerBtn: $('#proDetailLayer'),\n\t\t\tlayer: $('#goodDetailLayer'),\n\t\t\tcloseLayer:$('#closeLayer'),\n\t\t\tshowList:$('#showList'),\n\t\t\tselect:$('#select'),\n\t\t\tconfirm:$('#confirm')\n\t\t},\n\t\tthirdParty:$('#third_party'),\n\t\tparams:getParams(),\n\t\tfns: {\n\t\t\tinit: init\n\t\t},\n\t\tskus:$('#skus')\n\t};\n\n\tg_detail.fns.init();\n\tlet share = new Share({\n\t\tbindEvent:g_detail.btns.share,\n\t\tshareId:$(\".detail\").attr('data-id'),\n\t\ttitle:$('.detail-title').text(),\n\t\thashtag:'#GOMEPLUS'\n\t});\n\tfunction init() {\n\t\t//处理未登录收藏的逻辑\n\t\tif(cookie.getCookie('collect') === \"1\"){\n\t\t\tvar collect = g_detail.btns.like.attr('collect');\n\t\t\tif(collect == \"1\"){\n\t\t\t\tUI.alertSecond(\"success\");\n\t\t\t\tcookie.setCookie('collect',\"0\",1/(24*10*6));\n\t\t\t}else{\n\t\t\t\tcollection(g_detail.params.id,g_detail.btns.like);\n\t\t\t}\n\t\t}\n\t\tif($('#swiper-banner').children().length>1){\n\t\t\tnew Swiper ('.carousel', {\n\t\t\t\tloop: true,\n\t\t\t\t// 如果需要分页器\n\t\t\t\tlazyLoading:true,//解决轮播到最后再划显示默认图\n\t\t\t\tpagination: '.swiper-pagination',\n\t\t\t\tonInit:function(){\n\t\t\t\t\trequire('utils/async/lazyload.js');\n\t\t\t\t},\n\t\t\t\tautoplay:3000\n\t\t\t});\n\t\t}else{\n\t\t\trequire('utils/async/lazyload.js');\n\t\t}\n\n\t\tbindEvent();\n\t}\n\n\tfunction bindEvent() {\n\t\tg_detail.btns.buy.on('click', () => {\n\t\t\tlogin.isLogin(() => {\n\t\t\t\tif(cookie.getCookie('third_layer')){\n\t\t\t\t\tlet url = g_detail.btns.buy.attr('data-url') + '&affExtParam1='+userId;\n\t\t\t\t\tlocation.assign(url || '/');\n\t\t\t\t}else{\n\t\t\t\t\tg_detail.thirdParty.show();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tg_detail.btns.like.on('click', () => {\n\t\t\tlet collect = g_detail.btns.like.attr('collect'),\n\t\t\t\turl = location.pathname+location.search;\n\t\t\tlogin.isLogin(() => {\n\t\t\t\tif(collect === \"0\"){\n\t\t\t\t\tcollection(g_detail.params.id,g_detail.btns.like);\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t\tcancelCollection(g_detail.params.id,g_detail.btns.like)\n\t\t\t},url,\"&type=collect\");\n\t\t});\n\t\t// g_detail.btns.share.on('click',function (){\n\t\t// \tconsole.log(share);\n\t\t// \tshare._show();\n\t\t// });\n\t\tg_detail.btns.layerBtn.on('click', () => {\n\t\t\tlet amount = g_detail.btns.layerBtn.attr('amount');\n\t\t\tif(amount>100){\n\t\t\t\tg_detail.btns.layer.show();\n\t\t\t}\n\t\t});\n\t\tg_detail.btns.closeLayer.on('click', () => {\n\t\t\tg_detail.btns.layer.hide();\n\t\t});\n\t\tif(g_detail.btns.showList.length>0){\n\t\t\tg_detail.btns.showList.on('click', () => {\n\t\t\t\tlet isShow = g_detail.skus.attr(\"isShow\");\n\t\t\t\tif(isShow === \"1\"){\n\t\t\t\t\tg_detail.skus.attr(\"isShow\",\"0\").find('li').each(function(){\n\t\t\t\t\t\tif($(this).children('span').children().length>4){\n\t\t\t\t\t\t\t$(this).children('span').children().each(function(){\n\t\t\t\t\t\t\t\tif($(this).index()>3){\n\t\t\t\t\t\t\t\t\t$(this).hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif($(this).index()>3){\n\t\t\t\t\t\t\t$(this).hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t\tg_detail.skus.attr(\"isShow\",\"1\").find('li,a,del').show()\n\t\t\t});\n\t\t}\n\t\t/*弹层*/\n\t\tg_detail.btns.select.on('click',function(){\n\t\t\tif($(this).hasClass('active')){\n\t\t\t\t$(this).removeClass('active');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$(this).addClass('active');\n\t\t});\n\t\tg_detail.btns.confirm.on('click',function(){\n\t\t\tlet url = g_detail.btns.buy.attr('data-url') + '&affExtParam1='+userId;\n\t\t\tif(g_detail.btns.select.hasClass('active')){\n\t\t\t\tcookie.setCookie('third_layer',1,9999);\n\t\t\t}\n\t\t\tlocation.assign(url || '/');\n\t\t})\n\t}\n\tfunction collection(id,dom){\n\t\tajax.post({\n\t\t\turl: '/api/user/item?itemId=' + id,\n\t\t\tsuccess: function (data) {\n\t\t\t\tif(data.code === 200){\n\t\t\t\t\tdom.attr('collect','1').children('i').addClass('active');\n\t\t\t\t\tUI.alertSecond(\"success\")\n\t\t\t\t}\n\t\t\t},\n\t\t\terror:function(data){\n\t\t\t\tUI.alertSecond(data.message)\n\t\t\t}\n\t\t})\n\t}\n\tfunction cancelCollection(id,dom){\n\t\tajax.delete({\n\t\t\turl: '/api/user/item',\n\t\t\tdata: {itemId: id},\n\t\t\tsuccess: function (data) {\n\t\t\t\tif(data.code === 200){\n\t\t\t\t\tdom.attr('collect','0').children('i').removeClass('active');\n\t\t\t\t\tUI.alertSecond(\"Cancel success\")\n\t\t\t\t}\n\t\t\t},\n\t\t\terror:function(data){\n\t\t\t\tUI.alertSecond(data.message)\n\t\t\t}\n\t\t})\n\t}\n\tfunction getParams(url) { //获取url传递的参数*/\n\t\tvar obj = {};\n\t\turl = url || location.search;\n\t\turl = /^\\?.*/i.test(url) ? url.substr(1) : url;\n\t\tvar arr = url.split(\"&\");\n\t\tfor (var i = 0, l = arr.length; i < l; i++) {\n\t\t\tvar res = arr[i].split(\"=\");\n\t\t\tobj[res[0]] = res[1]\n\t\t}\n\t\treturn obj;\n\n\t}\n});\n\n\n// WEBPACK FOOTER //\n// ./src/js_es6/conf/pro/detail.js"],"sourceRoot":""}